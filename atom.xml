<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>QA seven&#39;s blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-10-15T15:56:59.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>qi lei</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart</title>
    <link href="http://yoursite.com/2017/10/15/vuex-shopping-cart/"/>
    <id>http://yoursite.com/2017/10/15/vuex-shopping-cart/</id>
    <published>2017-10-15T14:29:44.000Z</published>
    <updated>2017-10-15T15:56:59.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart"><a href="#å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart" class="headerlink" title="å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart"></a>å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart</h1><h2 id="ä»£ç åœ°å€"><a href="#ä»£ç åœ°å€" class="headerlink" title="ä»£ç åœ°å€"></a>ä»£ç åœ°å€</h2><p><a href="https://github.com/vuejs/vuex/tree/dev/examples/shopping-cart" target="_blank" rel="external">https://github.com/vuejs/vuex/tree/dev/examples/shopping-cart</a></p><p>ç›´æ¥ npm install æˆ–è€…yarn ï¼Œå®‰è£…ä¾èµ–</p><p>ä¹‹åï¼Œnpm run dev è¿è¡Œ</p><p>é¡µé¢å¦‚ä¸‹</p><p><img src="/source/image/vuex-demo.png" alt="shop"></p><p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥çœ‹æºç ã€‚</p><h2 id="æºç è§£æ"><a href="#æºç è§£æ" class="headerlink" title="æºç è§£æ"></a>æºç è§£æ</h2><p>å…ˆæ¥çœ‹çœ‹æ–‡ä»¶ç›®å½•</p><p><img src="/source/image/vuex-demo2.png" alt="æ–‡ä»¶"></p><p>è¯¥demoåŒ…å«äº†2ä¸ªmoduleï¼Œä¸€ä¸ªå«cart,å¦ä¸€ä¸ªå«product.</p><p>å…ˆçœ‹cart<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#shopæ˜¯è·å–æ•°æ®çš„api</span></div><div class="line">import shop <span class="keyword">from</span> '../../api/shop'</div><div class="line"><span class="comment">#å¼•å…¥äº† mutation-types ä½¿ç”¨å¸¸é‡æ›¿ä»£ Mutation äº‹ä»¶ç±»å‹</span></div><div class="line">import * as types <span class="keyword">from</span> '../mutation-types'</div><div class="line"></div><div class="line">// initial <span class="keyword">state</span> åˆå§‹åŒ–äº†<span class="number">2</span>ä¸ªçŠ¶æ€ä¹Ÿå¯å«æ•°æ®å¯¹è±¡ï¼Œadded:</div><div class="line">// shape: [&#123; id, quantity &#125;]</div><div class="line">const <span class="keyword">state</span> = &#123;</div><div class="line">  added: [],</div><div class="line">  checkoutStatus: null</div><div class="line">&#125;</div><div class="line"></div><div class="line">// getters gettersè¿‡æ»¤æ¡ä»¶å¿…é¡»æ˜¯bolleanå€¼.æ ¹æ®boleançš„æ¡ä»¶è¿”å›å…·ä½“æ•°æ®å¯¹è±¡ã€‚nullåœ¨JavaScriptä¸­ifæ¡ä»¶ä¸‹ å‡è¢«è§†ä¸ºfalse</div><div class="line"></div><div class="line">const getters = &#123;</div><div class="line">  checkoutStatus: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.checkoutStatus</div><div class="line">&#125;</div><div class="line"></div><div class="line">// actions åœ¨actionsä¸­æäº¤mutationï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«ä»»ä½•çš„å¼‚æ­¥æ“ä½œã€‚actionså¯ä»¥ç†è§£ä¸ºé€šè¿‡å°†mutationsé‡Œé¢å¤„é‡Œæ•°æ®çš„æ–¹æ³•å˜æˆå¯å¼‚æ­¥çš„å¤„ç†æ•°æ®çš„æ–¹æ³•ï¼Œç®€å•çš„è¯´å°±æ˜¯å¼‚æ­¥æ“ä½œæ•°æ®ï¼ˆä½†æ˜¯è¿˜æ˜¯é€šè¿‡mutationæ¥æ“ä½œï¼Œå› ä¸ºåªæœ‰å®ƒèƒ½æ“ä½œ</div><div class="line"></div><div class="line">const actions = &#123;</div><div class="line">  checkout (&#123; commit, <span class="keyword">state</span> &#125;, products) &#123;</div><div class="line">    //è§£æ„ <span class="keyword">state</span>.addedå¯¹è±¡é‡Œé¢çš„å€¼ï¼Œå¹¶å°†è‡³å­˜æ”¾åˆ°savedCartItemså¯¹è±¡ä¸­</div><div class="line">    </div><div class="line">    const savedCartItems = [...<span class="keyword">state</span>.added]</div><div class="line"></div><div class="line">    commit(types.CHECKOUT_REQUEST)</div><div class="line">    shop.buyProducts(</div><div class="line">      products,</div><div class="line">      () =&gt; commit(types.CHECKOUT_SUCCESS),</div><div class="line">      () =&gt; commit(types.CHECKOUT_FAILURE, &#123; savedCartItems &#125;)</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// mutations åœ¨Vuexä¸­storeæ•°æ®æ”¹å˜çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯mutation</div><div class="line"><span class="variable">&lt;!-- </span></div><div class="line"><span class="variable">mutations,é‡Œé¢è£…ç€ä¸€äº›æ”¹å˜æ•°æ®æ–¹æ³•çš„é›†åˆï¼Œè¿™æ˜¯Veuxè®¾è®¡å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯æŠŠå¤„ç†æ•°æ®é€»è¾‘æ–¹æ³•å…¨éƒ¨æ”¾åœ¨mutationsé‡Œé¢ï¼Œä½¿å¾—æ•°æ®å’Œè§†å›¾åˆ†ç¦»ã€‚ --&gt;</span></div><div class="line"></div><div class="line">const mutations = &#123;</div><div class="line">  [types.ADD_TO_CART] (<span class="keyword">state</span>, &#123; id &#125;) &#123;</div><div class="line">    <span class="keyword">state</span>.lastCheckout = null</div><div class="line">    const record = <span class="keyword">state</span>.added.find(p =&gt; p.id === id)</div><div class="line">    if (!record) &#123;</div><div class="line">      <span class="keyword">state</span>.added.push(&#123;</div><div class="line">        id,</div><div class="line">        quantity: <span class="number">1</span></div><div class="line">      &#125;)</div><div class="line">    &#125; else &#123;</div><div class="line">      record.quantity++</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  [types.CHECKOUT_REQUEST] (<span class="keyword">state</span>) &#123;</div><div class="line">    // clear cart</div><div class="line">    <span class="keyword">state</span>.added = []</div><div class="line">    <span class="keyword">state</span>.checkoutStatus = null</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  [types.CHECKOUT_SUCCESS] (<span class="keyword">state</span>) &#123;</div><div class="line">    <span class="keyword">state</span>.checkoutStatus = 'successful'</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  [types.CHECKOUT_FAILURE] (<span class="keyword">state</span>, &#123; savedCartItems &#125;) &#123;</div><div class="line">    // rollback <span class="keyword">to</span> the cart saved before sending the request</div><div class="line">    <span class="keyword">state</span>.added = savedCartItems</div><div class="line">    <span class="keyword">state</span>.checkoutStatus = 'failed'</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export <span class="keyword">default</span> &#123;</div><div class="line">  <span class="keyword">state</span>,</div><div class="line">  getters,</div><div class="line">  actions,</div><div class="line">  mutations</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>åœ¨æ¥çœ‹çœ‹ product<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">import shop <span class="keyword">from</span> '../../api/shop'</div><div class="line">import * as types <span class="keyword">from</span> '../mutation-types'</div><div class="line"></div><div class="line">// initial <span class="keyword">state</span></div><div class="line">const <span class="keyword">state</span> = &#123;</div><div class="line">  <span class="literal">all</span>: []</div><div class="line">&#125;</div><div class="line"></div><div class="line">// getters JSä¸­æ•°ç»„(ä¸ç®¡æ˜¯ä¸æ˜¯ç©ºçš„)å±äºå¯¹è±¡ç±»å‹ï¼Œå¯¹è±¡ç±»å‹è½¬ä¸ºbooleanç±»å‹(å†…éƒ¨å¯¹åº”ToBoolean()æ“ä½œ)æ—¶éƒ½æ˜¯trueã€‚</div><div class="line"></div><div class="line">const getters = &#123;</div><div class="line">  <span class="literal">all</span>Products: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.<span class="literal">all</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">// actions</div><div class="line">const actions = &#123;</div><div class="line">  getAllProducts (&#123; commit &#125;) &#123;</div><div class="line">    shop.getProducts(products =&gt; &#123;</div><div class="line">      commit(types.RECEIVE_PRODUCTS, &#123; products &#125;)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// mutations</div><div class="line">const mutations = &#123;</div><div class="line">  [types.RECEIVE_PRODUCTS] (<span class="keyword">state</span>, &#123; products &#125;) &#123;</div><div class="line">    <span class="keyword">state</span>.<span class="literal">all</span> = products</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  [types.ADD_TO_CART] (<span class="keyword">state</span>, &#123; id &#125;) &#123;</div><div class="line">    <span class="keyword">state</span>.<span class="literal">all</span>.find(p =&gt; p.id === id).inventory--</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export <span class="keyword">default</span> &#123;</div><div class="line">  <span class="keyword">state</span>,</div><div class="line">  getters,</div><div class="line">  actions,</div><div class="line">  mutations</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>çœ‹å®Œäº† module,å†æ¥çœ‹çœ‹ action<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//è¿™ä¸ªæ˜¯æ€»å¾—action æ¯ä¸ªmodule éƒ½å¯ä»¥æœ‰è‡ªå·±çš„action</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> types <span class="keyword">from</span> <span class="string">'./mutation-types'</span></div><div class="line"><span class="comment">//å¾ˆç®€å• åˆ¤æ–­å­˜è´§æ˜¯å¦å¤§äº0 ç„¶åæäº¤ç»™mutationå…·ä½“id</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> addToCart = <span class="function">(<span class="params">&#123; commit &#125;, product</span>) =&gt;</span> &#123;</div><div class="line">  <span class="keyword">if</span> (product.inventory &gt; <span class="number">0</span>) &#123;</div><div class="line">    commit(types.ADD_TO_CART, &#123;</div><div class="line">      id: product.id</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>ç»§ç»­ å†æ¥çœ‹çœ‹æ€»å¾—getter<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//æŸ¥è¯¢ è¿”å›å¯¹è±¡</div><div class="line">export const cartProducts = <span class="keyword">state</span> =&gt; &#123;</div><div class="line">  return <span class="keyword">state</span>.cart.added.map((&#123; id, quantity &#125;) =&gt; &#123;</div><div class="line">    const product = <span class="keyword">state</span>.products.<span class="literal">all</span>.find(p =&gt; p.id === id)</div><div class="line">    return &#123;</div><div class="line">      title: product.title,</div><div class="line">      price: product.price,</div><div class="line">      quantity</div><div class="line">    &#125;</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>å†æ¥çœ‹å®šä¹‰æ‰€æœ‰mutationç±»å‹æ–‡ä»¶mutation-types.js<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> ADD_TO_CART = <span class="string">'ADD_TO_CART'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHECKOUT_REQUEST = <span class="string">'CHECKOUT_REQUEST'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHECKOUT_SUCCESS = <span class="string">'CHECKOUT_SUCCESS'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> CHECKOUT_FAILURE = <span class="string">'CHECKOUT_FAILURE'</span></div><div class="line"><span class="keyword">export</span> <span class="keyword">const</span> RECEIVE_PRODUCTS = <span class="string">'RECEIVE_PRODUCTS'</span></div></pre></td></tr></table></figure></p><p>æœ€åindex.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> actions <span class="keyword">from</span> <span class="string">'./actions'</span></div><div class="line"><span class="keyword">import</span> * <span class="keyword">as</span> getters <span class="keyword">from</span> <span class="string">'./getters'</span></div><div class="line"><span class="keyword">import</span> cart <span class="keyword">from</span> <span class="string">'./modules/cart'</span></div><div class="line"><span class="keyword">import</span> products <span class="keyword">from</span> <span class="string">'./modules/products'</span></div><div class="line"><span class="keyword">import</span> createLogger <span class="keyword">from</span> <span class="string">'../../../src/plugins/logger'</span></div><div class="line"></div><div class="line">Vue.use(Vuex)</div><div class="line"></div><div class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">'production'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  actions,</div><div class="line">  getters,</div><div class="line">  modules: &#123;</div><div class="line">    cart,</div><div class="line">    products</div><div class="line">  &#125;,</div><div class="line">  strict: debug,</div><div class="line">  plugins: debug ? [createLogger()] : []</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p><p>è‡³æ­¤ æ‰€æœ‰vuexä»‹ç»å®Œæ¯•ï¼Œç„¶åè®©æˆ‘ä»¬çœ‹è¿™äº›vuexæ€ä¹ˆåº”ç”¨çš„componentä¸­</p><p>å…ˆæ¥åˆ°cartç»„ä»¶</p><figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cart"</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Your Cart<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"!products.length"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>Please add some products to cart.<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></div><div class="line"><span class="xml">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"p in products"</span>&gt;</span></span></div><div class="line"><span class="xml">        </span><span class="template-variable">&#123;&#123; p.title &#125;&#125;</span><span class="xml"> - </span><span class="template-variable">&#123;&#123; p.price | currency &#125;&#125;</span><span class="xml"> x </span><span class="template-variable">&#123;&#123; p.quantity &#125;&#125;</span><span class="xml"></span></div><div class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Total: </span><span class="template-variable">&#123;&#123; total | currency &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">:disabled</span>=<span class="string">"!products.length"</span> @<span class="attr">click</span>=<span class="string">"checkout(products)"</span>&gt;</span>Checkout<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">"checkoutStatus"</span>&gt;</span>Checkout </span><span class="template-variable">&#123;&#123; checkoutStatus &#125;&#125;</span><span class="xml">.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></div><div class="line"><span class="xml">//é€šè¿‡mapgettersæ–¹æ³•è§£æ„æ•°æ®</span></div><div class="line"><span class="xml">import &#123; mapGetters &#125; from 'vuex'</span></div><div class="line"><span class="xml">export default &#123;</span></div><div class="line"><span class="xml">  computed: &#123;</span></div><div class="line"><span class="xml">    ...mapGetters(&#123;</span></div><div class="line"><span class="xml">      products: 'cartProducts',</span></div><div class="line"><span class="xml">      checkoutStatus: 'checkoutStatus'</span></div><div class="line"><span class="xml">    &#125;),</span></div><div class="line"><span class="xml">    total () &#123;</span></div><div class="line"><span class="xml">      return this.products.reduce((total, p) =&gt; &#123;</span></div><div class="line"><span class="xml">        return total + p.price * p.quantity</span></div><div class="line"><span class="xml">      &#125;, 0)</span></div><div class="line"><span class="xml">    &#125;</span></div><div class="line"><span class="xml">  &#125;,</span></div><div class="line"><span class="xml">  </span></div><div class="line"><span class="xml">  methods: &#123;</span></div><div class="line"><span class="xml">    //åˆ†å‘action</span></div><div class="line"><span class="xml">    checkout (products) &#123;</span></div><div class="line"><span class="xml">      this.$store.dispatch('checkout', products)</span></div><div class="line"><span class="xml">    &#125;</span></div><div class="line"><span class="xml">  &#125;</span></div><div class="line"><span class="xml">&#125;</span></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure><p>åœ¨æ¥çœ‹çœ‹<br><figure class="highlight django"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"p in products"</span>&gt;</span></span></div><div class="line"><span class="xml">      </span><span class="template-variable">&#123;&#123; p.title &#125;&#125;</span><span class="xml"> - </span><span class="template-variable">&#123;&#123; p.price | currency &#125;&#125;</span><span class="xml"></span></div><div class="line"><span class="xml">      <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></div><div class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span></span></span></div><div class="line"><span class="xml">        :disabled="!p.inventory"</span></div><div class="line"><span class="xml">        @click="addToCart(p)"&gt;</span></div><div class="line"><span class="xml">        Add to cart</span></div><div class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></div><div class="line"><span class="xml">import &#123; mapGetters, mapActions &#125; from 'vuex'</span></div><div class="line"><span class="xml">export default &#123;</span></div><div class="line"><span class="xml">  computed: mapGetters(&#123;</span></div><div class="line"><span class="xml">    products: 'allProducts'</span></div><div class="line"><span class="xml">  &#125;),</span></div><div class="line"><span class="xml">  methods: mapActions([</span></div><div class="line"><span class="xml">    'addToCart'</span></div><div class="line"><span class="xml">  ]),</span></div><div class="line"><span class="xml">  created () &#123;</span></div><div class="line"><span class="xml">    this.$store.dispatch('getAllProducts')</span></div><div class="line"><span class="xml">  &#125;</span></div><div class="line"><span class="xml">&#125;</span></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p><p>æœ€åå°†è¿™ä¸¤ä¸ªcomponent å¼•å…¥åˆ°app.vue<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Shopping Cart Example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Products<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">product-list</span>&gt;</span><span class="tag">&lt;/<span class="name">product-list</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span></div><div class="line"><span class="xml">    <span class="tag">&lt;<span class="name">cart</span>&gt;</span><span class="tag">&lt;/<span class="name">cart</span>&gt;</span></span></div><div class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></div><div class="line"><span class="xml"></span></div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span></div><div class="line"><span class="xml">import ProductList from './ProductList.vue'</span></div><div class="line"><span class="xml">import Cart from './Cart.vue'</span></div><div class="line"><span class="xml">export default </span><span class="template-variable">&#123;</span></div><div class="line"><span class="template-variable">  components: &#123; ProductList, Cart &#125;</span><span class="xml"></span></div><div class="line"><span class="xml">&#125;</span></div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure></p><p>åŸºæœ¬ä¸Šè¿™ä¸ªdemoå°±ä»‹ç»å®Œæ¯•</p><p>ä¸‹æ¥æˆ‘é€šè¿‡vue-cliåˆå§‹åŒ–ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå°†ä¸Šé¢æ‰€æœ‰çš„ä»£ç è¿›è¡Œç»ƒä¹  è°¢è°¢å¤§å®¶æ¬£èµã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart&quot;&gt;&lt;a href=&quot;#å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-cart&quot; class=&quot;headerlink&quot; title=&quot;å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹ç»ƒä¹ å®è·µvuex-shopping-
      
    
    </summary>
    
    
      <category term="vuex" scheme="http://yoursite.com/tags/vuex/"/>
    
  </entry>
  
  <entry>
    <title>å°QAå­¦ä¹ å‰ç«¯ç³»åˆ—ä¹‹vuex</title>
    <link href="http://yoursite.com/2017/10/12/vuex/"/>
    <id>http://yoursite.com/2017/10/12/vuex/</id>
    <published>2017-10-12T13:51:51.000Z</published>
    <updated>2017-10-15T14:31:59.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex"><a href="#ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex" class="headerlink" title="ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex"></a>ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex</h1><h2 id="ä»€ä¹ˆvuex"><a href="#ä»€ä¹ˆvuex" class="headerlink" title="ä»€ä¹ˆvuex"></a>ä»€ä¹ˆvuex</h2><p>å…¶å®ä¹‹å‰ä¹Ÿå­¦ä¹ è¿‡reduxï¼Œè™½ç„¶reduxå·²ç»æŠŠæˆ‘çœ‹å¾—äº‘é‡Œé›¾é‡Œçš„ï¼Œé‡Œé¢çš„educer åº”è¯¥å¦‚ä½•æ‹†åˆ†ã€action åº”è¯¥æ€ä¹ˆå®šä¹‰ã€dispatch å¼‚æ­¥æ€ä¹ˆåšã€Ajax æ€ä¹ˆä½¿ç”¨ã€middleware ä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨ã€enhancer å¹²ä»€ä¹ˆçš„ã€é«˜é˜¶å‡½æ•°æ€ä¹ˆè¿™ä¹ˆå¤š ç­‰ç­‰ä¸€ç³»åˆ—é—®é¢˜ï¼Œå°±ç®—æ˜¯çœ‹æ‡‚äº†ï¼Œæ”¾ä¸ŠåŠå¹´åˆå…¨è¿˜ç»™åº¦å¨˜äº†ï¼Œç›¸åvuexå´è®©æˆ‘è®°å¿†çŠ¹æ–°ï¼Œvuexçš„api æˆ‘èŠ±åŠå¤©æ—¶é—´ï¼Œå°±å·²ç»ç†è§£çš„å¾ˆé€å½»äº†ï¼Œè·Ÿç€getting startedï¼Œå·²ç»å¯ä»¥æŠŠdemoä¸­todo-listæå®šäº†ã€‚è¯´äº†è¿™ä¹ˆå¤šï¼Œé‚£ä¹ˆvuexåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œvuexå’Œreduxä¸€æ ·éƒ½æ˜¯ç”¨æ¥ç®¡ç†çŠ¶æ€çš„ï¼Œåªä¸è¿‡vuexåªèƒ½ç”¨åœ¨vueé¡¹ç›®ä¸­ï¼Œreduxåˆ™æ²¡æœ‰é™åˆ¶ï¼Œå¦‚æœä½ æƒ³åœ¨reacté¡¹ç›®ä½¿ç”¨ç±»ä¼¼vuexçš„æ¡†æ¶ï¼Œæœ€è¿‘æœ‰ä¸€ä¸ªMobXçš„æ¡†æ¶å¯ä»¥å€¼å¾—ä¸€è¯•ï¼Œè™½ç„¶æˆ‘ä¹Ÿæ²¡çœ‹ï¼Œä½†æ˜¯å¤§ç¥æ¨èäº†ï¼Œåº”è¯¥æ²¡é”™ã€‚</p><p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p><p>ä»¥ä¸Šæ˜¯å®˜æ–¹çš„è§£é‡Šï¼Œå¾ˆæ¸…æ™°æ˜äº†ï¼Œæƒ³æ›´è¿›ä¸€æ­¥çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“vuexæ˜¯åŸºäºfluxæ¶æ„ï¼ŒåŒæ—¶ä¹Ÿå¸æ”¶reduxçš„ä¸€äº›ä¼˜ç‚¹ï¼Œè€Œreduxåˆæ˜¯åŸºäºfluxçš„æ”¹è¿›:</p><pre><code>æŠŠstoreå’ŒDispatcheråˆå¹¶,ç»“æ„æ›´åŠ ç®€å•æ¸…æ™°æ–°å¢stateè§’è‰²ï¼Œä»£è¡¨æ¯ä¸ªæ—¶é—´ç‚¹storeå¯¹åº”çš„å€¼ï¼Œå¯¹çŠ¶æ€çš„ç®¡ç†æ›´åŠ æ˜ç¡®</code></pre><p>Reduxæ•°æ®æµçš„é¡ºåºæ˜¯:</p><pre><code>Viewè°ƒç”¨store.dispatchå‘èµ·Action-&gt;storeæ¥å—Action(actionä¼ å…¥reducerå‡½æ•°,reducerå‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„state)-&gt;é€šçŸ¥store.subscribeè®¢é˜…çš„é‡æ–°æ¸²æŸ“å‡½æ•°</code></pre><p>Fluxæ•°æ®æµçš„é¡ºåºæ˜¯:</p><pre><code>Viewå‘èµ·Action-&gt;Actionä¼ é€’åˆ°Dispatcher-&gt;Dispatcherå°†é€šçŸ¥Store-&gt;Storeçš„çŠ¶æ€æ”¹å˜é€šçŸ¥Viewè¿›è¡Œæ”¹å˜è€ŒVuexæ˜¯ä¸“é—¨ä¸ºVueè®¾è®¡çš„çŠ¶æ€ç®¡ç†æ¡†æ¶,åŒæ ·åŸºäºFluxæ¶æ„ï¼Œå¹¶å¸æ”¶äº†Reduxçš„ä¼˜ç‚¹</code></pre><p>Vuexç›¸å¯¹äºReduxçš„ä¸åŒç‚¹æœ‰:</p><pre><code>æ”¹è¿›äº†Reduxä¸­çš„Actionå’ŒReducerå‡½æ•°ï¼Œä»¥mutationså˜åŒ–å‡½æ•°å–ä»£Reducerï¼Œæ— éœ€switch,åªéœ€åœ¨å¯¹åº”çš„mutationå‡½æ•°é‡Œæ”¹å˜stateå€¼å³å¯ç”±äºVueè‡ªåŠ¨é‡æ–°æ¸²æŸ“çš„ç‰¹æ€§ï¼Œæ— éœ€è®¢é˜…é‡æ–°æ¸²æŸ“å‡½æ•°ï¼Œåªè¦ç”Ÿæˆæ–°çš„Stateå³å¯</code></pre><p>Vuexæ•°æ®æµçš„é¡ºåºæ˜¯:</p><pre><code>Viewè°ƒç”¨store.commitæäº¤å¯¹åº”çš„è¯·æ±‚åˆ°Storeä¸­å¯¹åº”çš„mutationå‡½æ•°-&gt;storeæ”¹å˜(vueæ£€æµ‹åˆ°æ•°æ®å˜åŒ–è‡ªåŠ¨æ¸²æŸ“)</code></pre><h2 id="vuexçš„æ ¸å¿ƒæ¦‚å¿µ"><a href="#vuexçš„æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="vuexçš„æ ¸å¿ƒæ¦‚å¿µ"></a>vuexçš„æ ¸å¿ƒæ¦‚å¿µ</h2><p>Vuex ä¸­ Store çš„æ¨¡æ¿åŒ–å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue from <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Vuex from <span class="string">'vuex'</span></div><div class="line">Vue.use(Vuex)</div><div class="line">const store = new Vuex.Store(&#123;</div><div class="line">  state: &#123;</div><div class="line">  &#125;,</div><div class="line">  actions: &#123;</div><div class="line">  &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">  &#125;,</div><div class="line">  getters: &#123;</div><div class="line">  &#125;,  </div><div class="line">  modules: &#123;</div><div class="line">    </div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line">export <span class="keyword">default</span> store</div></pre></td></tr></table></figure><ul><li>State</li><li>Getter</li><li>Mutation</li><li>Action</li><li>Module<h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3>Vuexå°±æ˜¯æä¾›ä¸€ä¸ªä»“åº“ï¼Œä»“åº“é‡Œé¢æ”¾äº†å¾ˆå¤šå¯¹è±¡ã€‚å…¶ä¸­stateå°±æ˜¯æ•°æ®æºå­˜æ”¾åœ°ï¼Œå¯¹åº”äºä¸ä¸€èˆ¬Vueå¯¹è±¡é‡Œé¢çš„dataï¼ˆåé¢è®²åˆ°çš„actionså’Œmutationså¯¹åº”äºmethodsï¼‰ã€‚<br>state: state å®šä¹‰äº†åº”ç”¨çŠ¶æ€çš„æ•°æ®ç»“æ„ï¼ŒåŒæ ·å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤çš„åˆå§‹çŠ¶æ€ã€‚</li></ul><p>å“åº”ä¹¦å­˜å‚¨ï¼šstateé‡Œé¢å­˜æ”¾çš„æ•°æ®æ˜¯å“åº”å¼çš„ï¼ŒVueç»„ä»¶ä»storeä¸­è¯»å–æ•°æ®ï¼Œè‹¥æ˜¯storeä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œä¾èµ–è¿™ä¸ªæ•°æ®çš„ç»„ä»¶ä¹Ÿä¼šå‘ç”Ÿæ›´æ–°ã€‚ï¼ˆè¿™é‡Œâ€œçŠ¶æ€â€=â€œæ•°æ®â€ï¼‰ï¼Œä¹Ÿå°±æ˜¯æ˜¯è¯´æ•°æ®å’Œè§†å›¾æ˜¯åŒæ­¥çš„ã€‚<br>ä¾‹å¦‚:</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">state</span>: &#123;</div><div class="line">  projects: [],</div><div class="line">  <span class="keyword">user</span>Profile: &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="åœ¨-Vue-ç»„ä»¶ä¸­è·å¾—-Vuex-çŠ¶æ€çš„å‡ ç§æ–¹æ³•"><a href="#åœ¨-Vue-ç»„ä»¶ä¸­è·å¾—-Vuex-çŠ¶æ€çš„å‡ ç§æ–¹æ³•" class="headerlink" title="åœ¨ Vue ç»„ä»¶ä¸­è·å¾— Vuex çŠ¶æ€çš„å‡ ç§æ–¹æ³•"></a>åœ¨ Vue ç»„ä»¶ä¸­è·å¾— Vuex çŠ¶æ€çš„å‡ ç§æ–¹æ³•</h4><p><code>é€šç”¨æ–¹æ³•:å…¨å±€çš„æ”¾vuexï¼Œå±€éƒ¨çš„æ”¾åœ¨componentçš„dataé‡Œ</code></p><p>Vuex é€šè¿‡ store é€‰é¡¹ï¼Œæä¾›äº†ä¸€ç§æœºåˆ¶å°†çŠ¶æ€ä»æ ¹ç»„ä»¶â€œæ³¨å…¥â€åˆ°æ¯ä¸€ä¸ªå­ç»„ä»¶ä¸­ï¼ˆéœ€è°ƒç”¨ Vue.use(Vuex)ï¼‰ï¼š<br><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">const app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  el: <span class="string">'#app'</span>,</div><div class="line">  <span class="regexp">//</span> æŠŠ store å¯¹è±¡æä¾›ç»™ â€œstoreâ€ é€‰é¡¹ï¼Œè¿™å¯ä»¥æŠŠ store çš„å®ä¾‹æ³¨å…¥æ‰€æœ‰çš„å­ç»„ä»¶</div><div class="line">  store,</div><div class="line">  components: &#123; Counter &#125;,</div><div class="line">  template: `<span class="javascript"></span></div><div class="line"><span class="javascript">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"app"</span>&gt;</span></div><div class="line"><span class="javascript">      &lt;counter&gt;<span class="xml"><span class="tag">&lt;/<span class="name">counter</span>&gt;</span></span></span></div><div class="line"><span class="javascript">    &lt;<span class="regexp">/div&gt;</span></span></div><div class="line"><span class="javascript">  </span>`</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p><p>é€šè¿‡åœ¨æ ¹å®ä¾‹ä¸­æ³¨å†Œ store é€‰é¡¹ï¼Œè¯¥ store å®ä¾‹ä¼šæ³¨å…¥åˆ°æ ¹ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶ä¸­ï¼Œä¸”å­ç»„ä»¶èƒ½é€šè¿‡ this.$store è®¿é—®åˆ°ã€‚è®©æˆ‘ä»¬æ›´æ–°ä¸‹ Counter çš„å®ç°ï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">const Counter = &#123;</div><div class="line">  template: `&lt;<span class="keyword">div</span>&gt;&#123;&#123; <span class="keyword">count</span> &#125;&#125;&lt;/<span class="keyword">div</span>&gt;`,</div><div class="line">  computed: &#123;</div><div class="line">    <span class="keyword">count</span> () &#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.<span class="keyword">count</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h4><p>mapStateçš„ä½œç”¨æ˜¯æŠŠå…¨å±€çš„ state å’Œ getters æ˜ å°„åˆ°å½“å‰ç»„ä»¶çš„ computed è®¡ç®—å±æ€§ä¸­ï¼Œthis.$store.stateã€‚</p><p>ä½¿ç”¨ç¤ºä¾‹</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"> import &#123;mapState&#125; <span class="keyword">from</span> 'vuex' </div><div class="line"> export <span class="keyword">default</span> &#123;</div><div class="line">  computer :</div><div class="line">  mapState(&#123;</div><div class="line">   count: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.count,</div><div class="line"></div><div class="line">    // æ–¹æ³•ä¸€ ä¼ å­—ç¬¦ä¸²å‚æ•° 'count' ç­‰åŒäº `<span class="keyword">state</span> =&gt; <span class="keyword">state</span>.count`</div><div class="line">    countAlias: 'count',</div><div class="line"></div><div class="line">    // æ–¹æ³•äºŒ ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ `this` è·å–å±€éƒ¨çŠ¶æ€ï¼Œå¿…é¡»ä½¿ç”¨å¸¸è§„å‡½æ•°</div><div class="line">    countPlusLocalState (<span class="keyword">state</span>) &#123;</div><div class="line">      return <span class="keyword">state</span>.count + this.localCount</div><div class="line">    &#125;,</div><div class="line">     // æ˜ å°„ this.count ä¸º store.<span class="keyword">state</span>.count</div><div class="line">  'count'</div><div class="line"></div><div class="line">  &#125;)</div><div class="line">&#125;</div><div class="line">å¯¹è±¡å±•å¼€è¿ç®—ç¬¦</div><div class="line">import Vue <span class="keyword">from</span> 'vue'</div><div class="line">import Vuex <span class="keyword">from</span> 'vuex'</div><div class="line">import mutations <span class="keyword">from</span> './mutations'</div><div class="line">import actions <span class="keyword">from</span> './action'</div><div class="line">import getters <span class="keyword">from</span> './getters'</div><div class="line"></div><div class="line">Vue.use(Vuex)</div><div class="line"></div><div class="line">const <span class="keyword">state</span> = &#123;</div><div class="line">    <span class="keyword">user</span>Info: &#123; phone: <span class="number">111</span> &#125;, //ç”¨æˆ·ä¿¡æ¯</div><div class="line">    orderList: [&#123; orderno: '<span class="number">1111</span>' &#125;], //è®¢å•åˆ—è¡¨</div><div class="line">    orderDetail: null, //è®¢å•äº§å“è¯¦æƒ…</div><div class="line">    login: false, //æ˜¯å¦ç™»å½•</div><div class="line">&#125;</div><div class="line"></div><div class="line">export <span class="keyword">default</span> new Vuex.Store(&#123;</div><div class="line">    <span class="keyword">state</span>,</div><div class="line">    getters,</div><div class="line">    actions,</div><div class="line">    mutations,</div><div class="line">&#125;)</div><div class="line"></div><div class="line">computed: &#123;</div><div class="line">            ...mapState([</div><div class="line">                'orderList',</div><div class="line">                'login'</div><div class="line">            ]),</div><div class="line">        &#125;,   </div><div class="line">        mounted()&#123;  </div><div class="line">            console.<span class="keyword">log</span>(typeof orderList); ==&gt;undefind</div><div class="line">            console.<span class="keyword">log</span>(typeof this.orderList)==&gt;object</div><div class="line">        &#125;</div></pre></td></tr></table></figure><h3 id="getter"><a href="#getter" class="headerlink" title="getter"></a>getter</h3><p>ä¸€å¥è¯ getterå°±æ˜¯ç”¨æ¥è¿›è¡Œæ•°æ®è¿‡æ»¤çš„ï¼Œç„¶åæŠŠè¿‡æ»¤åçš„æ•°æ®ï¼Œå…±äº«ç»™æ‰€æœ‰componentã€‚</p><p>æ‰€ä»¥gettersæ˜¯storeçš„è®¡ç®—å±æ€§</p><p>gettersè¿‡æ»¤æ¡ä»¶å¿…é¡»æ˜¯bolleanå€¼.æ ¹æ®boleançš„æ¡ä»¶è¿”å›å…·ä½“æ•°æ®å¯¹è±¡ã€‚</p><p>ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°ğŸŒ°</p><p>å®šä¹‰ï¼šæˆ‘ä»¬å¯ä»¥åœ¨storeä¸­å®šä¹‰gettersï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯state</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">const store = new Vuex.Store(&#123;</div><div class="line">  <span class="keyword">state</span>: &#123;</div><div class="line">    todos: [</div><div class="line">      &#123; id: <span class="number">1</span>, text: '...', done: true &#125;,</div><div class="line">      &#123; id: <span class="number">2</span>, text: '...', done: false &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  getters: &#123;</div><div class="line">    doneTodos: <span class="keyword">state</span> =&gt; &#123;</div><div class="line">      return <span class="keyword">state</span>.todos.filter(todo =&gt; todo.done)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>ä¼ å‚ï¼šå®šä¹‰çš„Gettersä¼šæš´éœ²ä¸ºstore.getterså¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ¥å—å…¶ä»–çš„gettersä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼›<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">getters: &#123;</div><div class="line">  <span class="comment">// ...</span></div><div class="line">  doneTodosCount: (state, getters) =&gt; &#123;</div><div class="line">    return getters<span class="selector-class">.doneTodos</span><span class="selector-class">.length</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">store<span class="selector-class">.getters</span><span class="selector-class">.doneTodosCount</span> <span class="comment">// -&gt; 1</span></div></pre></td></tr></table></figure></p><p>è°ƒç”¨<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  doneTodosCount () &#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.doneTodosCount</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>é€šè¿‡mapGettersè°ƒç”¨<br>mapGettersè¾…åŠ©å‡½æ•°ä»…ä»…æ˜¯å°†storeä¸­çš„gettersæ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§ä¸­ï¼Œç”¨æ³•å’ŒmapStateç±»ä¼¼</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line">computed: &#123;</div><div class="line">   <span class="comment">// ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getters æ··å…¥ computed å¯¹è±¡ä¸­</span></div><div class="line">    ...mapGetters([</div><div class="line">    <span class="string">'doneTodosCount'</span>,</div><div class="line">    <span class="string">'anotherGetter'</span>,])&#125;</div><div class="line"> <span class="comment">//ç»™getterå±æ€§æ¢åå­—</span></div><div class="line">  mapGetters(&#123;</div><div class="line"> <span class="comment">// æ˜ å°„ this.doneCount ä¸º store.getters.doneTodosCount</span></div><div class="line">  doneCount: <span class="string">'doneTodosCount'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><h2 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h2><p>åœ¨Vuexä¸­storeæ•°æ®æ”¹å˜çš„å”¯ä¸€æ–¹æ³•å°±æ˜¯mutation</p><p>mutations,é‡Œé¢è£…ç€ä¸€äº›æ”¹å˜æ•°æ®æ–¹æ³•çš„é›†åˆï¼Œè¿™æ˜¯Veuxè®¾è®¡å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯æŠŠå¤„ç†æ•°æ®é€»è¾‘æ–¹æ³•å…¨éƒ¨æ”¾åœ¨mutationsé‡Œé¢ï¼Œä½¿å¾—æ•°æ®å’Œè§†å›¾åˆ†ç¦»ã€‚</p><p>é‡è¦çš„åŸåˆ™å°±æ˜¯è¦è®°ä½ mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</p><p>å¦‚ä½•ä½¿ç”¨</p><ul><li>mutationç»“æ„</li></ul><p>æ¯ä¸€ä¸ªmutationéƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„äº‹ä»¶ç±»å‹(type)å’Œå›è°ƒå‡½æ•°(handler)ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º{type:handler()},è¿™å’Œè®¢é˜…å‘å¸ƒæœ‰ç‚¹ç±»ä¼¼ã€‚å…ˆæ³¨å†Œäº‹ä»¶ï¼Œå½“è§¦å‘å“åº”ç±»å‹çš„æ—¶å€™è°ƒç”¨handker()ï¼Œè°ƒç”¨typeçš„æ—¶å€™éœ€è¦ç”¨åˆ°store.commitæ–¹æ³•ã€‚</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">const store = new Vuex.Store(&#123;</div><div class="line">    <span class="keyword">state</span>: &#123;</div><div class="line">        count: <span class="number">1</span></div><div class="line">        &#125;,</div><div class="line">    mutations: &#123;</div><div class="line">    increment (<span class="keyword">state</span>) &#123;      //æ³¨å†Œäº‹ä»¶ï¼Œtype:incrementï¼Œhandlerç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<span class="keyword">state</span>ï¼›</div><div class="line">         // å˜æ›´çŠ¶æ€</div><div class="line">       <span class="keyword">state</span>.count++&#125;&#125;&#125;)</div><div class="line">       </div><div class="line">    store.commit('increment')   //è°ƒç”¨typeï¼Œè§¦å‘handlerï¼ˆ<span class="keyword">state</span>ï¼‰</div></pre></td></tr></table></figure><ul><li>è½½è·ï¼ˆpayload)</li></ul><p>ç®€å•çš„ç†è§£å°±æ˜¯å¾€handler(stage)ä¸­ä¼ å‚handler(stage,pryload)ï¼›ä¸€èˆ¬æ˜¯ä¸ªå¯¹è±¡ã€‚</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mutations: &#123;</div><div class="line">increment (<span class="keyword">state</span>, n) &#123;</div><div class="line">    <span class="keyword">state</span>.count += n&#125;&#125;</div><div class="line">store.commit('increment', <span class="number">10</span>)</div></pre></td></tr></table></figure><p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè½½è·åº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥åŒ…å«å¤šä¸ªå­—æ®µå¹¶ä¸”è®°å½•çš„ mutation ä¼šæ›´æ˜“è¯»ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// ...</div><div class="line">mutations: &#123;</div><div class="line">  increment (<span class="keyword">state</span>, payload) &#123;</div><div class="line">    <span class="keyword">state</span>.count += payload.amount</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">store.commit('increment', &#123;</div><div class="line">  amount: <span class="number">10</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><ul><li>å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼</li></ul><p>æäº¤ mutation çš„å¦ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨åŒ…å« type å±æ€§çš„å¯¹è±¡ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">store</span><span class="selector-class">.commit</span>(&#123;</div><div class="line">  <span class="attribute">type</span>: <span class="string">'increment'</span>,</div><div class="line">  amount: <span class="number">10</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>å½“ä½¿ç”¨å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼ï¼Œæ•´ä¸ªå¯¹è±¡éƒ½ä½œä¸ºè½½è·ä¼ ç»™ mutation å‡½æ•°ï¼Œå› æ­¤ handler ä¿æŒä¸å˜ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mutations: &#123;</div><div class="line">  increment (<span class="keyword">state</span>, payload) &#123;</div><div class="line">    <span class="keyword">state</span>.count += payload.amount</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><ul><li>Mutation éœ€éµå®ˆ Vue çš„å“åº”è§„åˆ™</li></ul><p>æœ€å¥½æå‰åœ¨ä½ çš„ store ä¸­åˆå§‹åŒ–å¥½æ‰€æœ‰æ‰€éœ€å±æ€§ã€‚</p><p>å½“éœ€è¦åœ¨å¯¹è±¡ä¸Šæ·»åŠ æ–°å±æ€§æ—¶ï¼Œä½ åº”è¯¥</p><p>ä½¿ç”¨ Vue.set(obj, â€˜newPropâ€™, 123), æˆ–è€…ä»¥æ–°å¯¹è±¡æ›¿æ¢è€å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œåˆ©ç”¨ stage-3 çš„å¯¹è±¡å±•å¼€è¿ç®—ç¬¦æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">state</span>.obj = &#123; ...<span class="keyword">state</span>.obj, newProp: <span class="number">123</span> &#125;</div></pre></td></tr></table></figure><ul><li>ä½¿ç”¨å¸¸é‡æ›¿ä»£ Mutation äº‹ä»¶ç±»å‹</li></ul><p>å°†å¸¸é‡æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åä½œå¼€å‘ã€‚</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// mutation-types.js</div><div class="line">export const SOME_MUTATION = 'SOME_MUTATION'</div><div class="line"></div><div class="line">// store.js</div><div class="line">import Vuex <span class="keyword">from</span> 'vuex'</div><div class="line">import &#123; SOME_MUTATION &#125; <span class="keyword">from</span> './mutation-types'</div><div class="line"></div><div class="line">const store = new Vuex.Store(&#123;</div><div class="line">  <span class="keyword">state</span>: &#123; ... &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    // æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ES2015 é£æ ¼çš„è®¡ç®—å±æ€§å‘½ååŠŸèƒ½æ¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºå‡½æ•°å</div><div class="line">    [SOME_MUTATION] (<span class="keyword">state</span>) &#123;</div><div class="line">      // mutate <span class="keyword">state</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><ul><li>åœ¨ç»„ä»¶ä¸­æäº¤ Mutation</li></ul><p>æäº¤å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ this.$store.commit(â€˜xxxâ€™) æäº¤ mutationï¼Œæˆ–è€…ä½¿ç”¨ mapMutations è¾…åŠ©å‡½æ•°å°†ç»„ä»¶ä¸­çš„ methods æ˜ å°„ä¸º store.commit è°ƒç”¨ï¼ˆéœ€è¦åœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥ storeï¼‰ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="regexp">//</span> ...</div><div class="line">  methods: &#123;</div><div class="line">    ...mapMutations([</div><div class="line">      <span class="string">'increment'</span>, <span class="regexp">//</span> å°† `<span class="javascript"><span class="keyword">this</span>.increment()</span>` æ˜ å°„ä¸º `<span class="javascript"><span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>)</span>`</div><div class="line"></div><div class="line">      <span class="regexp">//</span> `<span class="javascript">mapMutations</span>` ä¹Ÿæ”¯æŒè½½è·ï¼š</div><div class="line">      <span class="string">'incrementBy'</span> <span class="regexp">//</span> å°† `<span class="javascript"><span class="keyword">this</span>.incrementBy(amount)</span>` æ˜ å°„ä¸º `<span class="javascript"><span class="keyword">this</span>.$store.commit(<span class="string">'incrementBy'</span>, amount)</span>`</div><div class="line">    ]),</div><div class="line">    ...mapMutations(&#123;</div><div class="line">      add: <span class="string">'increment'</span> <span class="regexp">//</span> å°† `<span class="javascript"><span class="keyword">this</span>.add()</span>` æ˜ å°„ä¸º `<span class="javascript"><span class="keyword">this</span>.$store.commit(<span class="string">'increment'</span>)</span>`</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h2 id="action"><a href="#action" class="headerlink" title="action"></a>action</h2><p>å‰é¢æˆ‘ä»¬è®²äº†mutationä¸­æ˜¯å­˜æ”¾å¤„ç†æ•°æ®çš„æ–¹æ³•çš„é›†åˆï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™éœ€è¦commitã€‚ä½†æ˜¯commitæ˜¯åŒæ­¥å‡½æ•°ï¼Œè€Œä¸”åªèƒ½æ˜¯åŒæ­¥æ‰§è¡Œã€‚</p><p>æ‰€ä»¥actionå‡ºç°äº†ã€‚åœ¨actionsä¸­æäº¤mutationï¼Œå¹¶ä¸”å¯ä»¥åŒ…å«ä»»ä½•çš„å¼‚æ­¥æ“ä½œã€‚actionså¯ä»¥ç†è§£ä¸ºé€šè¿‡å°†mutationsé‡Œé¢å¤„é‡Œæ•°æ®çš„æ–¹æ³•å˜æˆå¯å¼‚æ­¥çš„å¤„ç†æ•°æ®çš„æ–¹æ³•ï¼Œç®€å•çš„è¯´å°±æ˜¯å¼‚æ­¥æ“ä½œæ•°æ®ï¼ˆä½†æ˜¯è¿˜æ˜¯é€šè¿‡mutationæ¥æ“ä½œï¼Œå› ä¸ºåªæœ‰å®ƒèƒ½æ“ä½œï¼‰</p><p>å®šä¹‰actions<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">const store = new Vuex.Store(&#123;//åˆ›å»ºstoreå®ä¾‹</div><div class="line">      <span class="keyword">state</span>: &#123;</div><div class="line">         count: <span class="number">0</span></div><div class="line">             &#125;,</div><div class="line">      mutations: &#123;                </div><div class="line">         increment (<span class="keyword">state</span>) &#123;</div><div class="line">          <span class="keyword">state</span>.count++</div><div class="line">         &#125;,</div><div class="line">         sub(<span class="keyword">state</span>)&#123;</div><div class="line">    <span class="keyword">state</span>.count--;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">          &#125;,</div><div class="line">      actions: &#123;         //åªæ˜¯æäº¤`commit`äº†`mutations`é‡Œé¢çš„æ–¹æ³•ã€‚</div><div class="line">         increment (context) &#123;</div><div class="line">          context.commit('increment')</div><div class="line">   &#125;,</div><div class="line">   subplus(&#123;commit&#125;)&#123;</div><div class="line">    commit('sub');</div><div class="line">  &#125;</div><div class="line"> &#125;</div><div class="line">    &#125;)</div><div class="line"> </div><div class="line"> Action å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥è°ƒç”¨ context.commit æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ context.<span class="keyword">state</span> å’Œ context.getters æ¥è·å– <span class="keyword">state</span> å’Œ gettersã€‚å½“æˆ‘ä»¬åœ¨ä¹‹åä»‹ç»åˆ° Modules æ—¶ï¼Œä½ å°±çŸ¥é“ context å¯¹è±¡ä¸ºä»€ä¹ˆä¸æ˜¯ store å®ä¾‹æœ¬èº«äº†ã€‚</div><div class="line"></div><div class="line">  ä¸€èˆ¬æˆ‘ä»¬ä¼šç®€å†™æˆè¿™æ ·</div><div class="line">  actions: &#123;</div><div class="line">   increment (&#123; commit &#125;) &#123;</div><div class="line">         commit('increment')</div><div class="line">      &#125;,</div><div class="line">subplus(&#123;commit&#125;)&#123;</div><div class="line">    commit('sub')</div><div class="line">  &#125;</div><div class="line">         &#125;</div></pre></td></tr></table></figure></p><h2 id="åˆ†å‘-Action"><a href="#åˆ†å‘-Action" class="headerlink" title="åˆ†å‘ Action"></a>åˆ†å‘ Action</h2><p>Action é€šè¿‡ store.dispatch æ–¹æ³•è§¦å‘ï¼š</p><p><code>store.dispatch(&#39;increment&#39;)</code></p><p>ä¹ä¸€çœ¼çœ‹ä¸Šå»æ„Ÿè§‰å¤šæ­¤ä¸€ä¸¾ï¼Œæˆ‘ä»¬ç›´æ¥åˆ†å‘ mutation å²‚ä¸æ›´æ–¹ä¾¿ï¼Ÿå®é™…ä¸Šå¹¶éå¦‚æ­¤ï¼Œè¿˜è®°å¾— mutation å¿…é¡»åŒæ­¥æ‰§è¡Œè¿™ä¸ªé™åˆ¶ä¹ˆï¼ŸAction å°±ä¸å—çº¦æŸï¼æˆ‘ä»¬å¯ä»¥åœ¨ action å†…éƒ¨æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">actions: &#123;</div><div class="line">  incrementAsync (&#123; commit &#125;) &#123;</div><div class="line">    setTimeout(() =&gt; &#123;</div><div class="line">      commit(<span class="string">'increment'</span>)</div><div class="line">    &#125;, <span class="number">1000</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Actions æ”¯æŒåŒæ ·çš„è½½è·æ–¹å¼å’Œå¯¹è±¡æ–¹å¼è¿›è¡Œåˆ†å‘ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä»¥è½½è·å½¢å¼åˆ†å‘</span></div><div class="line"><span class="selector-tag">store</span><span class="selector-class">.dispatch</span>(<span class="string">'incrementAsync'</span>, &#123;</div><div class="line">  <span class="attribute">amount</span>: <span class="number">10</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">store</span><span class="selector-class">.dispatch</span>(&#123;</div><div class="line">  <span class="attribute">type</span>: <span class="string">'incrementAsync'</span>,</div><div class="line">  amount: <span class="number">10</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure></p><ul><li>åœ¨ç»„ä»¶ä¸­åˆ†å‘ Action<br>ä½ åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ this.$store.dispatch(â€˜xxxâ€™) åˆ†å‘ actionï¼Œæˆ–è€…ä½¿ç”¨ mapActions è¾…åŠ©å‡½æ•°å°†ç»„ä»¶çš„ methods æ˜ å°„ä¸º store.dispatch è°ƒç”¨ï¼ˆéœ€è¦å…ˆåœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥ storeï¼‰ï¼š<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="regexp">//</span> ...</div><div class="line">  methods: &#123;</div><div class="line">    ...mapActions([</div><div class="line">      <span class="string">'increment'</span>, <span class="regexp">//</span> å°† `<span class="javascript"><span class="keyword">this</span>.increment()</span>` æ˜ å°„ä¸º `<span class="javascript"><span class="keyword">this</span>.$store.dispatch(<span class="string">'increment'</span>)</span>`</div><div class="line"></div><div class="line">      <span class="regexp">//</span> `<span class="javascript">mapActions</span>` ä¹Ÿæ”¯æŒè½½è·ï¼š</div><div class="line">      <span class="string">'incrementBy'</span> <span class="regexp">//</span> å°† `<span class="javascript"><span class="keyword">this</span>.incrementBy(amount)</span>` æ˜ å°„ä¸º `<span class="javascript"><span class="keyword">this</span>.$store.dispatch(<span class="string">'incrementBy'</span>, amount)</span>`</div><div class="line">    ]),</div><div class="line">    ...mapActions(&#123;</div><div class="line">      add: <span class="string">'increment'</span> <span class="regexp">//</span> å°† `<span class="javascript"><span class="keyword">this</span>.add()</span>` æ˜ å°„ä¸º `<span class="javascript"><span class="keyword">this</span>.$store.dispatch(<span class="string">'increment'</span>)</span>`</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>èƒŒæ™¯ï¼šåœ¨Vueä¸­Stateä½¿ç”¨æ˜¯å•ä¸€çŠ¶æ€æ ‘ç»“æ„ï¼Œåº”è¯¥çš„æ‰€æœ‰çš„çŠ¶æ€éƒ½æ”¾åœ¨stateé‡Œé¢ï¼Œå¦‚æœé¡¹ç›®æ¯”è¾ƒå¤æ‚ï¼Œé‚£stateæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¯¹è±¡ï¼Œstoreå¯¹è±¡ä¹Ÿå°†å¯¹å˜å¾—éå¸¸å¤§ï¼Œéš¾äºç®¡ç†ã€‚</p><p>moduleï¼šå¯ä»¥è®©æ¯ä¸€ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„stateã€mutationã€actionã€getters,ä½¿å¾—ç»“æ„éå¸¸æ¸…æ™°ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">const moduleA = &#123;</div><div class="line">  <span class="keyword">state</span>: &#123; ... &#125;,</div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  actions: &#123; ... &#125;,</div><div class="line">  getters: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const moduleB = &#123;</div><div class="line">  <span class="keyword">state</span>: &#123; ... &#125;,</div><div class="line">  mutations: &#123; ... &#125;,</div><div class="line">  actions: &#123; ... &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const store = new Vuex.Store(&#123;</div><div class="line">  modules: &#123;</div><div class="line">    a: moduleA,</div><div class="line">    b: moduleB</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">store.<span class="keyword">state</span>.a // -&gt; moduleA çš„çŠ¶æ€</div><div class="line">store.<span class="keyword">state</span>.b // -&gt; moduleB çš„çŠ¶æ€</div></pre></td></tr></table></figure></p><p>æ¨¡å—çš„å±€éƒ¨çŠ¶æ€</p><p>å¯¹äºæ¨¡å—å†…éƒ¨çš„ mutation å’Œ getterï¼Œæ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¨¡å—çš„å±€éƒ¨çŠ¶æ€å¯¹è±¡ã€‚</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">const moduleA = &#123;</div><div class="line">  <span class="keyword">state</span>: &#123; count: <span class="number">0</span> &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    increment (<span class="keyword">state</span>) &#123;</div><div class="line">      // è¿™é‡Œçš„ `<span class="keyword">state</span>` å¯¹è±¡æ˜¯æ¨¡å—çš„å±€éƒ¨çŠ¶æ€</div><div class="line">      <span class="keyword">state</span>.count++</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  getters: &#123;</div><div class="line">    doubleCount (<span class="keyword">state</span>) &#123;</div><div class="line">      return <span class="keyword">state</span>.count * <span class="number">2</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¯¹äºæ¨¡å—å†…éƒ¨çš„ actionï¼Œå±€éƒ¨çŠ¶æ€é€šè¿‡ context.state æš´éœ²å‡ºæ¥ï¼Œæ ¹èŠ‚ç‚¹çŠ¶æ€åˆ™ä¸º context.rootState<br><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">const moduleA = &#123;</div><div class="line">  // ...</div><div class="line">  actions: &#123;</div><div class="line">    incrementIfOddOnRootSum (&#123; <span class="keyword">state</span>, commit, rootState &#125;) &#123;</div><div class="line">      if ((<span class="keyword">state</span>.count + rootState.count) % <span class="number">2</span> === <span class="number">1</span>) &#123;</div><div class="line">        commit('increment')</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>å¯¹äºæ¨¡å—å†…éƒ¨çš„ getterï¼Œæ ¹èŠ‚ç‚¹çŠ¶æ€ä¼šä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°æš´éœ²å‡ºæ¥ï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">const moduleA = &#123;</div><div class="line">  // ...</div><div class="line">  getters: &#123;</div><div class="line">    sumWithRootCount (<span class="keyword">state</span>, getters, rootState) &#123;</div><div class="line">      return <span class="keyword">state</span>.count + rootState.count</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å‘½åç©ºé—´</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…éƒ¨çš„ actionã€mutation å’Œ getter æ˜¯æ³¨å†Œåœ¨å…¨å±€å‘½åç©ºé—´çš„â€”â€”è¿™æ ·ä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ mutation æˆ– action ä½œå‡ºå“åº”ã€‚</p><p>å¦‚æœå¸Œæœ›ä½ çš„æ¨¡å—å…·æœ‰æ›´é«˜çš„å°è£…åº¦å’Œå¤ç”¨æ€§ï¼Œä½ å¯ä»¥é€šè¿‡æ·»åŠ  namespaced: true çš„æ–¹å¼ä½¿å…¶æˆä¸ºå‘½åç©ºé—´æ¨¡å—ã€‚å½“æ¨¡å—è¢«æ³¨å†Œåï¼Œå®ƒçš„æ‰€æœ‰ getterã€action åŠ mutation éƒ½ä¼šè‡ªåŠ¨æ ¹æ®æ¨¡å—æ³¨å†Œçš„è·¯å¾„è°ƒæ•´å‘½åã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">const store = new Vuex.Store(&#123;</div><div class="line"><span class="symbol">  modules:</span> &#123;</div><div class="line"><span class="symbol">    account:</span> &#123;</div><div class="line"><span class="symbol">      namespaced:</span> true,</div><div class="line"></div><div class="line">      <span class="comment">// æ¨¡å—å†…å®¹ï¼ˆmodule assetsï¼‰</span></div><div class="line"><span class="symbol">      state:</span> &#123; ... &#125;, <span class="comment">// æ¨¡å—å†…çš„çŠ¶æ€å·²ç»æ˜¯åµŒå¥—çš„äº†ï¼Œä½¿ç”¨ `namespaced` å±æ€§ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“</span></div><div class="line"><span class="symbol">      getters:</span> &#123;</div><div class="line">        isAdmin () &#123; ... &#125; <span class="comment">// -&gt; getters['account/isAdmin']</span></div><div class="line">      &#125;,</div><div class="line"><span class="symbol">      actions:</span> &#123;</div><div class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; dispatch('account/login')</span></div><div class="line">      &#125;,</div><div class="line"><span class="symbol">      mutations:</span> &#123;</div><div class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; commit('account/login')</span></div><div class="line">      &#125;,</div><div class="line"></div><div class="line">      <span class="comment">// åµŒå¥—æ¨¡å—</span></div><div class="line"><span class="symbol">      modules:</span> &#123;</div><div class="line">        <span class="comment">// ç»§æ‰¿çˆ¶æ¨¡å—çš„å‘½åç©ºé—´</span></div><div class="line"><span class="symbol">        myPage:</span> &#123;</div><div class="line"><span class="symbol">          state:</span> &#123; ... &#125;,</div><div class="line"><span class="symbol">          getters:</span> &#123;</div><div class="line">            profile () &#123; ... &#125; <span class="comment">// -&gt; getters['account/profile']</span></div><div class="line">          &#125;</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// è¿›ä¸€æ­¥åµŒå¥—å‘½åç©ºé—´</span></div><div class="line"><span class="symbol">        posts:</span> &#123;</div><div class="line"><span class="symbol">          namespaced:</span> true,</div><div class="line"></div><div class="line"><span class="symbol">          state:</span> &#123; ... &#125;,</div><div class="line"><span class="symbol">          getters:</span> &#123;</div><div class="line">            popular () &#123; ... &#125; <span class="comment">// -&gt; getters['account/posts/popular']</span></div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure><p>å¸¦å‘½åç©ºé—´çš„ç»‘å®šå‡½æ•°</p><p>å½“ä½¿ç”¨ mapState, mapGetters, mapActions å’Œ mapMutations è¿™äº›å‡½æ•°æ¥ç»‘å®šå‘½åç©ºé—´æ¨¡å—æ—¶ï¼Œå†™èµ·æ¥å¯èƒ½æ¯”è¾ƒç¹çï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  ...mapState(&#123;</div><div class="line">    a: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.some.nested.module.a,</div><div class="line">    b: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.some.nested.module.b</div><div class="line">  &#125;)</div><div class="line">&#125;,</div><div class="line">methods: &#123;</div><div class="line">  ...mapActions([</div><div class="line">    'some/nested/module/foo',</div><div class="line">    'some/nested/module/bar'</div><div class="line">  ])</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¯¹äºè¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥å°†æ¨¡å—çš„ç©ºé—´åç§°å­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ä¸Šè¿°å‡½æ•°ï¼Œè¿™æ ·æ‰€æœ‰ç»‘å®šéƒ½ä¼šè‡ªåŠ¨å°†è¯¥æ¨¡å—ä½œä¸ºä¸Šä¸‹æ–‡ã€‚äºæ˜¯ä¸Šé¢çš„ä¾‹å­å¯ä»¥ç®€åŒ–ä¸ºï¼š</p><figure class="highlight pf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">computed: &#123;</div><div class="line">  ...mapState('some/nested/module', &#123;</div><div class="line">    a: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.a,</div><div class="line">    b: <span class="keyword">state</span> =&gt; <span class="keyword">state</span>.b</div><div class="line">  &#125;)</div><div class="line">&#125;,</div><div class="line">methods: &#123;</div><div class="line">  ...mapActions('some/nested/module', [</div><div class="line">    'foo',</div><div class="line">    'bar'</div><div class="line">  ])</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">```è€Œä¸”ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ createNamespacedHelpers åˆ›å»ºåŸºäºæŸä¸ªå‘½åç©ºé—´è¾…åŠ©å‡½æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œæœ‰æ–°çš„ç»‘å®šåœ¨ç»™å®šå‘½åç©ºé—´å€¼ä¸Šçš„ç»„ä»¶ç»‘å®šè¾…åŠ©å‡½æ•°ï¼š</div></pre></td></tr></table></figure><p>import { createNamespacedHelpers } from â€˜vuexâ€™</p><p>const { mapState, mapActions } = createNamespacedHelpers(â€˜some/nested/moduleâ€™)</p><p>export default {<br>  computed: {<br>    // åœ¨ <code>some/nested/module</code> ä¸­æŸ¥æ‰¾<br>    â€¦mapState({<br>      a: state =&gt; state.a,<br>      b: state =&gt; state.b<br>    })<br>  },<br>  methods: {<br>    // åœ¨ <code>some/nested/module</code> ä¸­æŸ¥æ‰¾<br>    â€¦mapActions([<br>      â€˜fooâ€™,<br>      â€˜barâ€™<br>    ])<br>  }<br>}</p><p>```</p><p>ä»¥ä¸Šä¾¿æ˜¯æˆ‘2å¤©æ¥å­¦ä¹ vuexçš„å¿ƒå¾—ï¼Œå¤§éƒ¨åˆ†å‚è€ƒçš„æ˜¯å®˜æ–¹çš„æ–‡æ¡£ï¼Œä¸å¾—ä¸è¯´vuexçš„æ–‡æ¡£æ¯”reduxæ–‡æ¡£å®¹æ˜“ç†è§£å¤šï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šæŠŠå®˜æ–¹çš„åˆ—å­è´­ç‰©è½¦ç©ä¸€ä¸‹ï¼Œç„¶åè‡ªå·±åœ¨å†™ä¸€ä¸ªtodo-list,vue2 è¿˜æ˜¯å¤§ç•¥çš„è¿‡äº†ä¸€éï¼Œè¿˜æ˜¯è¦å†™ä¸ªå°é¡¹ç›®ç†Ÿæ‚‰æ¡†æ¶ï¼Œä¸€ä¸ªQAåœ¨å‰ç«¯çš„è·¯é€”ä¸Šè¶Šèµ°è¶Šè¿œï¼Œå¸Œæœ›å­¦åˆ°å‰ç«¯çŸ¥è¯†èƒ½å¤Ÿå¸®æˆ‘åœ¨æµ‹è¯•å’Œè‡ªåŠ¨åŒ–çš„é“è·¯ä¸Šæœ‰æ‰€çªç ´ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex&quot;&gt;&lt;a href=&quot;#ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex&quot;&gt;&lt;/a&gt;ä¸€ä¸ªQAå¦‚ä½•å­¦ä¹ vuex&lt;/h1&gt;&lt;h2 id=&quot;ä»€ä¹ˆvuex&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆvuex&quot;
      
    
    </summary>
    
    
      <category term="å¤§å‰ç«¯" scheme="http://yoursite.com/tags/%E5%A4%A7%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>2017å¹´qaåº”æŒæ¡çš„æŠ€èƒ½</title>
    <link href="http://yoursite.com/2017/04/06/devopsforqa/"/>
    <id>http://yoursite.com/2017/04/06/devopsforqa/</id>
    <published>2017-04-06T03:24:00.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="DevOps-amp-æ•æ·æ–¹æ³•"><a href="#DevOps-amp-æ•æ·æ–¹æ³•" class="headerlink" title="DevOps &amp; æ•æ·æ–¹æ³•"></a>DevOps &amp; æ•æ·æ–¹æ³•</h2><p>éšç€å¯¹äºåœ¨äº¤ä»˜æœŸé™å†…å®Œæˆé¡¹ç›®çš„è¿«åˆ‡éœ€æ±‚ï¼Œæµ‹è¯•äººå‘˜éœ€è¦å­¦ä¹ æ•æ·æ–¹æ³•å’ŒDevOpsï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥å¸®åŠ©ä¿ƒè¿›å›¢é˜Ÿä¹‹é—´çš„åä½œå’Œæ”¹è¿›è¿­ä»£é—´å·¥ä½œæ¨¡å¼ã€‚æ•æ·æ–¹æ³•ä¸ºæµ‹è¯•é¡¹ç›®æä¾›äº†é¡¹ç›®å¼€å‘æ‰€éœ€è¦é€Ÿåº¦ä¸æ•ˆç‡ï¼Œè€ŒDevOpså¯ä»¥ä»å¼€å‘ï¼Œåˆ†æå’Œè´¨é‡ä¿è¯æµç¨‹ä¸­ååŠ©è·¨èŒèƒ½çš„å›¢é˜Ÿåˆä½œï¼Œä»è€Œåœ¨æ›´çŸ­çš„æ—¶é—´å†…äº§ç”Ÿå‡ºé«˜è´¨é‡çš„äº§å“ã€‚æ­¤å¤–ï¼Œå­¦ä¹ è¿™äº›æ–¹æ³•æœ€ç»ˆæ¶ˆé™¤äº†è§’è‰²é—´åƒµåŒ–å’Œå­¤å²›ï¼Œè®©å›¢é˜Ÿå¯†åˆ‡å…³æ³¨å¼€å‘æµç¨‹å’ŒæŒç»­å‘å¸ƒã€‚<br><img src="/image/timg.jpeg" alt="devops"><br>å‘ä¸Šé¢devopså·¥ä½œæµä¸€æ ·ï¼Œdevops æ‰“é€šé¡¹ç›®æµç¨‹æ¯ä¸€ä¸ªç¯èŠ‚ï¼Œä»ä»£ç çš„ç®¡ç†ï¼Œåˆ°buildã€test åˆ°æœ€å¥½éƒ¨ç½²åˆ°prodç¯å¢ƒï¼Œå¯¹äºqaæ¥è¯´ï¼Œäº†è§£å…¶ä¸­çš„æµç¨‹ï¼Œå¯¹äºqaå·¥ä½œæœ‰éå¸¸çš„å¥½å¤„ï¼Œé€šè¿‡devopsä¸€äº›ç›‘æ§å·¥å…·ä¾‹å¦‚airbrakeæˆ‘ä»¬å¯ä»¥å®æ–½æŸ¥çœ‹ç³»ç»Ÿå‘ç”Ÿçš„é—®é¢˜ï¼Œä¸devä¸€èµ·åˆ†æé—®é¢˜å‘ç”Ÿçš„åŸå› ï¼Œé€šè¿‡GA newrelicè¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æç³»ç»Ÿç”¨æˆ·è¡Œä¸ºï¼Œç»™ç³»ç»Ÿæ€§èƒ½æµ‹è¯•ä¸åˆ†ææä¾›æ•°æ®ä¸Šçš„æ”¯æŒã€‚é€šè¿‡å¯¹äºäº†è§£devopså·¥ä½œæµï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æé¡¹ç›®ä¸­å­˜åœ¨é£é™©ï¼ŒåŠæ—¶æ”¹è¿›æµç¨‹ï¼Œé€šè¿‡dockerç­‰å®¹å™¨åŒ–çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥å°†æµ‹è¯•æ”¾åˆ°å®¹å™¨ä¸­æ‰§è¡Œï¼Œé™ä½æµ‹è¯•å¯¹äºç¯å¢ƒçš„ä¾èµ–ï¼Œè¿›ä¸€æ­¥æ”¹è¿›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ‰€ä»¥è¯´äº†è§£devopsçŸ¥è¯†å¯¹äºqaæ¥è¯´ç™¾åˆ©æ— ä¸€å®³ï¼Œä½•ä¹è€Œä¸ä¸ºå‘¢ã€‚</p><p>è‡ªåŠ¨åŒ–<br>é¢å¯¹åº”ç”¨ç¨‹åºæ—¥ç›Šå¢åŠ å¤æ‚æ€§å’Œç³»ç»Ÿé›†æˆï¼Œä¾é æ‰‹åŠ¨æµ‹è¯•å·²ç»æ— æ³•å®Œæˆå…¨éƒ¨æµ‹è¯•å·¥ä½œã€‚ä¸ºäº†æµ‹è¯•æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæ€§èƒ½ï¼Œæ— å¤´ä»¥åŠæ•°æ®åº“å’Œé›†æˆå±‚é¢ï¼Œæµ‹è¯•äººå‘˜åº”è¯¥å­¦ä¹ è‡ªåŠ¨åŒ–ç›¸å…³çš„æŠ€èƒ½ï¼Œå› ä¸ºå®ƒå¯ä»¥æä¾›ä¸šåŠ¡é€»è¾‘å’ŒæŠ€æœ¯å±‚é¢æ›´é«˜æ›´å‡†ç¡®æ›´å¯é æ”¯æŒã€‚æ­¤å¤–ï¼Œè¿˜æœ‰å‡ ç§è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ä¸“é—¨æ”¯æŒç‰¹å®šé¢†åŸŸçš„æµ‹è¯•ç±»å‹ï¼Œå¹¶å…·æœ‰å¿«é€Ÿé«˜æ•ˆåœ°å®Œæˆä»»åŠ¡çš„åŠŸèƒ½ã€‚<br><img src="/image/selenium.jpg" alt="selenium"><br>å¦‚ä¸Šå›¾ï¼Œå¾ˆå¤šQAæˆ–è€…testeræœ‰ä¸€ä¸ªè¯¯åŒºï¼Œæåˆ°è‡ªåŠ¨åŒ–å¼ å˜´é—­å˜´éƒ½æ˜¯seleniumï¼Œç”šè‡³æœ‰çš„äººè¿webdriverä¸seleniumåŒºåˆ«éƒ½ä¸çŸ¥é“ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘è¦æ¾„æ¸…ï¼Œuiè‡ªåŠ¨åŒ–æµ‹è¯•åªæ˜¯è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œè¿˜åŒ…æ‹¬apiï¼Œæ¥å£ï¼Œå•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œç”šè‡³æ€§èƒ½æµ‹è¯•æˆ‘ä»¬éƒ½åº”è¯¥ç§°ä¸ºè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p><p>ç½‘ç»œä¸ç§»åŠ¨æŠ€æœ¯<br><img src="/image/webandmobile.jpeg" alt="webandmobile"></p><p>æ¯ä¸ªæµ‹è¯•äººå‘˜è¿˜å¿…é¡»ç†Ÿæ‚‰webå’Œmobileç›¸å…³æŠ€æœ¯ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿæ›´å¥½äº†è§£åº”ç”¨ç¨‹åºçš„ç±»å‹ä¸æ¶æ„ï¼Œå¦‚ä½•æ„å»ºï¼Œä»¥åŠç›¸åº”çš„å¯æ‰©å±•æ€§ï¼Œå¹¶ä¸ºä»¥åæµ‹è¯•æä¾›ç›¸åº”èƒŒæ™¯çŸ¥è¯†ã€‚è¿™å¯¹äºæµ‹è¯•äººå‘˜éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒèƒ½å¤ŸæŒ‡å¯¼QAç†è§£é¡¹ç›®æ¶æ„ä¸æ‰€é¢ä¸´æŠ€æœ¯æŒ‘æˆ˜ï¼Œæä¾›æ›´æœ‰æ•ˆçš„QAè§£å†³æ–¹æ¡ˆã€‚<br>è¿™é‡Œå­¦é—®æ›´å¤šï¼Œå®Œå…¨æ˜¯ä¸¤å¤§æ–¹å‘ï¼ŒçŸ¥è¯†é¢†åŸŸéƒ½éå¸¸çš„å¹¿å¤§ï¼Œä¾‹å¦‚webç«¯æˆ‘ä»¬å¯èƒ½è¦æµ‹è¯•ä¸åŒæµè§ˆå™¨å…¼å®¹æ€§ï¼Œå¯¹äºmobileæ¥è¯´ï¼Œå°¤å…¶æ˜¯androidè¿™ç§ç‰ˆæœ¬ç¢ç‰‡åŒ–ä»¥åŠå„ç§è‡ªå®šä¹‰ç³»ç»Ÿä»¥åŠuiæ”¹æ›´èƒ½ä¼šé€ æˆå„ç§ä¸ªæ ·çš„é—®é¢˜ï¼Œå¯¹äºmobileæˆ‘ä»¬ç”šè‡³è¦è€ƒè™‘æ›´å¤šåœºæ™¯ï¼Œä¾‹å¦‚appæ˜¯å¦å…·æœ‰å†…å­˜æ³„éœ²ï¼Œç”µé‡æ¶ˆè€—çš„å¿«æ…¢ï¼Œæ¨ªç«–å±çš„å½±å“ç­‰ç­‰ã€‚ä¸åŒæ„å»ºå·¥å…·ï¼Œå¼€å‘ç¯å¢ƒçš„åŒºåˆ«ç­‰å¯¹äºqaæ¥è¯´åˆè¦é¢å¯¹ä¸€å †æœªçŸ¥é¢†åŸŸï¼Œæ²¡äº‹ï¼Œç»§ç»­åŠ æ²¹ã€‚</p><p>SDLC è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼ˆSystems Development Life Cycleï¼‰<br><img src="/image/sdlc.jpeg" alt="sdlc"></p><p>æµ‹è¯•äººå‘˜ä¹Ÿè¢«å»ºè®®å­¦ä¹ è½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†æŠ€èƒ½ï¼Œè¿™å°†æœ‰åŠ©äºQAæ›´è½»æ¾äº†è§£åº”ç”¨ç¨‹åºå¼€å‘ä»»åŠ¡å’Œæµ‹è¯•è®¡åˆ’å‘¨æœŸã€‚å¯¹SDLCå‘¨æœŸçš„æ·±å…¥äº†è§£è¿˜æœ‰åŠ©äºé¢„æµ‹åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§ï¼Œä»è€Œæå‰é‡‡å–æ­£ç¡®çš„æªæ–½ã€‚å› æ­¤ï¼Œæµ‹è¯•äººå‘˜è¿˜å¿…é¡»å­¦ä¹ é€‚ç”¨äºé¡¹ç›®å¼€å‘ç”Ÿå‘½å‘¨æœŸæµç¨‹çš„å‡ ç§å¼€å‘æ–¹æ³•ï¼Œå¦‚ç€‘å¸ƒï¼Œçœ‹æ¿ï¼ŒScrumï¼Œç²¾ç›Šç­‰ã€‚<br>ä½œä¸ºä¸€ä¸ªqa,æˆ‘ä»¬åº”å…³æ³¨è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸä¸­çš„æ¯ä¸€æ­¥ï¼Œäº†è§£æ•æ·å¼€å‘è¿­ä»£ä¸­çš„å„ä¸ªç¯èŠ‚åŠæ—¶ä½œå‡ºåé¦ˆï¼Œæ‰€ä»¥æœ‰æ—¶qaä¹Ÿéœ€è¦æ‰¿æ‹…scrum masterçš„è´£ä»»ï¼Œä¾‹å¦‚æŸä¸ªstoryè¿›åº¦è¶…è¿‡é¢„å®šæœŸé™æœªå®Œæˆï¼Œæˆ‘ä»¬å°±åº”å½“äº†è§£åŸå› ï¼ŒåŠæ—¶ä¸å›¢é˜Ÿæˆå‘˜ä»¥åŠå®¢æˆ·æ²Ÿé€šã€‚</p><p>ç†æ€§åˆ†æä¸é€»è¾‘æ€ç»´<br><img src="/image/logic.jpeg" alt="sdlc"><br>ä¸ºäº†ä¿æŒç«äº‰åŠ›ï¼ŒQAè¿˜åº”è¯¥å­¦ä½¿ç”¨ç†æ€§ï¼Œåˆ†ææ€§å’Œé€»è¾‘æ€§æ€ç»´æ¥æ€è€ƒé—®é¢˜ï¼Œå› ä¸ºè¿™äº›æŠ€èƒ½åœ¨æµ‹è¯•åº”ç”¨æ—¶å¯ä»¥å¸®åŠ©QAè¯†åˆ«é”™è¯¯ï¼Œäº†è§£é—®é¢˜çš„å¤æ‚æ€§ï¼Œè¯„ä¼°åº”ç”¨ç¨‹åºçš„ä¸ç†Ÿæ‚‰çš„åŠŸèƒ½å¹¶ç›¸åº”åœ°è¿›è¡Œæµ‹è¯•ã€‚å…·æœ‰è‰¯å¥½çš„åˆ†æå’Œæ¨ç†èƒ½åŠ›æœ‰åŠ©äºæ ¹æ®åœ¨ä¸åŒåœºæ™¯ä¸‹éªŒè¯åº”ç”¨ç¨‹åºï¼Œå¹¶æ ¹æ®é¢„å…ˆå®šä¹‰çš„æ ‡å‡†æ¥è¯„ä¼°åº”ç”¨ç¨‹åºã€‚è¿™è¿›ä¸€æ­¥æœ‰åŠ©äºè¯„ä¼°ç›¸å…³ä¿¡æ¯ï¼Œæå‡ºæ˜ç¡®çš„é—®é¢˜ï¼Œç¡®å®šä¼˜åŠ¿å’Œå¼±ç‚¹ï¼Œè€Œä¸ä¼šæŒæœ‰åè§ï¼Œè¿™æœ‰åŠ©äºå®æ–½æ­£ç¡®çš„è¡ŒåŠ¨æ–¹æ¡ˆå’Œè§£å†³æ–¹æ¡ˆã€‚</p><p>ç¤¾äº¤ç½‘ç»œ<br><img src="/image/contact.jpeg" alt="contact"><br>ä»»ä½•è¡Œä¸šçš„ä»»ä½•ä¸“ä¸šäººå£«éƒ½éœ€è¦ç¤¾äº¤ç½‘ç»œæŠ€èƒ½ã€‚ç”±äºç¤¾äº¤ç½‘ç»œå¯ä»¥å³æ—¶è®¿é—®è®¨è®ºï¼Œèµ„æºå’Œå†…å®¹ï¼Œå› æ­¤åœ¨è¿™æ–¹é¢çš„æŠ€å·§æœ‰åŠ©äºä¸å…¶å®ƒQAè¿›è¡Œäº’åŠ¨ï¼Œå­¦ä¹ æ–°äº‹ç‰©å¹¶æ›´æ–°è‡ªå·±çš„çŸ¥è¯†ä½“ç³»çš„å¹¿åº¦ä¸æ·±åº¦ã€‚æ‹¥æœ‰ç¤¾äº¤ç½‘ç»œæŠ€èƒ½è¿˜å¯è®©æ‚¨ä¸å„ç§ä¸“å®¶è¿›è¡Œäº¤æµï¼Œäº¤æµç–‘é—®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å»ºç«‹é•¿æœŸçš„åˆä½œå…³ç³»ï¼Œå¸®åŠ©æ‚¨çš„ä¸“ä¸šæŠ€èƒ½å’Œä¼ä¸šè¾¾åˆ°æ‰€éœ€ç›®æ ‡ã€‚</p><p>æµ‹è¯•å·¥å…·å’ŒæŠ€æœ¯<br><img src="/image/tools.jpg" alt="tools"><br>æ¯ä¸ªQAéƒ½å¿…é¡»äº†è§£ä¸åŒçš„æµ‹è¯•æŠ€æœ¯å’Œä½¿ç”¨å·¥å…·ã€‚æ— è®ºä½ çš„é¡¹ç›®å±äºé‚£ä¸ªé¢†åŸŸå’Œåº”ç”¨ç¨‹åºç±»å‹ï¼Œéƒ½åº”å…·æœ‰é»‘ç›’æµ‹è¯•ï¼Œæ¸—é€æµ‹è¯•ï¼Œå®‰å…¨æµ‹è¯•ï¼Œç³»ç»Ÿæµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ç­‰ï¼Œæµ‹è¯•äººå‘˜å…·æœ‰å¤šåŠŸèƒ½æ€§ï¼Œå¯ä»¥å¸®åŠ©ä»–ä»¬åœ¨ä»»ä½•ç±»å‹çš„é¡¹ç›®ä¸Šå·¥ä½œã€‚æ­¤å¤–ï¼Œéšç€å•†ä¸šåŒ–çš„ä¸“ä¸šæµ‹è¯•å·¥å…·æ•°é‡çš„å¢åŠ ï¼Œä¾‹å¦‚bugè·Ÿè¸ªå·¥å…·ï¼Œæµ‹è¯•ç®¡ç†å·¥å…·ï¼ŒGUIæµ‹è¯•å·¥å…·ï¼Œè‡ªåŠ¨åŒ–å·¥å…·ç­‰ï¼Œæµ‹è¯•äººå‘˜å¯ä»¥äº†è§£è¿™äº›å·¥å…·çš„ç‰¹ç‚¹ï¼Œé€‰æ‹©é€‚ç”¨äºæ‰€åœ¨é¡¹ç›®éœ€æ±‚å·¥å…·ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚å’Œå¤æ‚æ€§ã€‚</p><p>ç¼–ç¨‹<br><img src="/image/coding.jpeg" alt="tools"></p><p>å½“æˆ‘ä»¬è°ˆè®ºç¼–ç¨‹æ—¶ï¼ŒQAå½“ç„¶ä¸ä¼šåƒå¼€å‘äººå‘˜ä¸€æ ·å·¥ä½œï¼Œä½†æ˜¯QAéœ€è¦ç†è§£åº”ç”¨ç¨‹åºçš„å®ç°åŸç†ä¸é¡¹ç›®æ¶æ„ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„åˆ›å»ºæ‰€éœ€çš„æµ‹è¯•ã€‚ç¼–ç¨‹çŸ¥è¯†æœ‰åŠ©äºè¯†åˆ«åº”ç”¨ç¨‹åºä»£ç ä¸­çš„å¯èƒ½å‘ç”Ÿçš„é”™è¯¯ï¼Œè¿™å°±è¿›ä¸€æ­¥é™ä½äº†åº”ç”¨ç¨‹åºå‘ç”Ÿé”™è¯¯çš„æ¦‚ç‡ã€‚æ‰€ä»¥å»ºè®®å­¦ä¹ è‡³å°‘ä¸¤ç§ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ ·çš„è¯æµ‹è¯•äººå‘˜å°±èƒ½å¤Ÿæ›´å¥½çš„äº†è§£åº”ç”¨ç¨‹åºçš„è§£å†³æ–¹æ¡ˆï¼Œä»¥ç¡®ä¿çš„åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸçš„è´¨é‡ã€‚</p><p>æ²Ÿé€š - ä¹¦é¢å’Œå£å¤´<br><img src="/image/communicate.jpeg" alt="communicate"></p><p>æ¯ä¸ªQAè¿˜åº”å…·å¤‡è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›ã€‚é€šè¿‡è‰¯å¥½çš„æ²Ÿé€šï¼Œå¯¹äºé¡¹ç›®çš„æ‰€æœ‰è§’è‰²æ¥è¯´ï¼ŒQAåº”è¯¥æ˜¯ä¸€ä¸ªå¥½çš„ä½œå®¶ï¼Œæ¼”è®²è€…ï¼Œå¬ä¼—å’Œè¯»è€…ï¼Œä¾‹å¦‚å°†é¡¹ç›®çš„çŠ¶æ€æ›´æ–°ç»™å®¢æˆ·ï¼Œå‘å›¢é˜Ÿé€šçŸ¥storyçš„éœ€æ±‚å˜æ›´ï¼Œä¸å¼€å‘äººå‘˜äº¤æµbugçš„ç»†èŠ‚ï¼Œå°†éœ€æ±‚æ–‡æ¡£è½¬åŒ–ä¸ºæµ‹è¯•ç”¨ä¾‹ï¼Œå‡†å¤‡æµ‹è¯•æŠ¥å‘Šç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè‰¯å¥½çš„æ²Ÿé€šæœ‰åŠ©äºè¡¨ç°å‡ºä¸ªäººé«˜åº¦çš„ç†è§£èƒ½åŠ›ï¼Œè¿›ä¸€æ­¥å¸®åŠ©QAåœ¨é€»è¾‘æ€ç»´å’Œç†æ€§åˆ†æåŸºç¡€ä¸Šå‘æŠ€æœ¯äººå‘˜å’ŒéæŠ€æœ¯äººå‘˜æä¾›åé¦ˆæ„è§ã€‚</p><p>æ™ºåŠ›ä¸åˆ›æ„<br>è½¯ä»¶æµ‹è¯•å¹¶ä¸æ˜¯ä¸€ä¸ªç¨‹åºåŒ–æˆ–å¹³å‡¡çš„ä»»åŠ¡ï¼Œè€Œæ˜¯ä¸€ä¸ªéœ€è¦åˆ›é€ åŠ›å’Œé€»è¾‘åˆ†æçš„è¿‡ç¨‹ã€‚æ™ºåŠ›å’Œåˆ›é€ åŠ›æ— æ³•æ”¹å˜ï¼Œä½†æ˜¯ï¼Œå¯ä»¥é€šè¿‡è´¨ç–‘åº”ç”¨ç¨‹åºè¡Œä¸ºå¹¶åˆ†æåº”ç”¨ç¨‹åºçš„ä¸åŒæ–¹é¢æ¥äº†è§£å…¶å·¥ä½œåŸç†ã€‚å¦å¤–ï¼Œé€šè¿‡è®¾è®¡ä¸€äº›åº”ç”¨åœºæ™¯ï¼Œæµ‹è¯•äººå‘˜å¯ä»¥å°è¯•æ¢ç´¢æ€§æµ‹è¯•ï¼Œæ¥è¯†åˆ«æ›´å¤šç¼ºé™·ï¼Œå¹¶å¯»æ±‚æä¾›æœ‰æ•ˆäº§å“è´¨é‡çš„å¯èƒ½è§£å†³æ–¹æ¡ˆã€‚</p><p>æµ‹è¯•è®¡åˆ’å’Œæ–‡æ¡£</p><p>æµ‹è¯•è®¡åˆ’å’Œæ–‡æ¡£å¯¹äºæ¯ä¸ªQAè‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºç¡®å®šæ­£ç¡®çš„éœ€æ±‚ä»¥åŠé‡‡å–åˆç†çš„æ­¥éª¤ã€‚æ­¤å¤–è¿˜å¯ä»¥å¸®åŠ©è·Ÿè¸ªéœ€æ±‚å˜åŒ–ï¼Œæ£€æŸ¥æµ‹è¯•è¿‡ç¨‹å’Œè·Ÿè¸ªåå·®ï¼Œå¹¶æœ‰åŠ©äºæŠ¥å‘Šå’Œè®°å½•å·¥ä½œã€‚ä¸€ä¸ªè®°å½•è‰¯å¥½çš„æµ‹è¯•è¿‡ç¨‹ä¹Ÿå¯ä»¥å¸®åŠ©ä¸ªåˆ«æµ‹è¯•è€…å’Œä¼ä¸šå°†æ­£ç¡®çš„é¢„ç®—å’Œèµ„æºåˆ†é…ç»™ä¸€ä¸ªé¡¹ç›®ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæµ‹è¯•è®¡åˆ’å’Œæ–‡æ¡£æŠ€èƒ½æ˜¯æ¯ä¸ªæµ‹è¯•äººå‘˜å¿…é¡»å­¦ä¹ çš„é‡è¦æŠ€èƒ½ä¹‹ä¸€ã€‚</p><p>é¡¹ç›®ç®¡ç†<br>å­¦ä¹ é¡¹ç›®ç®¡ç†çš„æŠ€èƒ½ï¼Œå¸®åŠ©QAæé«˜å¯¹äºå¤„ç†é—®é¢˜çš„èƒ½åŠ›ã€‚ä¾‹å¦‚é¡¹ç›®ä¸­æŸä¸ªç¯èŠ‚å‘ç”Ÿé—®é¢˜ï¼Œé€šè¿‡é¡¹ç›®ç®¡ç†æŠ€èƒ½ï¼Œèƒ½å¤ŸåŠæ—¶çš„åˆ†æé—®é¢˜å½±å“å¹¿åº¦ï¼ŒåŠæ—¶å¯»æ‰¾ç›¸å…³äººå‘˜åä½œå¤„ç†é—®é¢˜ï¼Œé¡¹ç›®ç®¡ç†æŠ€èƒ½æœ‰åŠ©äºQAäº†è§£é¡¹ç›®æµç¨‹ä¸­æ‰€å­˜åœ¨çš„é—®é¢˜ï¼Œæ¥å¸®åŠ©æ›´å¥½æ”¹è¿›æ•´ä¸ªæµ‹è¯•è¿‡ç¨‹ã€‚</p><p>å®¢æˆ·æ”¯æŒ<br><img src="/image/customers.jpeg" alt="customers"></p><p>ä¸è¿‡å»é¡¹ç›®æœ‰æ‰€ä¸åŒï¼Œç°ä»£æµ‹è¯•é¡¹ç›®è¦æ±‚QAæä¾›å®¢æˆ·æ”¯æŒå¹¶ä»ä»–ä»¬çš„è§’åº¦æ€è€ƒã€‚ä½œä¸ºQAå¹¶ä¸æ„å‘³ç€æˆ‘åªæ˜¯å…³å¿ƒåŠŸèƒ½æ˜¯å¦æ­£ç¡®ï¼Œå› ä¸ºæµ‹è¯•é¡¹ç›®çš„æˆåŠŸæˆ–å¤±è´¥å› ç´ å¾ˆå¤šï¼Œè€Œä¸ä»…ä»…åªæ˜¯å±€é™äºåŠŸèƒ½å±‚é¢ï¼Œå› æ­¤QAåº”åŠæ—¶åº”å¯¹å’Œæ”¯æŒå®¢æˆ·æå‡ºçš„éœ€æ±‚ï¼Œå¹¶æ‰€ä»–ä»¬è§’åº¦æ€è€ƒå“ªäº›æ–¹é¢ä»ç„¶éœ€è¦æ”¹å–„ã€‚</p><p>æŠ¥å‘Š<br><img src="/image/report.jpeg" alt="report"><br>ä¼˜ç§€çš„QAå¿…é¡»æ‹¥æœ‰è‰¯å¥½æŠ¥å‘ŠæŠ€èƒ½ï¼Œæ‰èƒ½å‘é¡¹ç›®çš„æˆå‘˜ä¸å®¢æˆ·æä¾›æµ‹è¯•é¡¹ç›®å’Œè¢«æµ‹è¯•åº”ç”¨çš„ç¡®åˆ‡çŠ¶æ€ã€‚è¿™ç§æŠ¥å‘Šå®è·µå¯ä»¥æ›´å¥½åœ°åè°ƒæ•´ä¸ªæµ‹è¯•é¡¹ç›®ï¼ŒåŒæ—¶ä¹Ÿä¸ºé«˜å±‚ç®¡ç†äººå‘˜æä¾›æ‰§è¡Œè¯¦ç»†çš„æ•°æ®ï¼Œä¾‹å¦‚æµ‹è¯•ç”¨ä¾‹è¦†ç›–ç‡ï¼Œbugçš„æ•°é‡ï¼Œå‘å¸ƒæ—¶é—´è¡¨ç­‰ï¼Œæœ€ç»ˆæœ‰åŠ©äºå…¶åšå‡ºæ­£ç¡®çš„å†³ç­–ã€‚</p><p>ç‹¬ç«‹å·¥ä½œ<br>æœ€åï¼ŒQAåº”è¯¥å­¦ä¹ å¦‚ä½•ç‹¬ç«‹å·¥ä½œçš„æŠ€èƒ½ã€‚è¿™å°†æé«˜ä»–ä»¬ä»éœ€æ±‚ç†è§£ï¼ˆæŠ€æœ¯å’Œä¸šåŠ¡éœ€æ±‚ï¼‰åˆ°äº§å‡ºçš„æœ€ç»ˆäº¤ä»˜å·¥ä½œçš„èƒ½åŠ›ï¼Œé‡‡å–æ­£ç¡®çš„æ­¥éª¤ï¼Œåœ¨æ²¡æœ‰ä»–äººçš„å¸®åŠ©æˆ–ç»ç†çš„ç›‘ç£ã€‚å­¦ä¹ ç‹¬ç«‹å·¥ä½œå°†ä¼šå¢åŠ å¯¹ä»–ä»¬çš„ä¿¡å¿ƒã€‚</p><p>æ— è®ºç»éªŒå¤šå°‘ï¼ŒQAéƒ½åº”åŠªåŠ›ä¸æ–­å­¦ä¹ å’Œæé«˜è½¯ä»¶æµ‹è¯•æŠ€èƒ½å’ŒçŸ¥è¯†ã€‚æ— è®ºæ˜¯è‡ªå­¦ä¹ è¿˜æ˜¯å‚ä¸åŸ¹è®­è®¡åˆ’ï¼Œæµ‹è¯•äººå‘˜åº”ä¸æ–­å­¦ä¹ æ–°çš„æ–¹æ³•ï¼Œä»¥æé«˜æµ‹è¯•å·¥ä½œä¸­çš„æ•ˆç‡ï¼Œå¹¶ç»§ç»­åº”ç”¨æ–°æŠ€èƒ½å’Œå­¦ä¹ ï¼Œä½¿è‡ªå·±å¤„äºé¢†å…ˆåœ°ä½ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;DevOps-amp-æ•æ·æ–¹æ³•&quot;&gt;&lt;a href=&quot;#DevOps-amp-æ•æ·æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;DevOps &amp;amp; æ•æ·æ–¹æ³•&quot;&gt;&lt;/a&gt;DevOps &amp;amp; æ•æ·æ–¹æ³•&lt;/h2&gt;&lt;p&gt;éšç€å¯¹äºåœ¨äº¤ä»˜æœŸé™å†…å®Œæˆé¡¹ç›®
      
    
    </summary>
    
    
      <category term="devops" scheme="http://yoursite.com/tags/devops/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2017/02/16/code-coverage/"/>
    <id>http://yoursite.com/2017/02/16/code-coverage/</id>
    <published>2017-02-16T02:32:59.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>title: 100% code coverage != 100% test<br>date: 2017-02-16 10:32:59<br>tags:</p><h2 id="QA"><a href="#QA" class="headerlink" title="  - QA"></a>  - QA</h2><h1 id="100-code-coverage-100-test"><a href="#100-code-coverage-100-test" class="headerlink" title="100% code coverage != 100% test"></a>100% code coverage != 100% test</h1><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p><img src="http://upload-images.jianshu.io/upload_images/3732075-d1c1bc5652c294e5.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="avatar"></p><p>å¾ˆå¤šäººçœ‹åˆ°è¿™ä¸ªæ ‡é¢˜æ—¶ï¼Œå°±åœ¨æƒ³ä½ éƒ½100%ä»£ç è¦†ç›–äº†ï¼Œæ€ä¹ˆè¿˜ä¼šæœ‰é—®é¢˜å‘¢ï¼Ÿ</p><p>è®©æˆ‘ä»¬çœ‹çœ‹ä¸€ä¸‹ä»£ç æ —å­ï¼š</p><p><strong>Code example</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCalculator</span> </span>&#123;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="built_in">Double</span> add(<span class="built_in">Double</span> a, <span class="built_in">Double</span> b) &#123;</div><div class="line"></div><div class="line"><span class="keyword">return</span> a + b;&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å†è®©æˆ‘ä»¬çœ‹çœ‹ç”¨junitå†™å‡ºçš„æµ‹è¯•ä»£ç ï¼š</p><p>@Test</p><p>public void testAdd() {</p><p>Double a = new Double(1);</p><p>Double b = new Double(2);</p><p>Double c = new Double(3);</p><p>assertEquals(c, testCalculator.add(a, b));</p><p>}<br>å½“æˆ‘ä»¬åœ¨Eclipseä½¿ç”¨ EclEmme Code Coverage æ’ä»¶æµ‹è¯•æ—¶ï¼Œ å¯¹äºè¿™ä¸ªç±»æˆ‘ä»¬å°†å¾—åˆ° 100% Line-Coverage.<br><img src="http://upload-images.jianshu.io/upload_images/3732075-236eb1a30b91a0a1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="avatar"></p><p>ä¸€åˆ‡çœ‹èµ·æ¥éƒ½é‚£ä¹ˆçš„å®Œç¾ï¼ŒçœŸæ˜¯è¿™æ ·çš„å—ï¼Ÿ</p><p>å¥½å§ï¼Œè®©æˆ‘ä»¬æ¥æ¥çœ‹çœ‹å¦ä¸€ä¸ªæµ‹è¯•ï¼Œå½“å…¶ä¸­ä¸€ä¸ªå˜é‡ä¸ºnullæ—¶ï¼Œè¿”å›å€¼å°†ä¼šæ€æ ·ï¼Ÿ</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> testAddNullPointerException() &#123;</div><div class="line"></div><div class="line"><span class="keyword">Double</span> a = <span class="keyword">new</span> <span class="keyword">Double</span>(<span class="number">1</span>);</div><div class="line"></div><div class="line"><span class="keyword">Double</span> b = <span class="keyword">null</span>;</div><div class="line"></div><div class="line"><span class="keyword">Double</span> c = <span class="keyword">new</span> <span class="keyword">Double</span>(<span class="number">3</span>);</div><div class="line"></div><div class="line">assertEquals(c, testCalculator.add(a, b));</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å¥½äº†ï¼Œä½ ä¼šå‘ç°å°½ç®¡ä½ çš„è¦†ç›–ç‡ä¸º100%ï¼Œä½†ç¨‹åºå´æŠ›å‡ºäº†NullPointerExceptionå¼‚å¸¸ã€‚</p><p>å¯¹äºå¾ˆå¤šPMæ¥è¯´ä¼šé€‰æ‹©ç¬¬ä¸€ä¸ªæµ‹è¯•ä»£ç ,å› ä¸º100%çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡æ€»æ¯”50%çš„æµ‹è¯•ä»£ç è¦æ›´å¥½!</p><p>ä½†æ˜¯è¿™æœ‰ç”¨ä¹ˆï¼Ÿæˆ‘ä»¬å¯èƒ½å¿½ç•¥äº†æ›´é‡è¦çš„ä¸šåŠ¡åœºæ™¯æµ‹è¯•ã€‚</p><p>å“ˆå“ˆï¼Œå°å°çš„å˜²è®½äº†éƒ¨åˆ†PMã€‚</p><p>æˆ‘ä»¬åº”å½“è½¬æ¢ä¸‹æ€ç»´ï¼Œæ€è€ƒä»¥ä¸‹é—®é¢˜ã€‚</p><p><strong>100%çš„è¦†ç›–ç‡å¹¶ä¸æ„å‘³ä½ çš„æµ‹è¯•ä»£ç è´¨é‡å¾ˆé«˜ï¼Œä¸Šé¢é‚£ä¸ªåˆ—å­å°±æ˜¯å…¸å‹ã€‚</strong></p><p><strong>100%çš„è¦†ç›–ç‡å¹¶ä¸æ„å‘³ç€æ‰€æœ‰çš„ä¸šåŠ¡åœºæ™¯éƒ½è¢«è¦†ç›–ã€‚</strong></p><p><strong>å¯¹äºé¡¹ç›®æˆ‘ä»¬æ˜¯å¦æœ‰è¶³å¤Ÿçš„æµ‹è¯•ï¼Ÿ</strong><br><img src="http://upload-images.jianshu.io/upload_images/3732075-b6a0abab1778f170.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="avatar"></p><p>è¿™é‡Œçš„æµ‹è¯•ä¸ä»…ä»…åŒ…æ‹¬ä»£ç çº§åˆ«çš„å•å…ƒæµ‹è¯•ï¼Œè¿˜è¦é›†æˆæµ‹è¯•ï¼Œæ¥å£æµ‹è¯•ï¼Œé»‘ç›’æµ‹è¯•ï¼Œå¯ç”¨æ€§æµ‹è¯•ç­‰ç­‰ã€‚åªæœ‰å…¨éƒ¨å¾—æµ‹è¯•é€šè¿‡åï¼Œæ‰èƒ½è¯´æ˜åŠŸèƒ½çš„å®Œæ•´æ€§ï¼Œä»…ä»…å•ä¸€çš„å•å…ƒæµ‹è¯•ï¼Œå¯¹äºæ•´ä¸ªé¡¹ç›®æ¥è¯´ï¼ŒåŸºæœ¬æ²¡ç”¨ã€‚</p><p><strong>æ‰€ä»¥100%çš„ä»£ç è¦†ç›–ç‡å€¼å¾—è¿½æ±‚å—?</strong><br><img src="http://upload-images.jianshu.io/upload_images/3732075-80f3e850430d8615.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="avatar"></p><p>  æ˜¯çš„ï¼Œè¿™åº”è¯¥æ˜¯æ¯ä¸ªç¨‹åºçŒ¿æ¯•ç”Ÿè¿½æ±‚çš„ä¹‹ä¸€ï¼Œä½†æ˜¯å¦‚æœä»é¡¹ç›®è§’åº¦è€ƒè™‘ï¼ŒROI(æŠ•å…¥äº§å‡ºæ¯”)ï¼Œå¦‚æœä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªçŸ­æœŸé¡¹ç›®ï¼Œéœ€è¦å¿«é€Ÿä¸Šçº¿ï¼Œé‚£ä¹ˆè¿™æ—¶å€™ä½ éœ€è¦æ³¨é‡çš„æ˜¯æµ‹è¯•åº”è¦†ç›–æ ¸å¿ƒåŠŸèƒ½ä»£ç ã€‚å¦‚æœä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ªé•¿æœŸé¡¹ç›®ï¼Œé‚£ä¹ˆé«˜è¦†ç›–ç‡æ˜¯éè¦æœ‰å¿…è¦çš„ï¼Œå®ƒæ„å‘³ç€å¯ç»´æŠ¤æ€§ï¼Œä»¥åŠæ›´å°‘çš„bugã€‚(å‰ææ˜¯ä½ çš„æµ‹è¯•é‡‡ç”¨TDD/BDDæ–¹å¼ç¼–å†™ï¼Œæˆ‘è§è¿‡å°†æµ‹è¯•ä»£ç å†™çš„ä¸€å›¢ç³Ÿçš„äººï¼Œçœ‹ç€ä»–çš„ä»£ç ï¼Œæˆ‘å®æ„¿é‡æ–°ä¸€é)</p><p><strong>é‚£ä¹ˆå¯¹äºä¸€ä¸ªé¡¹ç›®æ¥è¯´è¦†ç›–ç‡åº”è¯¥è¾¾åˆ°å¤šå°‘ï¼Ÿ</strong></p><p>  å…¶å®æ²¡æœ‰å…·ä½“æ•°å€¼èƒ½å¤Ÿè¦†ç›–åˆ°æ‰€æœ‰çš„é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½åº”æœ‰è‡ªå·±çš„é˜ˆå€¼ï¼Œä½†å…±æ€§æ˜¯ï¼Œå¿…é¡»æµ‹è¯•å¿…é¡»è¦†ç›–ä¸»è¦ä¸šåŠ¡åœºæ™¯ï¼Œä»£ç çš„é€»è¾‘åˆ†æ”¯ä¹Ÿå¿…é¡»è¦†ç›–ã€‚</p><p><strong>å¦‚ä½•æ”¹è¿›ä½ çš„é¡¹ç›®ä»£ç è¦†ç›–ç‡ï¼Ÿ</strong></p><p>  é˜…è¯»å’Œç†è§£é¡¹ç›®ä»£ç ï¼Œæ‰¾å‡ºå…¶ä¸­éœ€è¦æµ‹è¯•å¹¶ä¸”ä¸ä¸šåŠ¡å¼ºç›¸å…³çš„ä»£ç ã€‚</p><p>  å°†ä¹‹å‰å¯è¯»æ€§å·®æµ‹è¯•ä»£ç ï¼Œé‡‡ç”¨TDDä¸BDDæ–¹å¼è¿›è¡Œé‡å†™ï¼Œæé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ä¸å¯è¯»æ€§ã€‚</p><p><strong>ä»£ç è¦†ç›–ç‡éå¸¸é‡è¦çš„æ„ä¹‰åœ¨äºï¼š</strong></p><p>  åˆ†ææœªè¦†ç›–éƒ¨åˆ†çš„ä»£ç ï¼Œä»è€Œåæ¨åœ¨å‰æœŸé»‘ç›’æµ‹è¯•è®¾è®¡æ˜¯å¦å……åˆ†ï¼Œæ²¡æœ‰è¦†ç›–åˆ°çš„ä»£ç æ˜¯å¦æ˜¯æµ‹è¯•è®¾è®¡çš„ç›²ç‚¹ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰è€ƒè™‘åˆ°ï¼Ÿæ˜¯éœ€æ±‚/è®¾è®¡ä¸å¤Ÿæ¸…æ™°ï¼Œè¿˜æ˜¯æµ‹è¯•è®¾è®¡çš„ç†è§£æœ‰è¯¯ã€‚</p><p>  æ£€æµ‹å‡ºç¨‹åºä¸­çš„åºŸä»£ç ï¼Œå¯ä»¥é€†å‘åæ¨åœ¨ä»£ç è®¾è®¡ä¸­ä¸åˆç†çš„åœ°æ–¹ï¼Œæé†’è®¾è®¡/å¼€å‘äººå‘˜ç†æ¸…ä»£ç é€»è¾‘å…³ç³»ï¼Œæå‡ä»£ç è´¨é‡ã€‚</p><p>  ä»£ç è¦†ç›–ç‡é«˜ä¸èƒ½è¯´æ˜ä»£ç è´¨é‡é«˜ï¼Œä½†æ˜¯åè¿‡æ¥çœ‹ï¼Œä»£ç è¦†ç›–ç‡ä½ï¼Œä»£ç è´¨é‡ç»å¯¹ä¸ä¼šé«˜åˆ°å“ªé‡Œå»ï¼Œå¯ä»¥ä½œä¸ºæµ‹è¯•è‡ªæˆ‘å®¡è§†çš„é‡è¦å·¥å…·ä¹‹ä¸€ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;title: 100% code coverage != 100% test&lt;br&gt;date: 2017-02-16 10:32:59&lt;br&gt;tags:&lt;/p&gt;
&lt;h2 id=&quot;QA&quot;&gt;&lt;a href=&quot;#QA&quot; class=&quot;headerlink&quot; title=&quot;  - 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>espresso-apiä¹‹Matchersæ¢ç©¶</title>
    <link href="http://yoursite.com/2016/12/25/espresso4/"/>
    <id>http://yoursite.com/2016/12/25/espresso4/</id>
    <published>2016-12-25T13:00:09.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>é€šè¿‡å‰3ç¯‡æ–‡ç« ï¼Œå¤§å®¶åº”è¯¥å¯¹espressoæœ‰äº†å¤§ä½“ä¸Šçš„äº†è§£ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬è¦æ·±å…¥äº†è§£å®ƒçš„APIï¼Œçœ‹çœ‹espressoçš„æ•´ä½“æ¶æ„ã€‚<br>è¿˜æ˜¯é€šè¿‡espresso cheat sheetæ¥è¿›å…¥æœ¬æ¬¡è¯é¢˜ã€‚</p><p><img src="/image/espresso-cheat-sheet-2.1.0.png" alt=""></p><p>Espressoå¤‡å¿˜å•æ˜¯æ‚¨åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨çš„å¿«é€Ÿå‚è€ƒã€‚ è¿™ä¸ªå¤‡å¿˜å•åŒ…å«å¤§å¤šæ•°å¯ç”¨çš„Matchersï¼ŒViewActionså’ŒViewAsertionsã€‚<br>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Matchers éƒ½æœ‰å“ªäº›APIå¯ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">android.support.test.espresso.matcher</div><div class="line">Classes</div><div class="line">BoundedMatcher&lt;T, S extends T&gt;Some matcher sugar <span class="keyword">that</span> lets you create a matcher <span class="keyword">for</span> a <span class="keyword">given</span> type <span class="keyword">but</span> only process items <span class="keyword">of</span> a specific subtype <span class="keyword">of</span> <span class="keyword">that</span> matcher.</div><div class="line">CursorMatchersA collection <span class="keyword">of</span> Hamcrest matchers <span class="keyword">that</span> matches a data row <span class="keyword">in</span> a Cursor.</div><div class="line">CursorMatchers.CursorMatcherA Matcher <span class="keyword">that</span> matches Cursors based <span class="keyword">on</span> values <span class="keyword">in</span> their columns.</div><div class="line">LayoutMatchersA collection <span class="keyword">of</span> hamcrest matches <span class="keyword">to</span> detect typical layout issues.</div><div class="line">PreferenceMatchersA collection <span class="keyword">of</span> hamcrest matchers <span class="keyword">that</span> match Preferences.</div><div class="line">RootMatchersA collection <span class="keyword">of</span> matchers <span class="keyword">for</span> Root objects.</div><div class="line">ViewMatchersA collection <span class="keyword">of</span> hamcrest matchers <span class="keyword">that</span> match Views.</div><div class="line">Enums</div><div class="line">ViewMatchers.VisibilityEnumerates <span class="keyword">the</span> possible <span class="built_in">list</span> <span class="keyword">of</span> values <span class="keyword">for</span> View.getVisibility().</div></pre></td></tr></table></figure></p><p>7ä¸ªç±»ï¼Œ1ä¸ªEumsã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸ªä¸ªæ¬£èµè°·æ­Œå¤§ç¥çš„æ°ä½œã€‚</p><p><code>BoundedMatcher&lt;T, S extends T&gt;</code><br>ä¸€äº›åŒ¹é…è¯­æ³•ç³–ï¼Œå…è®¸æ‚¨ä¸ºç»™å®šç±»å‹åˆ›å»ºåŒ¹é…å™¨ï¼Œä½†åªèƒ½å¤„ç†è¯¥åŒ¹é…å™¨çš„ç‰¹å®šå­ç±»å‹é¡¹ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯èƒ½å¤Ÿè‡ªå®šä¹‰ä¸€äº›åŒ¹é…å™¨ã€‚<br>ä¸¾ä¸ªæ —å­ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰é”™è¯¯æ–‡æœ¬åŒ¹é…å™¨<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorTextMatchers</span> </span>&#123;</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * Returns a matcher that matches &#123;<span class="doctag">@link</span> TextView&#125;s based on text property value.</span></div><div class="line"><span class="comment">   *</span></div><div class="line"><span class="comment">   * <span class="doctag">@param</span> stringMatcher &#123;<span class="doctag">@link</span> Matcher&#125; of &#123;<span class="doctag">@link</span> String&#125; with text to match</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="meta">@NonNull</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Matcher&lt;View&gt; <span class="title">withErrorText</span><span class="params">(<span class="keyword">final</span> Matcher&lt;String&gt; stringMatcher)</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BoundedMatcher&lt;View, TextView&gt;(TextView.class) &#123;</div><div class="line"></div><div class="line">      <span class="meta">@Override</span></div><div class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">describeTo</span><span class="params">(<span class="keyword">final</span> Description description)</span> </span>&#123;</div><div class="line">        description.appendText(<span class="string">"with error text: "</span>);</div><div class="line">        stringMatcher.describeTo(description);</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      <span class="meta">@Override</span></div><div class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matchesSafely</span><span class="params">(<span class="keyword">final</span> TextView textView)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> stringMatcher.matches(textView.getError().toString());</div><div class="line">      &#125;</div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>å®ç°çš„ä¸»è¦ç»†èŠ‚å¦‚ä¸‹ã€‚ æˆ‘ä»¬é€šè¿‡ä»withErrorText()è¿”å›ä¸€ä¸ªBoundedMatcheræ¥ç¡®ä¿åŒ¹é…å™¨åªåŒ¹é…TextViewç±»çš„å­ç±»ã€‚ è¿™ä½¿å¾—å¾ˆå®¹æ˜“åœ¨BoundedMatcher.matchesSafely()ä¸­å®ç°åŒ¹é…é€»è¾‘æœ¬èº«ï¼šåªéœ€ä»TextViewä¸­è·å–getError()æ–¹æ³•å¹¶å°†å…¶é€å…¥ä¸‹ä¸€ä¸ªåŒ¹é…å™¨ã€‚ æœ€åï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„describeTo()æ–¹æ³•çš„å®ç°ï¼Œå®ƒåªç”¨äºç”Ÿæˆè°ƒè¯•è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚<br><code>CursorMatchers</code><br>Hamcrestçš„é›†åˆåŒ¹é…å™¨ï¼Œåœ¨CursoråŒ¹é…ç›¸åº”çš„æ•°æ®è¡Œã€‚<br>æºç å¦‚ä¸‹<br><figure class="highlight puppet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">   * Returns a matcher that matches <span class="keyword">a</span> &#123;@<span class="literal">link</span> String&#125; <span class="keyword">value</span> <span class="keyword">at</span> <span class="keyword">a</span> <span class="keyword">given</span> <span class="keyword">column</span> <span class="keyword">index</span></div><div class="line">   * in <span class="keyword">a</span> &#123;@<span class="literal">link</span> Cursor&#125;<span class="keyword">s</span> <span class="keyword">data</span> <span class="keyword">row</span>.</div><div class="line">   * &lt;br&gt;</div><div class="line">   * @param columnIndex int column index</div><div class="line">   * @param value <span class="keyword">a</span> &#123;@<span class="literal">link</span> String&#125; <span class="keyword">value</span> <span class="keyword">to</span> <span class="keyword">match</span></div><div class="line">   */</div><div class="line">  public static CursorMatcher withRowString(int columnIndex, String value) &#123;</div><div class="line">    return withRowString(columnIndex, is(value));</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p><p>å¤§éƒ¨åˆ†çš„åœºæ™¯ï¼Œå¤§å¤šå‘ç”Ÿäºè¡¨å•æˆ–è€…æ»šåŠ¨menuæ—¶ã€‚<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">onData(</div><div class="line">    is(<span class="name">instanceOf</span>(<span class="name">Cursor</span>.class)),</div><div class="line">    CursorMatchers.withRowString(<span class="string">"job_title"</span>, is(<span class="string">"Barista"</span>))</div><div class="line">)<span class="comment">;</span></div></pre></td></tr></table></figure></p><p>LayoutMatchers hamcrestçš„é›†åˆåŒ¹é…ä»¥æ£€æµ‹å…¸å‹çš„å¸ƒå±€é—®é¢˜ã€‚<br>   ä¾‹å¦‚åŒ¹é…å…·æœ‰æ¤­åœ†å½¢æ–‡æœ¬çš„TextViewå…ƒç´ ã€‚ å¦‚æœæ–‡æœ¬å¤ªé•¿ï¼Œæ— æ³•é€‚åº”TextViewï¼Œ<br>    å®ƒå¯ä»¥æ˜¯æ¤­åœ†å½¢ï¼ˆâ€™Too longâ€™æ˜¾ç¤ºä¸ºâ€™Too l â€¦â€™æˆ–â€™â€¦ longâ€™ï¼‰æˆ–åˆ‡æ–­ï¼ˆâ€™Too<br>    longâ€œæ˜¾ç¤ºä¸ºâ€Too lâ€œï¼‰ã€‚ è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥æ¥å—ï¼Œä½†é€šå¸¸è¡¨ç¤ºä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p><p>PreferenceMatchers hamcreståŒ¹é…å™¨æ¥åŒ¹é…ä¸€ç»„åå¥½ã€‚<br>Preferenceç»„ä»¶å…¶å®å°±æ˜¯Androidå¸¸è§UIç»„ä»¶ä¸SharePreferencesçš„ç»„åˆå°è£…å®ç°ã€‚<br><code>onData(Matchers.&lt;Object&gt;allOf(PreferenceMatchers.withKey(&quot;setting-name&quot;))).perform(click());</code><br>PreferenceMatchersè¿˜æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥åº”ç”¨åˆ°å…¶ä»–åœºæ™¯<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">withSummary</span><span class="params">(final int resourceId)</span></span></div><div class="line"><span class="function"><span class="title">withSummaryText</span><span class="params">(String summary)</span></span></div><div class="line"><span class="function"><span class="title">withSummaryText</span><span class="params">(final Matcher&lt;String&gt; summaryMatcher)</span></span></div><div class="line"><span class="function"><span class="title">withTitle</span><span class="params">(final int resourceId)</span></span></div><div class="line"><span class="function"><span class="title">withTitleText</span><span class="params">(String title)</span></span></div><div class="line"><span class="function"><span class="title">withTitleText</span><span class="params">(final Matcher&lt;String&gt; titleMatcher)</span></span></div><div class="line"><span class="function"><span class="title">isEnabled</span><span class="params">()</span></span></div></pre></td></tr></table></figure></p><p>RootMatchers Rootå¯¹è±¡çš„åŒ¹é…å™¨é›†åˆã€‚<br>åŒ¹é…rootè£…é¥°è§†å›¾åŒ¹é…ç»™å®šçš„è§†å›¾åŒ¹é…å™¨ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">onView</span>(<span class="selector-tag">withText</span>("<span class="selector-tag">Text</span>"))</div><div class="line">  <span class="selector-class">.inRoot</span>(<span class="selector-tag">withDecorView</span>(<span class="selector-tag">not</span>(<span class="selector-tag">is</span>(<span class="selector-tag">getActivity</span>()<span class="selector-class">.getWindow</span>()<span class="selector-class">.getDecorView</span>()))))</div><div class="line">  <span class="selector-class">.perform</span>(<span class="selector-tag">click</span>());</div></pre></td></tr></table></figure></p><p>RootMatchersè¿˜æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥åº”ç”¨åˆ°å…¶ä»–åœºæ™¯</p><table><thead><tr><th>Public methods</th></tr></thead><tbody><tr><td>static Matcher<root></root></td><td>isDialog()Matches Roots that are dialogs (i.e.)</td></tr><tr><td>static Matcher<root></root></td><td>isFocusable()Matches Roots that can take window focus.</td></tr><tr><td>  static Matcher<root></root></td><td>isPlatformPopup()Matches Roots that are popups - like autocomplete suggestions or the actionbar spinner.  </td></tr><tr><td>  static Matcher<root></root></td><td>isTouchable()Matches Roots that can receive touch events.  </td></tr><tr><td>  static Matcher<root></root></td><td>withDecorView(Matcher<view> decorViewMatcher)Matches Roots with decor views that match the given view matcher.</view></td></tr></tbody></table><p>  ViewMatchers æœ€é‡è¦ä¹Ÿæ˜¯åº”ç”¨æœ€å¹¿çš„åŒ¹é…å™¨ï¼Œé€šè¿‡ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¥å®šä½å±‚çº§é‡Œé¢çš„æ§ä»¶ã€‚</p><table><thead><tr><th>Public methods</th></tr></thead><tbody><tr><td>  static <t> void</t></td><td>assertThat(String message, T actual, Matcher<t> matcher) A replacement for MatcherAssert.assertThat that renders View objects nicely.</t></td></tr><tr><td>  static <t> void</t></td><td>assertThat(T actual, Matcher<t> matcher) A replacement for MatcherAssert.assertThat that renders View objects nicely.</t></td></tr><tr><td>  static Matcher<view></view></td><td>hasContentDescription() Returns an Matcher that matches Views with any content description.</td></tr><tr><td>  static Matcher<view></view></td><td>hasDescendant(Matcher<view> descendantMatcher) Returns a matcher that matches Views based on the presence of a descendant in its view hierarchy.</view></td></tr><tr><td>  static Matcher<view></view></td><td>hasErrorText(String expectedError) Returns a matcher that matches EditText based on edit text error string value.</td></tr><tr><td>  static Matcher<view></view></td><td>hasErrorText(Matcher<string> stringMatcher) Returns a matcher that matches EditText based on edit text error string value.</string></td></tr><tr><td>  static Matcher<view></view></td><td>hasFocus() Returns a matcher that matches Views currently have focus.</td></tr><tr><td>  static Matcher<view></view></td><td>hasImeAction(int imeAction) Returns a matcher that matches views that support input methods (e.g.</td></tr><tr><td>  static Matcher<view></view></td><td>hasImeAction(Matcher<integer> imeActionMatcher) Returns a matcher that matches views that support input methods (e.g.</integer></td></tr><tr><td>  static Matcher<view></view></td><td>hasLinks() Returns a matcher that matches TextViews that have links.</td></tr><tr><td>  static Matcher<view></view></td><td>hasSibling(Matcher<view> siblingMatcher) Returns an Matcher that matches Views based on their siblings.</view></td></tr><tr><td>  static Matcher<view></view></td><td>isAssignableFrom(Class&lt;? extends View&gt; clazz) Returns a matcher that matches Views which are an instance of or subclass of the provided class.</td></tr><tr><td>  static Matcher<view></view></td><td>isChecked() Returns a matcher that accepts if and only if the view is a CompoundButton (or subtype of) and is in checked state.</td></tr><tr><td>  static Matcher<view></view></td><td>isClickable() Returns a matcher that matches Views that are clickable.</td></tr><tr><td>  static Matcher<view></view></td><td>isCompletelyDisplayed() Returns a matcher which only accepts a view whose height and width fit perfectly within the currently displayed region of this view.</td></tr><tr><td>  static Matcher<view></view></td><td>isDescendantOfA(Matcher<view> ancestorMatcher) Returns a matcher that matches Views based on the given ancestor type.</view></td></tr><tr><td>  static Matcher<view></view></td><td>isDisplayed() Returns a matcher that matches Views that are currently displayed on the screen to the user.</td></tr><tr><td>  static Matcher<view></view></td><td>isDisplayingAtLeast(int areaPercentage) Returns a matcher which accepts a view so long as a given percentage of that viewâ€™s area is not obscured by any other view and is thus visible to the user.</td></tr><tr><td>  static Matcher<view></view></td><td>isEnabled() Returns a matcher that matches Views that are enabled.</td></tr><tr><td>  static Matcher<view></view></td><td>isFocusable() Returns a matcher that matches Views that are focusable.</td></tr><tr><td>  static Matcher<view></view></td><td>isJavascriptEnabled() Returns a matcher that matches WebView if they are evaluating Javascript.</td></tr><tr><td>  static Matcher<view></view></td><td>isNotChecked() Returns a matcher that accepts if and only if the view is a CompoundButton (or subtype of) and is not in checked state.</td></tr><tr><td>  static Matcher<view></view></td><td>isRoot() Returns a matcher that matches root View.</td></tr><tr><td>  static Matcher<view></view></td><td>isSelected() Returns a matcher that matches Views that are selected.</td></tr><tr><td>  static Matcher<view></view></td><td>supportsInputMethods() Returns a matcher that matches views that support input methods.</td></tr><tr><td>  static Matcher<view></view></td><td>withChild(Matcher<view> childMatcher) A matcher that returns true if and only if the viewâ€™s child is accepted by the provided matcher.</view></td></tr><tr><td>  static Matcher<view></view></td><td>withClassName(Matcher<string> classNameMatcher) Returns a matcher that matches Views with class name matching the given matcher.</string></td></tr><tr><td>  static Matcher<view></view></td><td>withContentDescription(int resourceId) Returns a Matcher that matches Views based on content description property value.</td></tr><tr><td>  static Matcher<view></view></td><td>withContentDescription(String text) Returns an Matcher that matches Views based on content description property value.</td></tr><tr><td>  static Matcher<view></view></td><td>withContentDescription(Matcher&lt;? extends CharSequence&gt; charSequenceMatcher) Returns an Matcher that matches Views based on content description property value.</td></tr><tr><td>  static Matcher<view></view></td><td>withEffectiveVisibility(ViewMatchers.Visibility visibility) Returns a matcher that matches Views that have â€œeffectiveâ€ visibility set to the given value.</td></tr><tr><td>  static Matcher<view></view></td><td>withHint(Matcher<string> stringMatcher) Returns a matcher that matches TextViews based on hint property value.</string></td></tr><tr><td>  static Matcher<view></view></td><td>withHint(int resourceId) Returns a matcher that matches a descendant of TextView that is displaying the hint associated with the given resource id.</td></tr><tr><td>  static Matcher<view></view></td><td>withHint(String hintText) Returns a matcher that matches TextView based on itâ€™s hint property value.</td></tr><tr><td>  static Matcher<view></view></td><td>withId(Matcher<integer> integerMatcher) Returns a matcher that matches Views based on resource ids.</integer></td></tr><tr><td>  static Matcher<view></view></td><td>withId(int id) Same as withId(is(int)), but attempts to look up resource name of the given id and use an R.id.myView style description with describeTo.</td></tr><tr><td>  static Matcher<view></view></td><td>withInputType(int inputType) Returns a matcher that matches InputType.</td></tr><tr><td>  static Matcher<view></view></td><td>withParent(Matcher<view> parentMatcher) A matcher that accepts a view if and only if the viewâ€™s parent is accepted by the provided matcher.</view></td></tr><tr><td>  static Matcher<view></view></td><td>withResourceName(String name) Returns a matcher that matches Views based on resource id names, (for instance, channel_avatar).</td></tr><tr><td>  static Matcher<view></view></td><td>withResourceName(Matcher<string> stringMatcher) Returns a matcher that matches Views based on resource id names, (for instance, channel_avatar).</string></td></tr><tr><td>  static Matcher<view></view></td><td>withSpinnerText(int resourceId) Returns a matcher that matches a descendant of Spinner that is displaying the string of the selected item associated with the given resource id.</td></tr><tr><td>  static Matcher<view></view></td><td>withSpinnerText(String text) Returns a matcher that matches Spinner based on itâ€™s selected itemâ€™s toString value.</td></tr><tr><td>  static Matcher<view></view></td><td>withSpinnerText(Matcher<string> stringMatcher) Returns a matcher that matches Spinners based on toString value of the selected item.</string></td></tr><tr><td>  static Matcher<view></view></td><td>withTagKey(int key) Returns a matcher that matches View based on tag keys.</td></tr><tr><td>  static Matcher<view></view></td><td>withTagKey(int key, Matcher<object> objectMatcher) Returns a matcher that matches Views based on tag keys.</object></td></tr><tr><td>  static Matcher<view></view></td><td>withTagValue(Matcher<object> tagValueMatcher) Returns a matcher that matches Views based on tag property values.</object></td></tr><tr><td>  static Matcher<view></view></td><td>withText(Matcher<string> stringMatcher) Returns a matcher that matches TextViews based on text property value.</string></td></tr><tr><td>  static Matcher<view></view></td><td>withText(String text) Returns a matcher that matches TextView based on its text property value.</td></tr><tr><td>  static Matcher<view></view></td><td>withText(int resourceId) Returns a matcher that matches a descendant of TextView that is displaying the string associated with the given resource id.</td></tr></tbody></table><p>ok è¿™æ¬¡ä¸»è¦ä»‹ç»Matchersçš„API æ›´å¤šçš„å†…å®¹ å¤§å®¶è¿˜æ˜¯è¦æŸ¥çœ‹å®˜æ–¹APIå»å­¦ä¹ ã€‚<br>ä»¥ä¸‹æ˜¯android espresso matchersçš„åœ°å€<br><a href="https://developer.android.com/reference/android/support/test/espresso/matcher/ViewMatchers.html" target="_blank" rel="external">espresso matchers</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;é€šè¿‡å‰3ç¯‡æ–‡ç« ï¼Œå¤§å®¶åº”è¯¥å¯¹espressoæœ‰äº†å¤§ä½“ä¸Šçš„äº†è§£ï¼Œé‚£ä¹ˆä»Šå¤©æˆ‘ä»¬è¦æ·±å…¥äº†è§£å®ƒçš„APIï¼Œçœ‹çœ‹espressoçš„æ•´ä½“æ¶æ„ã€‚&lt;br&gt;è¿˜æ˜¯é€šè¿‡espresso cheat sheetæ¥è¿›å…¥æœ¬æ¬¡è¯é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/image/espresso-chea
      
    
    </summary>
    
    
      <category term="androidè‡ªåŠ¨åŒ–" scheme="http://yoursite.com/tags/android%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>QAè¯·å‹¿å¿˜åˆå¿ƒ</title>
    <link href="http://yoursite.com/2016/12/13/qa-heart/"/>
    <id>http://yoursite.com/2016/12/13/qa-heart/</id>
    <published>2016-12-13T13:42:54.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š"><a href="#é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š" class="headerlink" title="é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š"></a>é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š</h2><p><strong>Quality Assurance</strong> :The planned and systematic activities implemented in a quality system so that quality requirements for a product or service will be fulfilled.<br><strong>Quality Control</strong> :The observation techniques and activities used to fulfill requirements for quality.</p><p>QAçš„å·¥ä½œæ¶‰åŠè½¯ä»¶ç ”å‘æµç¨‹çš„å„ä¸ªç¯èŠ‚ï¼Œä¸”æ¶‰åŠåˆ°æ¯ä¸€ä½å‚ä¸ç ”å‘çš„äººå‘˜ï¼Œä½†è´¨é‡ä¿è¯å·¥ä½œåˆä¸æ¶‰åŠå…·ä½“çš„è½¯ä»¶ç ”å‘ç»†èŠ‚ï¼Œä¾§é‡äºæ•´ä¸ªæµç¨‹ã€‚</p><p>QCåˆ™ä¾§é‡äºç‚¹ï¼Œåˆ©ç”¨å„ç§æ–¹æ³•å»æ£€æŸ¥æŸä¸ªåŠŸèƒ½æ˜¯å¦æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</p><p>thoughtworks çš„QAåˆ™æ˜¯è¿™ä¸¤è€…çš„æ··åˆä½“ï¼Œä½ æ—¢è¦ä¿è¯å¼€å‘æµç¨‹çš„è´¨é‡ï¼Œåˆè¦ä¿è¯storyçš„åŠŸèƒ½çš„æ˜¯å¦æ­£ç¡®ã€‚</p><hr><p>æ¥thoughtworkså·²ç»2å¹´äº†ï¼Œå½“è¿‡bqconfè®²å¸ˆä¸ä¸»æŒï¼Œå‚åŠ è¿‡å…¬å¸å†…å„ç±»æµ‹è¯•ç›¸å…³æ´»åŠ¨ï¼Œä¹Ÿé˜…è¯»è¿‡gé‚®ä»¶ä¸­åˆ†äº«çš„å…³äºtestçš„è¯é¢˜ï¼Œå¤§éƒ¨åˆ†äººå…³æ³¨ç‚¹éƒ½ç¦»ä¸å¼€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œé¢è¯•çš„QAä¹Ÿè¯´æƒ³åˆ°thoughtworksæ¥å­¦ä¹ é«˜æ·±çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä»¿ä½›è‡ªåŠ¨åŒ–æµ‹è¯•ä»£è¡¨äº†æ•´ä¸ªQAç•Œï¼Œæˆ‘åå¯¹ç›²ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç¡®åˆ‡çš„è¯´åå¯¹ç›²ç›®çš„UIè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å¾ˆå¤šQAåœ¨è‡ªåŠ¨åŒ–æµ‹è¯•æµ·æ´‹é‡Œè¿·å¤±äº†è‡ªå·±ã€‚<br>æˆ‘è¦å¼ºè°ƒè‡ªåŠ¨åŒ–æµ‹è¯•: çœŸçš„æ²¡æœ‰é“¶å¼¹ã€‚</p><p><img src="/image/QA_TW.jpg" alt=""></p><h2 id="QAçš„æœ€ç»ˆä»·å€¼ä½“ç°"><a href="#QAçš„æœ€ç»ˆä»·å€¼ä½“ç°" class="headerlink" title="QAçš„æœ€ç»ˆä»·å€¼ä½“ç°"></a>QAçš„æœ€ç»ˆä»·å€¼ä½“ç°</h2><p><strong>Faster Delivery Of Quality Software From Idea To Consumer</strong></p><h3 id="ç¡®ä¿é¡¹ç›®çš„æ­£ç¡®æ€§"><a href="#ç¡®ä¿é¡¹ç›®çš„æ­£ç¡®æ€§" class="headerlink" title="ç¡®ä¿é¡¹ç›®çš„æ­£ç¡®æ€§"></a>ç¡®ä¿é¡¹ç›®çš„æ­£ç¡®æ€§</h3><p>æ‰€ä»¥è‡ªåŠ¨åŒ–æµ‹è¯•åªæ˜¯å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†ã€‚<br>å¦‚ä¸Šå›¾é¡¶éƒ¨å’Œåº•éƒ¨çš„æ–‡å­—æ˜¯å¯¹ä¸€ä¸ªQAæ‰€èƒ½å¸¦ç»™é¡¹ç›®çš„æ€»ç»“ï¼šâ€œæˆ‘ä»¬åœ¨å¼€å‘æ­£ç¡®çš„äº§å“å—ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¼€å‘çš„äº§å“æ­£ç¡®å—ï¼Ÿâ€æ‰€ä»¥QAé¦–å…ˆéœ€è¦åœ¨æ•´ä¸ªä¸ªé¡¹ç›®è¿‡ç¨‹ä¸­ä¸æ–­è¯¢é—®çš„æ‰€æœ‰æˆå‘˜ä¸Šè¿°é—®é¢˜ï¼Œç¡®ä¿å›¢é˜Ÿæ˜¯åœ¨å¼€å‘å®¢æˆ·æ‰€éœ€çš„äº§å“ï¼Œè€Œä¸æ˜¯è‡ªå·±YYå‡ºæ¥çš„äº§å“ã€‚</p><h3 id="ç¡®ä¿æµç¨‹çš„æ­£ç¡®æ€§"><a href="#ç¡®ä¿æµç¨‹çš„æ­£ç¡®æ€§" class="headerlink" title="ç¡®ä¿æµç¨‹çš„æ­£ç¡®æ€§"></a>ç¡®ä¿æµç¨‹çš„æ­£ç¡®æ€§</h3><p><strong>Quality is not just in the software but also in the process</strong></p><p>è´¨é‡ä»æ¥éƒ½ä¸åªæ˜¯QAçš„èŒè´£ï¼Œè€Œæ˜¯æ•´ä¸ªå›¢é˜Ÿçš„èŒè´£ã€‚ä½†QAå¦‚æœè‡ªå·±éƒ½ä¸æ³¨é‡ï¼Œä¸ç£ä¿ƒç»„å†…æˆå‘˜æ”¹è¿›è´¨é‡ï¼Œå†å°†è´£ä»»å¼ºåŠ äºæ•´ä¸ªå›¢é˜Ÿï¼Œé‚£ä¹ˆäº§å“è´¨é‡åˆä½•è°ˆæå‡ä¸ä¿è¯ã€‚<br>ä¸­é—´çš„å›¾ç‰‡ä»ä¸€ä¸ªQAçš„è§’åº¦è¡¨æ˜äº†ä¸€ä¸ªç”¨æˆ·æ•…äº‹çš„ç”Ÿå‘½å‘¨æœŸä»¥åŠQAå¦‚ä½•å‚ä¸å…¶ä¸­æ¯ä¸ªç¯èŠ‚ã€‚</p><p><img src="/image/pair_with_BA.png" alt=""><br>é¦–å…ˆBAå’Œå®¢æˆ·å°†è¦å¼€å‘çš„storyåˆ—å‡ºä¹‹åï¼ŒBAä¸QAå¯ä»¥ä¸€èµ·pairç¼–å†™å…·ä½“storyçš„å†…å®¹ï¼Œåœºæ™¯ä¸éªŒæ”¶æ¡ä»¶,åˆ©ç”¨è‡ªå·±å¯¹ä¸šåŠ¡ä»¥åŠç³»ç»Ÿçš„ç†Ÿæ‚‰åº¦ï¼Œå°½é‡çš„é…åˆBAå°†storyä¸­å‘å°½é‡æ’é™¤æ‰ã€‚</p><p><img src="/image/kick_off.png" alt=""><br>æ‰€æœ‰å‚ä¸kick off è§’è‰²ï¼Œéƒ½åº”è¯¥æå‰äº†è§£storyå†…å®¹ã€‚åœ¨kick offè¿‡ç¨‹ä¸­ï¼Œæå‡ºè‡ªå·±å¯¹storyç–‘é—®ã€‚å°½é‡å°†ä¸šåŠ¡éœ€æ±‚ä¸Šé—®é¢˜åœ¨è¿™ä¸ªé˜¶æ®µè§£å†³ã€‚<br><img src="/image/pair_with_dev.png" alt=""><br>åœ¨å®Œæˆkick offåï¼ŒQAå¯ä»¥å’Œdevä¸€èµ·pairå®Œæˆç¼–å†™unit test ä»¥åŠAutomated Acceptance Testsï¼Œèº«ä¸ºä¸€ä¸ªæ•æ·QAï¼Œæˆ‘ä»¬èµ·ç è¦äº†è§£å›¢é˜Ÿé€‰ç”¨çš„å•å…ƒæµ‹è¯•å·¥å…·ï¼Œç†Ÿæ‚‰é¡¹ç›®çš„æŠ€æœ¯æ¶æ„ï¼Œè¿™æ ·æ›´å¥½çš„ä¾¿äºæˆ‘ä»¬å¯¹æ•´ä¸ªé¡¹ç›®è´¨é‡æŠŠæ§ï¼Œåœ¨ä¸dev pairçš„è¿‡ç¨‹ä¸­ï¼Œå³å¸®åŠ©devåˆ†æä¸šåŠ¡åœºæ™¯çš„åˆ†æ”¯ï¼Œæ¥ç¡®ä¿å•å…ƒæµ‹è¯•è¦†ç›–çš„æ˜¯æ­£ç¡®çš„åœºæ™¯ï¼Œè€Œä¸æ˜¯ä¸ºäº†äº¤ä»£ä¸Šçº§éšä¾¿ä¹±å†™çš„å•å…ƒæµ‹è¯•ï¼Œä¹Ÿå¸®åŠ©QAç†Ÿæ‚‰ä»£ç ï¼Œæé«˜ç¼–ç èƒ½åŠ›ã€‚<br><img src="/image/sign_off.png" alt=""><br>å½“DEVå®Œæˆç¼–ç å·¥ä½œåï¼Œè¿™æ—¶QA UX BA DEVä¸€èµ·æ£€æŸ¥storyï¼Œæ˜¯å¦æŒ‰ç…§story ACæ¥æ£€æŸ¥æ˜¯å¦å®Œæˆå¯¹åº”çš„åŠŸèƒ½ã€‚UXä¹Ÿå¯å‘è¡¨å¯¹story UIä»¥åŠäº¤äº’ä¸€äº›çœ‹æ³•ï¼Œæœ‰ä»»ä½•é—®é¢˜åŠæ—¶è®¨è®ºåï¼Œå°†é—®é¢˜å°½æ—©çš„åé¦ˆç»™å®¢æˆ·ã€‚<br><img src="/image/test_test.png" alt=""><br>å½“å¼€å‘äº¤ä»˜ä¸€éƒ¨åˆ†åŠŸèƒ½ä¹‹åï¼ŒQAå°±å¯ä»¥åšå¸¸è§„çš„ç”¨æˆ·æ•…äº‹æµ‹è¯•ï¼Œå‡ ä¸ªè¿­ä»£ä¹‹åï¼ŒQAå¼€å§‹è¿›è¡Œè·¨åŠŸèƒ½éœ€æ±‚æµ‹è¯•å’Œæ¢ç´¢æ€§æµ‹è¯•ç­‰ã€‚æ ¹æ®æ¢ç´¢æ€§æµ‹è¯•çš„ç»“æœï¼ŒQAå¯èƒ½ä¼šè°ƒæ•´æµ‹è¯•ç­–ç•¥ï¼Œè°ƒæ•´æµ‹è¯•ä¼˜å…ˆçº§ï¼Œå®Œå–„æµ‹è¯•ç”¨ä¾‹ç­‰ç­‰ã€‚<br><img src="/image/report.png" alt=""><br>ä¸Šé¢è¿™äº›QAå®è·µè²Œä¼¼å·²ç»å¾ˆå®Œç¾,å…¶å®è¿˜å·®æœ€é‡è¦çš„ä¸€ç¯ <strong>quality analysis</strong> ã€‚æ¯æ¬¡releaseåï¼Œæˆ‘ä»¬æ€»ä»¥ä¸ºæˆ‘ä»¬å‘å¸ƒä¸€ä¸ªå®Œç¾çš„äº§å“ï¼Œä½†å´æ€»èƒ½åœ¨æ–°è¿­ä»£å¼€å‘è¿‡ç¨‹ä¸­å‘ç°ä¹‹å‰é—®é¢˜ï¼Œå†å²æ€»æ˜¯æƒŠäººçš„ç›¸ä¼¼ï¼Œä¸ºä»€ä¹ˆï¼Œæ²¡æœ‰åˆ†ææ€»ç»“é—®é¢˜ï¼Œä»¥åŠç›¸åº”çš„é¢„é˜²æ‰‹æ®µ,é‚£ä¹ˆåŒæ ·çš„é—®é¢˜åªä¼šé‡ç°ã€‚<br>åŒæ—¶æˆ‘ä»¬ä¹Ÿè¦å›é¡¾ä¸‹è‡ªå·±åœ¨å·¥ä½œä¸­çœŸçš„å°†è¿™äº›æ•æ·å®è·µéƒ½åº”ç”¨åˆ°å·¥ä½œä¸­å—ï¼Œæˆ‘æƒ³æˆ–å¤šæˆ–å°‘çš„éƒ½æœ‰æ‰€æ¬ ç¼ºã€‚å¯¹äºä¸€ä¸ªQAæ¥è¯´ï¼Œä¸åº”å¾ªè§„è¹ˆçŸ©ç…§æ¬æ•æ·å®è·µã€‚ä¾‹å¦‚ï¼Œåœ¨kickoffä¸­ï¼Œå‘ç°devï¼ŒUXå¯¹storyæ¶‰åŠçš„åœºæ™¯ä»¥åŠå†…å®¹äº†è§£ä¸æ¸…æ¥šï¼ŒQAä¹Ÿå¯èƒ½æ¼æ‰ä¸€äº›æµ‹è¯•åœºæ™¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨kickoffä¹‹å‰ï¼ŒåŠ å…¥ä¸€ä¸ªpre- kick offçš„å®è·µï¼Œç•™å‡ºæ—¶é—´ï¼Œè®©æ¯ä¸ªè§’è‰²éƒ½èƒ½å¤Ÿå®Œæ•´äº†è§£storyã€‚åœ¨kick offä¹‹ä¸­ï¼Œuxæ²¡æœ‰åŠæ³•å®Œæ•´çš„ç¡®è®¤é¡µé¢çš„å­—ä½“å¤§å°æˆ–è€…é¢œè‰²ç­‰æ˜¯å¦æ­£ç¡®ï¼Œé‚£ä¹ˆåœ¨sign offä¹‹åï¼Œæˆ‘ä»¬ä¹ŸåŠ å…¥ä¸€ä¸ªUX-testå®è·µï¼Œå¸®åŠ©UXèƒ½å¤Ÿæ›´å¥½è§£å†³è¿™äº›é—®é¢˜ã€‚<br>æ‰€ä»¥æ¯ä¸ªé¡¹ç›®ä¹Ÿéƒ½æœ‰åº”é€‚åˆè‡ªå·±é¡¹ç›®çš„æ•æ·å®è·µï¼Œå‘ç°é¡¹ç›®å­˜åœ¨çš„é—®é¢˜ï¼ŒæŒç»­æ”¹è¿›æ‰æ˜¯æœ€ä½³å®è·µã€‚</p><h2 id="å†æ¥è°ˆè°ˆè‡ªåŠ¨åŒ–æµ‹è¯•å§ã€‚"><a href="#å†æ¥è°ˆè°ˆè‡ªåŠ¨åŒ–æµ‹è¯•å§ã€‚" class="headerlink" title="å†æ¥è°ˆè°ˆè‡ªåŠ¨åŒ–æµ‹è¯•å§ã€‚"></a>å†æ¥è°ˆè°ˆè‡ªåŠ¨åŒ–æµ‹è¯•å§ã€‚</h2><p><img src="/image/pyramid.png" alt="pyramid"><br>ä¸Šé¢çš„æµ‹è¯•é‡‘å­—å¡”å¯¹äºå¤§å®¶æ¥è¯´å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œå¯¹äºè‡ªåŠ¨åŒ–æµ‹è¯•æ¥è¯´æœ€æœ‰ä»·å€¼çš„ä»ç„¶æ˜¯å•å…ƒæµ‹è¯•ï¼Œä½†å¯¹äºQAæ¥è¯´æ— ç–‘æœ€å¤æ‚çš„ã€‚<br>å¤§éƒ¨åˆ†QAæˆ–è€…testerï¼Œä»ç„¶ä»¥UIè‡ªåŠ¨åŒ–ä¸ºé‡å¿ƒã€‚ä¹‹æ‰€ä»¥åå¯¹ç›²ç›®çš„UIè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå› ä¸ºå˜åŒ–é¢‘ç¹çš„UIè®¾è®¡ï¼Œæä½æŠ•å…¥äº§ç”Ÿæ¯”ï¼Œéƒ½åº”è¯¥è®©æˆ‘ä»¬é‡æ–°æ€è€ƒä¸‹UIè‡ªåŠ¨åŒ–çš„ä»·å€¼ã€‚</p><h3 id="æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®æ–½UIè‡ªåŠ¨åŒ–æ­£ç¡®çš„æ–¹å¼ï¼š"><a href="#æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®æ–½UIè‡ªåŠ¨åŒ–æ­£ç¡®çš„æ–¹å¼ï¼š" class="headerlink" title="æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®æ–½UIè‡ªåŠ¨åŒ–æ­£ç¡®çš„æ–¹å¼ï¼š"></a>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®æ–½UIè‡ªåŠ¨åŒ–æ­£ç¡®çš„æ–¹å¼ï¼š</h3><ul><li>èƒ½ä¸ç”¨UIè‡ªåŠ¨åŒ–æµ‹è¯•å°±ä¸ç”¨ï¼Œæ¢³ç†ä¸šåŠ¡ä¸»çº¿ï¼Œåªä¿ç•™ç”¨æˆ·æ“ä½œæœ€é¢‘ç¹ï¼Œäº¤äº’æœ€å¤šçš„åœºæ™¯ã€‚</li><li>æ ¹æ®é¢å‘å¯¹è±¡è®¾è®¡çš„åŸåˆ™ï¼Œæ„å»ºé€‚åˆé¡¹ç›®çš„UIè‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œæ— è®ºè‡ªå·±ç¼–å†™æ¡†æ¶ï¼Œè¿˜æ˜¯é‡‡ç”¨å¼€æºæ¡†æ¶ã€‚</li><li>å°½é‡é‡‡ç”¨ç‹¬ç«‹æµ‹è¯•æ•°æ®ï¼Œç¡®ä¿è¿è¡Œæµ‹è¯•ä¸å—å½±å“ã€‚ä¾‹å¦‚é‡‡ç”¨mockæ•°æ®åº“æˆ–è€…æ¯æ¬¡è¿è¡Œæ—¶è¿˜åŸæµ‹è¯•æ•°æ®åº“ã€‚<h3 id="å›åˆ°æ­£é¢˜ï¼Œé¢å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¤§æ½®ï¼ŒQAåº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ"><a href="#å›åˆ°æ­£é¢˜ï¼Œé¢å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¤§æ½®ï¼ŒQAåº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ" class="headerlink" title="å›åˆ°æ­£é¢˜ï¼Œé¢å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¤§æ½®ï¼ŒQAåº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ"></a>å›åˆ°æ­£é¢˜ï¼Œé¢å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„å¤§æ½®ï¼ŒQAåº”è¯¥å…³æ³¨ä»€ä¹ˆï¼Ÿ</h3></li><li>ç¼–ç è§„èŒƒï¼ŒçœŸå®ä¾‹å­ï¼Œdevå¯¹äºç±»åå‘½åæ²¡æœ‰ç”¨Camel-Caseï¼Œé€ æˆåœ¨linuxç³»ç»Ÿä¸­éƒ¨ç½²ä¸æˆåŠŸï¼Œpythonä¸­ä¹±ä½¿ç”¨ç¼©è¿›ç­‰ã€‚ å…¶å®éƒ½å¯ä»¥é¿å…åˆ°ï¼Œä¾‹å¦‚å¼€å‘å·¥å…·åŠ å…¥è‡ªåŠ¨æ£€æŸ¥ï¼Œæˆ–è€…åœ¨CIä¸ŠåŠ å…¥æ ¡éªŒç¼–ç è§„èŒƒçš„æ­¥éª¤ï¼Œé‡‡ç”¨ä¸€äº›å·¥å…·å°±å¯ä»¥è¾¾åˆ°ç›®çš„ï¼Œjshintï¼ŒRuboCopç­‰ã€‚</li><li>pairå®Œæˆå•å…ƒæµ‹è¯•æˆ–APIæµ‹è¯•ç­‰ï¼Œä¸€æ–¹é¢å¯ä»¥æé«˜QAçš„ç¼–ç èƒ½åŠ›ï¼Œå¦ä¸€é¢å¯ä»¥ç»™å‡ºdevä¸€äº›å»ºè®®ï¼Œå°†å•å…ƒæµ‹è¯•è¦†ç›–åˆ°æ›´å¤šçš„åœºæ™¯ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœä½ ä»¬é¡¹ç›®é‡‡ç”¨reactä½œä¸ºå‰ç«¯æ¡†æ¶ï¼Œå¦‚æœä½ ä¸èƒ½ç†è§£react virtual dom ä¸jsxï¼Œå½“æˆ‘ä»¬åœ¨å†™UIè‡ªåŠ¨åŒ–è„šæœ¬æ—¶ï¼Œä½ ä¼šå‘ç°æ ¹æœ¬æ— æ³•è¿›è¡Œä¸‹å»ï¼Œæ—¥å¸¸ä¸­æˆ‘ä»¬å®šä½å…ƒç´ å…¨æ˜¯è¿™ç§<figure class="highlight subunit"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;div class="styles__formField___1fyGy"&gt;</div><div class="line">&lt;input type="text" placeholder="Email"&gt;</div><div class="line">&lt;svg class="styles__formIcon___37VGd" viewBox="0 0 24 24" style="display: inline-block; fill: rgba(0, 0, 0, 0.870588); height: 24px; width: 24px; user-select: none; transition: all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms;"&gt;</div><div class="line">&lt;path d="M12 12c2.21 0 4<span class="string">-1</span>.79 4<span class="string">-4</span>s<span class="string">-1</span>.79<span class="string">-4</span><span class="string">-4</span><span class="string">-4</span><span class="string">-4</span> 1.79<span class="string">-4</span> 4 1.79 4 4 4zm0 2c<span class="string">-2</span>.67 0<span class="string">-8</span> 1.34<span class="string">-8</span> 4v2h16v<span class="string">-2</span>c0<span class="string">-2</span>.66<span class="string">-5</span>.33<span class="string">-4</span><span class="string">-8</span><span class="string">-4</span>z"&gt;</div><div class="line">&lt;/path&gt;</div><div class="line">&lt;/svg&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure></li></ul><p>,æ‰€æœ‰çš„é¡µé¢éƒ½æ˜¯jsæ¸²æŸ“å‡ºæ¥çš„ï¼Œå¦‚æœä½ æ‡‚jsxï¼Œå°±çŸ¥é“åªéœ€è¦åœ¨å¯¹äºçš„Component renderæ–¹æ³•ä¸­æ›´æ”¹åŠ å…¥idç­‰å…ƒç´ å°±å¯ä»¥æå®š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">render</span><span class="params">()</span></span> &#123;</div><div class="line">    return (</div><div class="line">        &lt;div&gt;</div><div class="line">        &lt;<span class="selector-tag">input</span> type=<span class="string">"text"</span> placeholder=<span class="string">"Email"</span> id=<span class="string">"Email"</span>&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    )</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><ul><li>æ§åˆ¶å•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼Œ100%çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡å½“ç„¶æ˜¯æœ€å¥½çš„ï¼Œä½†å¦‚æœäº¤ä»˜å‹åŠ›å¤§ï¼Œå’Œå®¢æˆ·å•†é‡åï¼Œæˆ‘ä»¬å¯ä»¥å°½é‡è¦†ç›–ä¸šåŠ¡ä¸»çº¿ï¼Œè€Œä¸æ˜¯ä¸ºäº†è¾¾åˆ°è¦†ç›–ç‡å»¶è¯¯äº†äº¤ä»˜å‘¨æœŸã€‚</li></ul><h2 id="å†æ¥è°ˆè°ˆè´¨é‡åˆ†æã€‚"><a href="#å†æ¥è°ˆè°ˆè´¨é‡åˆ†æã€‚" class="headerlink" title="å†æ¥è°ˆè°ˆè´¨é‡åˆ†æã€‚"></a>å†æ¥è°ˆè°ˆè´¨é‡åˆ†æã€‚</h2><p>ä½œä¸ºä¸€ä¸ªQAï¼Œæˆ‘ä»¬ä¸ä»…è¦æ£€æµ‹é¡¹ç›®ä¸­å­˜åœ¨é—®é¢˜ï¼Œä¹Ÿè¦æ”¹è¿›å›¢é˜Ÿçš„å®è·µæ´»åŠ¨ï¼Œæ›´é‡è¦çš„æ˜¯é¢„é˜²é—®é¢˜çš„å‘ç”Ÿã€‚</p><ul><li>æ¯æ¬¡bugbashæˆ–ç›¸åº”è¿­ä»£å®Œæˆåï¼Œè¦åˆ†æç»Ÿè®¡ï¼Œæ‰¾å‡ºäº§ç”Ÿç¼ºé™·çš„ç¯èŠ‚ï¼Œå¹¶é‡‡å–æªæ–½é˜²æ­¢é—®é¢˜å†ç°ã€‚ä¾‹å¦‚æ¯æ¬¡releaseæˆ–è€…bug bashä¹‹å,æˆ‘å¯ä»¥æŒ‰ç…§åŠŸèƒ½æ¨¡å—ä¸bugç±»å‹è¿›è¡Œç»Ÿè®¡åˆ’åˆ†ï¼Œåˆ†æç»Ÿè®¡bugçš„æˆå› ï¼Œä¾‹å¦‚æŸæ¬¡è¿­ä»£æˆ‘ä»¬bugæ•°é‡æ¿€å¢ï¼Œç»è°ƒæŸ¥ï¼Œå‘ç°æˆ‘ä»¬å¯¹æŸäº›æ¨¡å—çš„å‰ç«¯ä»£ç è¿›è¡Œäº†é‡æ„ï¼Œä½†ç¼ºä¹ç›¸åº”çš„å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•ï¼Œé€ æˆäº†æˆ‘ä»¬æ²¡æœ‰åŠæ—¶å‘ç°bugã€‚ä¹‹åæˆ‘ä»¬å°±å¯¹åº”çš„é‡‡å–æªæ–½é˜²æ­¢é—®é¢˜å†ç°ã€‚</li><li>æ€»ç»“åˆ†ææŠ¥å‘Šï¼ŒåŠæ—¶åé¦ˆè¿™äº›ä¿¡æ¯ç»™å›¢é˜Ÿã€‚æ€»ç»“åˆ†ææ˜¯ä¸€ä¸ªé•¿æœŸçš„ä»»åŠ¡ï¼Œæ¯æ¬¡bugæ•°é‡çš„å˜åŠ¨ï¼Œéƒ½ä¼šç›´æ¥ä½“ç°æ•´ä¸ªå›¢é˜Ÿä¸Šæ¬¡è¿­ä»£çš„å¼€å‘è´¨é‡ï¼Œä¾‹å¦‚bugæ•°é‡å‡å°‘äº†ï¼Œå¯ä»¥é¼“åŠ±æˆå‘˜å†æ¥å†å‰ã€‚æˆ–è€…æŸå‡ æ¬¡è¿­ä»£æŸäº›æ¨¡å—bugæˆä¸Šå‡è¶‹åŠ¿ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»„ç»‡å›¢é˜Ÿä¸€èµ·è®¨è®ºé—®é¢˜æ ¹æºï¼Œé‡‡å–æªæ–½é˜²æ­¢é—®é¢˜é‡ç°ã€‚</li><li>åˆ©ç”¨ä»£ç è´¨é‡åˆ†æå·¥å…·å¸®åŠ©æˆ‘ä»¬å°½æ—©é¢„é˜²é—®é¢˜çš„å‘ç”Ÿã€‚ä¾‹å¦‚sonarä»£ç è´¨é‡ç®¡ç†å¹³å°ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»ä»£ç å¤æ‚åº¦ï¼Œé‡å¤ä»£ç ï¼Œå•å…ƒæµ‹è¯•è¦†ç›–ç‡ï¼Œç¼–ç è§„èŒƒç­‰çº¬åº¦æ¥åˆ†ææˆ‘ä»¬ä»£ç æ‰€å­˜åœ¨çš„é—®é¢˜ã€‚å½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„å¼€æºå·¥å…·ï¼ŒåƒRubyCriticï¼Œ/platoä¸åŒçš„è¯­è¨€éƒ½ä¼šæœ‰ç›¸åº”çš„å·¥å…·ã€‚</li><li>åœ¨çº¿ç›‘æ§ï¼Œåˆ©ç”¨åƒnewrelicï¼Œairbnbç­‰ç›‘æ§å·¥å…·å¯¹éƒ¨ç½²åœ¨æœ¬åœ°æˆ–åœ¨äº‘ä¸­çš„webåº”ç”¨ç¨‹åºè¿›è¡Œç›‘æ§ã€æ•…éšœä¿®å¤ã€è¯Šæ–­ã€çº¿ç¨‹åˆ†æä»¥åŠå®¹é‡è®¡åˆ’ã€‚è¿™æ ·å°±ç®—ä»¬äº§å“ç¯å¢ƒæœ‰ä»»ä½•é—®é¢˜ï¼Œæˆ‘ä»¬éƒ½ä¼šåŠæ—¶å“åº”ï¼Œå°½æ—©ä¿®å¤ï¼Œå‡ä½æŸå¤±ã€‚</li></ul><h2 id="æœ€åè®©æˆ‘ä»¬åœ¨çœ‹çœ‹QAåº”å…·æœ‰é‚£äº›èƒ½åŠ›ä¸æŠ€èƒ½"><a href="#æœ€åè®©æˆ‘ä»¬åœ¨çœ‹çœ‹QAåº”å…·æœ‰é‚£äº›èƒ½åŠ›ä¸æŠ€èƒ½" class="headerlink" title="æœ€åè®©æˆ‘ä»¬åœ¨çœ‹çœ‹QAåº”å…·æœ‰é‚£äº›èƒ½åŠ›ä¸æŠ€èƒ½."></a>æœ€åè®©æˆ‘ä»¬åœ¨çœ‹çœ‹QAåº”å…·æœ‰é‚£äº›èƒ½åŠ›ä¸æŠ€èƒ½.</h2><p><img src="/image/qa_capablities.png" alt="qa_capablities"><br><img src="/image/qa_skills.png" alt="qa_skills"></p><p>è½¯æŠ€èƒ½æ–¹é¢åŒ…æ‹¬é£é™©æ§åˆ¶ï¼Œè¾…å¯¼ä»–äººï¼Œæ²Ÿé€šèƒ½åŠ›ï¼Œåˆ†æå®šä½ç­‰ã€‚æŠ€èƒ½æ–¹é¢åˆ™åŒ…æ‹¬ç¼ºé™·ç®¡ç†ï¼Œæµç¨‹æ”¹è¿›ï¼Œæµ‹è¯•åˆ†æï¼Œå¯ç”¨æ€§æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œå®‰å…¨æµ‹è¯•ç­‰ã€‚</p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>å›é¡¾ä¸Šé¢è¿™äº›å®è·µï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥åšçš„æ›´å¥½ï¼Œè€Œä¸æ˜¯æŠŠå›¢é˜Ÿçš„è´¨é‡å…¨éƒ½äº¤ç»™è‡ªåŠ¨åŒ–ï¼Œå›å½’QAçš„åº”æœ‰çš„åˆå¿ƒï¼Œè®©æˆ‘ä»¬ä»å„ä¸ªæ–¹é¢æ”¹è¿›è´¨é‡ï¼Œå¸¦ç»™å›¢é˜Ÿæ›´å¥½çš„æœªæ¥ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š&quot;&gt;&lt;a href=&quot;#é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š&quot;&gt;&lt;/a&gt;é¦–å…ˆè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹QAä¸QCçš„åŒºåˆ«ï¼š&lt;/h2&gt;&lt;p&gt;&lt;stron
      
    
    </summary>
    
    
      <category term="gatling" scheme="http://yoursite.com/tags/gatling/"/>
    
  </entry>
  
  <entry>
    <title>espressoç³»åˆ—3--æµ‹è¯•å®è·µ</title>
    <link href="http://yoursite.com/2016/12/08/espresso3/"/>
    <id>http://yoursite.com/2016/12/08/espresso3/</id>
    <published>2016-12-08T14:30:17.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å‰2ç¯‡æˆ‘ä»¬å·²ç»è¯¦ç»†ä»‹ç»äº†espressoçš„æ¶æ„ä»¥åŠç›¸åº”çš„APIï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿæœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œç†è®ºè®²çš„å†å¤šï¼Œè¿˜æ˜¯ä¸å¦‚æ‰‹ä¸Šè‡ªå·±æ•²ä¸€éä»£ç ã€‚<br>è¿˜æ˜¯æ·±å…¥æµ…å‡ºç³»åˆ—çš„å¥—è·¯ï¼Œè®©æˆ‘è¿™ä¸ªå°å¸æœºå¸¦å¤§å®¶ä¸€æ­¥ä¸€æ­¥è¿›å…¥espressoçš„ä¸–ç•Œå§ã€‚</p><h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><p><img src="http://f.hiphotos.baidu.com/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=1b0dc3d30d2442a7ba03f5f7b02ac62e/6159252dd42a2834b1c7cf5b59b5c9ea15cebf79.jpg" alt="github"><br>githubï¼Œå¦‚æœä½ è¿˜ç”¨svnçš„è¯ï¼Œè¯·æ”¾å¼ƒé˜…è¯»æœ¬ç³»åˆ—æ–‡ç« ï¼Œå¤ªlowäº†ï¼Œè€Œä¸”æœ¬ç³»åˆ—çš„codeéƒ½æ˜¯é‡‡ç”¨googleå®˜æ–¹çš„espressoçš„demoï¼Œéƒ½æ¥æºäºgithubã€‚<br><img src="http://web.img.chuanke.com/course/2015-03/04/208e43b22dffd2a46a88f2a610c77e35.jpg" alt="android studio"><br>android studio,è¿™ä¸ªä¸ç”¨è¯´ï¼Œç›®å‰androidå¼€å‘è€…æœ€å¥½çš„å·¥å…·ï¼Œå¹¶ä¸”ä»–æœ‰å¾ˆå¤šå¸®åŠ©espressoæµ‹è¯•çš„æ’ä»¶æˆ–åŠŸèƒ½ï¼Œæ¯”å¦‚å½•åˆ¶åŠŸèƒ½ç­‰ã€‚<br><img src="http://i1.wp.com/photo.sofun.tw/2013/09/Android-SDK-ADT-Bundle-Logo.jpg" alt="android sdk"><br>android sdkï¼Œè¿™ä¸ªæ›´ä¸ç”¨è¯´ï¼Œå¦‚æœä½ è¿è¿™ä¸ªéƒ½æ²¡ï¼Œè¿˜å­¦ä»€ä¹ˆandroidã€‚<br><img src="http://img1.imgtn.bdimg.com/it/u=2429262149,756671414&amp;fm=21&amp;gp=0.jpg" alt="genymotion"><br>genymotion,androidç›®å‰æ¥è¯´æœ€å¥½çš„æ¨¡æ‹Ÿå™¨ï¼Œè™½ç„¶åŸç”Ÿçš„ä¹Ÿå¾ˆä¸é”™ï¼Œä½†æ˜¯å¼€å‘è€…é¦–å…ˆå¾—è¿˜æ˜¯genymotion</p><h3 id="é¦–å…ˆä½¿ç”¨android-studioåˆ›å»ºé¡¹ç›®"><a href="#é¦–å…ˆä½¿ç”¨android-studioåˆ›å»ºé¡¹ç›®" class="headerlink" title="é¦–å…ˆä½¿ç”¨android studioåˆ›å»ºé¡¹ç›®"></a>é¦–å…ˆä½¿ç”¨android studioåˆ›å»ºé¡¹ç›®</h3><p>æœ€å¥½ä½ å·²ç»æ‹¥æœ‰äº†é¡¹ç›®æºç ï¼Œespressoå¹¶ä¸æ˜¯å•çº¯çš„é»‘ç›’uiæµ‹è¯•å·¥å…·ï¼Œå®ƒèƒ½å¹²å¾—äº‹æƒ…å¾ˆå¤šï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ï¼Œé›†æˆæµ‹è¯•ï¼Œç”šè‡³åœ¨mockæœåŠ¡ï¼Œä»¥åŠå°†ä½ éœ€è¦çš„å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­ï¼Œæ‰€ä»¥æˆ‘æŠŠç§°ä¸ºç°ç›’å·¥å…·ã€‚<br>å¦‚æœä¹‹å‰æ²¡æœ‰åšä¸ªandroidé¡¹ç›®çš„è¯ï¼Œä¹Ÿå¯ä»¥åœ¨githubä¸Šæ‰¾ä¸€äº›å¼€æºçš„android app ç»ƒæ‰‹ã€‚ä¸è¿‡å»ºè®®å¤§å®¶ä»espresso demoåº“å…¥æ‰‹ã€‚</p><h4 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h4><p><img src="/image/android_studio.png" alt="android_studio"></p><p>å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Œå¯¼å…¥å·²ç»å­˜åœ¨androidé¡¹ç›®ï¼Œä»ç‰ˆæœ¬ç®¡ç†è½¯ä»¶ä¸­å¯¼å…¥ï¼Œä»gradleç­‰å…¶ä»–å·¥å…·ä¸­å¯¼å…¥ï¼Œä»¥åŠè·å–androidä»£ç æ ·ä¾‹å¯¼å…¥ã€‚<br>google android æ‰€æœ‰çš„æµ‹è¯•demoéƒ½åœ¨ä»¥ä¸‹githubåœ°å€<br><a href="https://github.com/googlesamples/android-testing.git" target="_blank" rel="external">    https://github.com/googlesamples/android-testing.git</a><br>ä¸‹è½½å®Œæˆåï¼Œæˆ‘ä»¬è¿›å…¥espressoç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°espressoçš„demoè¿˜æ˜¯å¾ˆä¸°å¯Œçš„ã€‚<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"> lqi @ CNlqi-3 <span class="keyword">in</span> ~/work/<span class="built_in">test</span>/android/android-testing on git:master x [0:19:24]</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> ui/espresso</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> lqi @ CNlqi-3 <span class="keyword">in</span> ~/work/<span class="built_in">test</span>/android/android-testing/ui/espresso on git:master x [0:19:31]</span></div><div class="line"><span class="meta">$</span><span class="bash"> ls</span></div><div class="line">BasicSample           CustomMatcherSample   EspressoSpoonDemo     IntentsAdvancedSample MultiWindowSample     WebBasicSample</div><div class="line">BasicSampleBundled    DataAdapterSample     IdlingResourceSample  IntentsBasicSample    RecyclerViewSample    spoon-gradle-plugin</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> lqi @ CNlqi-3 <span class="keyword">in</span> ~/work/<span class="built_in">test</span>/android/android-testing/ui/espresso on git:master x [0:19:37]</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> BasicSample</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> lqi @ CNlqi-3 <span class="keyword">in</span> ~/work/<span class="built_in">test</span>/android/android-testing/ui/espresso/BasicSample on git:master x [0:19:40]</span></div><div class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">pwd</span></span></div><div class="line">/Users/lqi/work/test/android/android-testing/ui/espresso/BasicSample</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> lqi @ CNlqi-3 <span class="keyword">in</span> ~/work/<span class="built_in">test</span>/android/android-testing/ui/espresso/BasicSample on git:master x [0:20:42]</span></div><div class="line"><span class="meta">$</span><span class="bash"></span></div></pre></td></tr></table></figure></p><h4 id="å¯¼å…¥é¡¹ç›®"><a href="#å¯¼å…¥é¡¹ç›®" class="headerlink" title="å¯¼å…¥é¡¹ç›®"></a>å¯¼å…¥é¡¹ç›®</h4><p>é€‰æ‹©<code>BasicSample</code>å¯¼å…¥æˆ–è€…ç›´æ¥å‘½ä»¤è¡Œ<code>studio .</code>æ‰“å¼€è¯¥é¡¹ç›®ã€‚<br><img src="/image/android_menu.png" alt="android_menu">Â·<br>å¤–å±‚çš„build.gradleæ–‡ä»¶è®¾ç½®çš„æ˜¯æ•´ä¸ªé¡¹ç›®çš„ä¸€äº›é…ç½®,ä¾‹å¦‚ä¾èµ–çš„ç±»åº“ï¼Œè¿œç¨‹çš„ä»“åº“repositoriesã€‚ç¼–è¯‘å™¨çš„ç‰ˆæœ¬ï¼Œespressoçš„ç‰ˆæœ¬ç­‰ã€‚</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></div><div class="line"></div><div class="line"><span class="keyword">buildscript</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">dependencies</span> &#123;</div><div class="line">        <span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:2.1.2'</span></div><div class="line"></div><div class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></div><div class="line">        <span class="comment">// in the individual module build.gradle files</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">allprojects</span> &#123;</div><div class="line">    <span class="keyword">repositories</span> &#123;</div><div class="line">        jcenter()</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ext &#123;</div><div class="line">    buildToolsVersion = <span class="string">"24.0.1"</span></div><div class="line">    supportLibVersion = <span class="string">"24.2.0"</span></div><div class="line">    runnerVersion = <span class="string">"0.5"</span></div><div class="line">    rulesVersion = <span class="string">"0.5"</span></div><div class="line">    espressoVersion = <span class="string">"2.2.2"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><h4 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h4><p>appç›®å½•ä¸ºé¡¹ç›®ä¸»ç›®å½•åŒ…å«é¡¹ç›®æºä»£ç ä»¥åŠæµ‹è¯•ä»£ç <br>appé‡Œé¢ä¹ŸåŒ…å«build.gradleæ–‡ä»¶ï¼Œæœ‰æ—¶å€™é¡¹ç›®å¯èƒ½åŒ…å«å‡ ä¸ªä¸»ç›®å½•ï¼Œé‚£ä¹ˆå„ä¸ªç›®å½•çš„ä¸‹çš„build.gradleæ–‡ä»¶éƒ½ç»§æ‰¿è‡ªé¡¶å±‚çš„build.gradleæ–‡ä»¶ã€‚<br>appä¸‹çš„build.gradleæ–‡ä»¶é…ç½®äº†androidçš„é…ç½®ä¿¡æ¯ï¼Œä»¥åŠä¼šç”¨åˆ°çš„ä¾èµ–ã€‚</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">24</span></div><div class="line">    buildToolsVersion rootProject.buildToolsVersion</div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.example.android.testing.espresso.BasicSample"</span></div><div class="line">        minSdkVersion <span class="number">10</span></div><div class="line">        targetSdkVersion <span class="number">24</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></div><div class="line">    &#125;</div><div class="line">    lintOptions &#123;</div><div class="line">        abortOnError <span class="keyword">false</span></div><div class="line">    &#125;</div><div class="line">    productFlavors &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="comment">// App dependencies</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-annotations:'</span> + rootProject.supportLibVersion;</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.google.guava:guava:18.0'</span></div><div class="line">    <span class="comment">// Testing-only dependencies</span></div><div class="line">    <span class="comment">// Force usage of support annotations in the test app, since it is internally used by the runner module.</span></div><div class="line">    androidTestCompile <span class="string">'com.android.support:support-annotations:'</span> + rootProject.supportLibVersion;</div><div class="line">    androidTestCompile <span class="string">'com.android.support.test:runner:'</span> + rootProject.runnerVersion;</div><div class="line">    androidTestCompile <span class="string">'com.android.support.test:rules:'</span> + rootProject.rulesVersion;</div><div class="line">    androidTestCompile <span class="string">'com.android.support.test.espresso:espresso-core:'</span> + rootProject.espressoVersion;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>BasicSample APPå°±é•¿æ ·å­ã€‚<br><img src="/image/å¯åŠ¨espresso.png" alt="å¯åŠ¨espresso"></p><h4 id="å¯åŠ¨æ¨¡æ‹Ÿå™¨"><a href="#å¯åŠ¨æ¨¡æ‹Ÿå™¨" class="headerlink" title="å¯åŠ¨æ¨¡æ‹Ÿå™¨"></a>å¯åŠ¨æ¨¡æ‹Ÿå™¨</h4><p>é¦–å…ˆå¯åŠ¨android emulator/genymotion,ä¹‹åç›´æ¥ç‚¹å‡»runæŒ‰é’®å°±èƒ½éƒ¨ç½²appåˆ°æ¨¡æ‹Ÿå™¨ä¸Šã€‚<br>logå¦‚ä¸‹.<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Testing started at <span class="number">2</span>:<span class="number">32</span> PM ...</div><div class="line"></div><div class="line"><span class="number">12</span>/<span class="number">09</span> <span class="number">14</span>:<span class="number">32</span>:<span class="number">04</span>: Launching ChangeTextBehaviorTe...</div><div class="line">$ adb push /Users/lqi/work/test/android/android-testing/ui/espresso/BasicSample/app/build/outputs/apk/app-debug<span class="selector-class">.apk</span> /data/local/tmp/com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.testing</span><span class="selector-class">.espresso</span><span class="selector-class">.BasicSample</span></div><div class="line">$ adb shell pm install -r <span class="string">"/data/local/tmp/com.example.android.testing.espresso.BasicSample"</span></div><div class="line">pkg: /data/local/tmp/com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.testing</span><span class="selector-class">.espresso</span><span class="selector-class">.BasicSample</span></div><div class="line">Success</div><div class="line"></div><div class="line"></div><div class="line">$ adb push /Users/lqi/work/test/android/android-testing/ui/espresso/BasicSample/app/build/outputs/apk/app-debug-androidTest-unaligned<span class="selector-class">.apk</span> /data/local/tmp/com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.testing</span><span class="selector-class">.espresso</span><span class="selector-class">.BasicSample</span><span class="selector-class">.test</span></div><div class="line">$ adb shell pm install -r <span class="string">"/data/local/tmp/com.example.android.testing.espresso.BasicSample.test"</span></div><div class="line">pkg: /data/local/tmp/com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.testing</span><span class="selector-class">.espresso</span><span class="selector-class">.BasicSample</span><span class="selector-class">.test</span></div><div class="line">Success</div><div class="line"></div><div class="line"></div><div class="line">Running tests</div><div class="line"></div><div class="line">$ adb shell am instrument -w -r   -e debug false -e class com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.testing</span><span class="selector-class">.espresso</span><span class="selector-class">.BasicSample</span><span class="selector-class">.ChangeTextBehaviorTest</span> com<span class="selector-class">.example</span><span class="selector-class">.android</span><span class="selector-class">.testing</span><span class="selector-class">.espresso</span><span class="selector-class">.BasicSample</span><span class="selector-class">.test</span>/android<span class="selector-class">.support</span><span class="selector-class">.test</span><span class="selector-class">.runner</span><span class="selector-class">.AndroidJUnitRunner</span></div><div class="line">Client not ready yet..</div><div class="line">Started running tests</div><div class="line">Tests ran to completion.</div></pre></td></tr></table></figure></p><h4 id="ç¼–å†™æµ‹è¯•"><a href="#ç¼–å†™æµ‹è¯•" class="headerlink" title="ç¼–å†™æµ‹è¯•"></a>ç¼–å†™æµ‹è¯•</h4><p>æ­¤å®ä¾‹BasicSampleåŒ…å«1ä¸ªtextView,1ä¸ªEditTextå’Œ2ä¸ªbuttonï¼Œå½“ç‚¹å‡»change text æŒ‰é’®æ—¶ï¼Œä¼šå°†edittextçš„å€¼å¡«å…¥textviewä¸­ã€‚å½“ç‚¹å‡»open activity and change text æŒ‰é’®æ—¶ï¼Œå°†æ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢ï¼ˆå§‘ä¸”å«è¿™æ ·å§ï¼‰å¹¶å°†edittextå†…å®¹æ˜¾ç¤ºåœ¨è¿™ä¸ªé¡µé¢ã€‚<br><code>@RunWith(AndroidJUnit4.class)</code><br>é‡‡ç”¨äº†JUnit 4é£æ ¼è¿›è¡Œç¼–å†™</p><ul><li>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±»ã€‚<br><code>ChangeTextBehaviorTest</code></li></ul><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChangeTextBehaviorTest</span> </span>&#123;  </div><div class="line">  &#125;</div></pre></td></tr></table></figure><ul><li>é¦–å…ˆåˆ›å»ºä¸€ä¸ª@Rule,ActivityTestRuleç”¨æ¥æŒ‡æ˜è¢«æµ‹è¯•çš„Activity;<br>@Rule: ç®€å•æ¥è¯´ï¼Œæ˜¯ä¸ºå„ä¸ªæµ‹è¯•æ–¹æ³•æä¾›ä¸€äº›æ”¯æŒã€‚å…·ä½“æ¥è¯´ï¼Œæ¯”å¦‚æˆ‘éœ€è¦æµ‹è¯•ä¸€ä¸ªActivityï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥åœ¨@Ruleæ³¨è§£ä¸‹é¢é‡‡ç”¨ä¸€ä¸ªActivityTestRuleï¼Œè¯¥ç±»æä¾›äº†å¯¹ç›¸åº”Activityçš„åŠŸèƒ½æµ‹è¯•çš„æ”¯æŒã€‚è¯¥ç±»å¯ä»¥åœ¨@Beforeå’Œ@Testæ ‡è¯†çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰ç¡®ä¿å°†Activityè¿è¡Œèµ·æ¥ï¼Œå¹¶ä¸”åœ¨æ‰€æœ‰@Testå’Œ@Afteræ–¹æ³•æ‰§è¡Œç»“æŸä¹‹åå°†Activityæ€æ­»ã€‚åœ¨æ•´ä¸ªæµ‹è¯•æœŸé—´ï¼Œæ¯ä¸ªæµ‹è¯•æ–¹æ³•éƒ½å¯ä»¥ç›´æ¥å¯¹ç›¸åº”Activityè¿›è¡Œä¿®æ”¹å’Œè®¿é—®ã€‚</li></ul><figure class="highlight d"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">@Rule</span></div><div class="line">       <span class="keyword">public</span> ActivityTestRule&lt;MainActivity&gt; mActivityRule = <span class="keyword">new</span> ActivityTestRule&lt;&gt;(</div><div class="line">           MainActivity.<span class="keyword">class</span>);</div></pre></td></tr></table></figure><ul><li>æ ‡è¯†ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ã€‚ä¸€ä¸ªæµ‹è¯•ç±»ä¸­å¯ä»¥æœ‰å¤šä¸ªæµ‹è¯•æ–¹æ³•ï¼Œæ¯ä¸ªæµ‹è¯•æ–¹æ³•éœ€è¦ç”¨ä¸€ä¸ª@Testæ³¨è§£æ¥æ ‡è¯†ã€‚<br>ä»¥ä¸‹ä»£ç æ‰¾åˆ°editTextUserInputè¾“å…¥â€˜Espressoâ€™ï¼Œå…³é—­é”®ç›˜ã€‚ç‚¹å‡»changeTextBtæŒ‰é’®ã€‚æ£€æŸ¥textToBeChangedçš„å€¼æ˜¯å¦ä¸ºâ€˜Espressoâ€™ã€‚<figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@Test</span></div><div class="line">public void changeText_sameActivity() &#123;</div><div class="line">    <span class="comment">// Type text and then press the button.</span></div><div class="line">    <span class="selector-tag">onView</span>(withId(R.id.editTextUserInput))</div><div class="line">            <span class="selector-class">.perform</span>(typeText(STRING_TO_BE_TYPED), closeSoftKeyboard());</div><div class="line">    <span class="selector-tag">onView</span>(withId(R.id.changeTextBt))<span class="selector-class">.perform</span>(click());</div><div class="line"></div><div class="line">    <span class="comment">// Check that the text was changed.</span></div><div class="line">    <span class="selector-tag">onView</span>(withId(R.id.textToBeChanged))<span class="selector-class">.check</span>(matches(withText(STRING_TO_BE_TYPED)));</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><p>é¡ºä¾¿è¯´è¯´å…¶ä»–junit4æ³¨è§£çš„ç”¨æ³•</p><pre><code>@Before: æ ‡è¯†åœ¨è¿è¡Œæµ‹è¯•æ–¹æ³•ä¹‹å‰è¿è¡Œçš„ä»£ç ã€‚å¯ä»¥æ”¯æŒåŒä¸€ä¸ªClassä¸­æœ‰å¤šä¸ª@Beforeï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•çš„æ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„ã€‚è¯¥æ³¨è§£æ›¿ä»£äº†JUnit 3ä¸­çš„setUp()æ–¹æ³•ã€‚@After: æ ‡è¯†åœ¨è¿è¡Œæµ‹è¯•æ–¹æ³•ç»“æŸä¹‹åè¿è¡Œçš„ä»£ç ã€‚å¯ä»¥åœ¨å…¶ä¸­åšä¸€äº›é‡Šæ”¾èµ„æºçš„æ“ä½œã€‚è¯¥æ³¨è§£æ›¿ä»£äº†JUnit 3ä¸­çš„tearDown()æ–¹æ³•ã€‚@BeforeClass: ä¸ºæµ‹è¯•ç±»æ ‡è¯†ä¸€ä¸ªstaticæ–¹æ³•ï¼Œåœ¨æµ‹è¯•ä¹‹å‰åªæ‰§è¡Œä¸€æ¬¡ã€‚@AfterClass: ä¸ºæµ‹è¯•ç±»æ ‡è¯†ä¸€ä¸ªstaticæ–¹æ³•ï¼Œåœ¨æ‰€æœ‰æµ‹è¯•æ–¹æ³•ç»“æŸä¹‹ååªæ‰§è¡Œä¸€æ¬¡ã€‚@Test(timeout=&lt;milliseconds&gt;): ä¸ºæµ‹è¯•æ–¹æ³•è®¾å®šè¶…æ—¶æ—¶é—´ã€‚</code></pre><p>åˆ°äº†è¿™é‡Œæˆ‘ä»¬è¦è¯´ä¸‹æ€ä¹ˆå®šä½æ‰€éœ€çš„å…ƒç´ ï¼Œå…¶å®å’Œwebå·®ä¸å¤šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨layout inspectorä¸android device monitorå·¥å…·ã€‚<br><img src="/image/android_device_monitor.png" alt="android_device_monitor"><br><img src="/image/android_layout_inspector.png" alt="android_device_monitor"><br>åœ¨å†™ä¸€ä¸ªæµ‹è¯•ï¼Œåœ¨editTextUserInputè¾“å…¥â€˜Espressoâ€™ï¼Œä¹‹åå…³é—­é”®ç›˜ã€‚ç‚¹å‡»activityChangeTextBtnæŒ‰é’®ï¼ŒæŸ¥çœ‹show_text_viewçš„å€¼æ˜¯å¦ä¸ºâ€˜Espressoâ€™ã€‚<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@Test</span></div><div class="line">  public void changeText_newActivity() &#123;</div><div class="line">      <span class="comment">// Type text and then press the button.</span></div><div class="line">      <span class="selector-tag">onView</span>(withId(R.id.editTextUserInput))<span class="selector-class">.perform</span>(typeText(STRING_TO_BE_TYPED),</div><div class="line">              closeSoftKeyboard());</div><div class="line">      <span class="selector-tag">onView</span>(withId(R.id.activityChangeTextBtn))<span class="selector-class">.perform</span>(click());</div><div class="line"></div><div class="line">      <span class="comment">// This view is in a different Activity, no need to tell Espresso.</span></div><div class="line">      <span class="selector-tag">onView</span>(withId(R.id.show_text_view))<span class="selector-class">.check</span>(matches(withText(STRING_TO_BE_TYPED)));</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p><p>ä»¥ä¸Šæ˜¯espressoæœ€å¸¸è§çš„æµ‹è¯•ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿå¥½å¥½ç†è§£ã€‚</p><h3 id="æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹espressoå¦‚ä½•å¯¹AdapterViewæ§åˆ¶å™¨æµ‹è¯•ã€‚"><a href="#æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹espressoå¦‚ä½•å¯¹AdapterViewæ§åˆ¶å™¨æµ‹è¯•ã€‚" class="headerlink" title="æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹espressoå¦‚ä½•å¯¹AdapterViewæ§åˆ¶å™¨æµ‹è¯•ã€‚"></a>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹espressoå¦‚ä½•å¯¹AdapterViewæ§åˆ¶å™¨æµ‹è¯•ã€‚</h3><p>â€‹AdapterViewâ€‹ æ˜¯ä¸€ä¸ªä»é€‚é…å™¨ä¸­åŠ¨æ€åŠ è½½æ•°æ®çš„ç‰¹æ®Šæ§ä»¶ã€‚æœ€å¸¸è§çš„ â€‹AdapterViewâ€‹ æ˜¯ ListViewâ€‹ã€‚ä¸åƒ â€‹LinearLayoutâ€‹ è¿™æ ·çš„é™æ€æ§ä»¶ç›¸åï¼Œåœ¨å½“å‰è§†å›¾ç»“æ„ä¸­ï¼Œå¯èƒ½åªåŠ è½½äº† â€‹AdapterViewâ€‹ å­æ§ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œ ç®€å•çš„ â€‹onview()â€‹ å¯èƒ½ä¼šæ‰¾ä¸åˆ°å½“å‰æ²¡æœ‰è¢«åŠ è½½çš„è§†å›¾ã€‚Espresso é€šè¿‡æä¾›å•ç‹¬çš„ onData()â€‹æ–¹æ³•æ¥åˆ‡å…¥ç‚¹å¤„ç†æ­¤é—®é¢˜ï¼Œå®ƒå¯ä»¥åœ¨æ“ä½œé€‚é…å™¨ä¸­æœ‰è¯¥é—®é¢˜çš„æ¡ç›®æˆ–è¯¥æ¡ç›®çš„å­é¡¹ä¹‹å‰å°†å…¶åŠ è½½ï¼ˆä½¿å…¶è·å–ç„¦ç‚¹ï¼‰ã€‚<br>å¯¼å…¥espresso demoä¸­çš„MultiWindowSampleé¡¹ç›®<br>è¯¥æµ‹è¯•æ˜¯ä»ArrayAdapterç±»å‹çš„dropdown_itemæ§ä»¶ä¸­é€‰å‡ºéœ€è¦çš„å€¼ï¼Œç±»ä¼¼æˆ‘ä»¬ç”¨æœç´¢å¼•æ“æ—¶ï¼Œæ˜¾ç¤ºçš„listã€‚<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@Test</span></div><div class="line">   public void autoCompleteTextView_onDataClickAndCheck() &#123;</div><div class="line">       <span class="comment">// NB: The autocompletion box is implemented with a ListView, so the preferred way</span></div><div class="line">       <span class="comment">// to interact with it is onData(). We can use inRoot here too!</span></div><div class="line">       <span class="selector-tag">onView</span>(withId(R.id.auto_complete_text_view))</div><div class="line">               <span class="selector-class">.perform</span>(typeText(<span class="string">"S"</span>), closeSoftKeyboard());</div><div class="line"></div><div class="line">       <span class="comment">// This is useful because some of the completions may not be part of the View Hierarchy</span></div><div class="line">       <span class="comment">// unless you scroll around the list.</span></div><div class="line">       <span class="selector-tag">onData</span>(allOf(instanceOf(String.class), is(<span class="string">"Baltic Sea"</span>)))</div><div class="line">               <span class="selector-class">.inRoot</span>(withDecorView(not(is(mActivity.getWindow().getDecorView()))))</div><div class="line">               <span class="selector-class">.perform</span>(click());</div><div class="line"></div><div class="line">       <span class="comment">// The text should be filled in.</span></div><div class="line">       <span class="selector-tag">onView</span>(withId(R.id.auto_complete_text_view))</div><div class="line">               <span class="selector-class">.check</span>(matches(withText(<span class="string">"Baltic Sea"</span>)));</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p><p>ï¼ŒAutoCompleteTextçš„é€‰æ‹©ç­‰ã€‚ è¿™äº›æµ‹è¯•é¡¹éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ã€‚å³ä¸åœ¨ä¸»UIå¸ƒå±€çš„ç»“æ„(layout,åŠå…¶includeçš„layout)ä¹‹ä¸­ï¼Œæ˜¯ä¸èƒ½ç›´æ¥å®šä½çš„ã€‚ æ‰€ä»¥è¿™é‡Œå°±éœ€è¦ä½¿ç”¨inRoot( ) äº†ã€‚<br><code>onData(allOf(instanceOf(String.class), is(&quot;Baltic Sea&quot;)))        .inRoot(withDecorView(not(is(mActivity.getWindow().getDecorView()))))        .perform(click());</code><br>ä»¥ä¸Šä»£ç å°±è§£å†³äº†ä¹‹å‰UiAutomatorä¸æ”¯æŒToastçš„éªŒè¯çš„é—®é¢˜ã€‚</p><h3 id="è¿è¡Œæµ‹è¯•"><a href="#è¿è¡Œæµ‹è¯•" class="headerlink" title="è¿è¡Œæµ‹è¯•"></a>è¿è¡Œæµ‹è¯•</h3><p>è¿è¡Œæµ‹è¯•çš„æ–¹æ³•å¾ˆå¤šï¼Œç¬¬ä¸€ç§å‘½ä»¤è¡Œæ‰§è¡Œã€‚<br>åˆ‡æ¢åˆ°å½“å‰é¡¹ç›®ç›®å½•ï¼Œç»ˆç«¯è¿è¡Œ<br><code>./gradlew cAT</code><br>å…¶ä¸­ï¼ŒcATæ„ä¸ºconnectedAndroidTestã€‚</p><p>å¦ä¸€ç§æ–¹å¼æ˜¯åœ¨android studioä¸­ï¼Œç‚¹å‡»runæŒ‰é’®ï¼Œæˆ–è€…å³é”®æ‰§è¡Œå•ä¸€æµ‹è¯•ã€‚<br><img src="/image/android_test.png" alt="android_device_monitor"></p><p>è¿™ä¸€ç« è¿˜æ˜¯ä»¥åŸºç¡€çš„å®è·µä¸ºä¸»ï¼Œä¹‹åæˆ‘ä»¬å°†æ·±å…¥æ¶æ„ï¼Œæ¥çœ‹çœ‹espressoçš„API æ–¹æ³•ï¼Œå¸®åŠ©å¤§å®¶ç†è§£API æ›´å¥½æ›´å¿«çš„ç¼–å†™æµ‹è¯•ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å‰2ç¯‡æˆ‘ä»¬å·²ç»è¯¦ç»†ä»‹ç»äº†espressoçš„æ¶æ„ä»¥åŠç›¸åº”çš„APIï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿæœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œç†è®ºè®²çš„å†å¤šï¼Œè¿˜æ˜¯ä¸å¦‚æ‰‹ä¸Šè‡ªå·±æ•²ä¸€éä»£ç ã€‚&lt;br&gt;
      
    
    </summary>
    
    
      <category term="androidè‡ªåŠ¨åŒ–" scheme="http://yoursite.com/tags/android%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ</title>
    <link href="http://yoursite.com/2016/12/02/espresso2/"/>
    <id>http://yoursite.com/2016/12/02/espresso2/</id>
    <published>2016-12-02T03:57:43.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ"><a href="#espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ" class="headerlink" title="espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ"></a>espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ</h2><p>Espressoæµ‹è¯•æ¡†æ¶æä¾›äº†ä¸€ç»„APIæ¥æ„å»ºUIæµ‹è¯•ï¼Œä»¥æµ‹è¯•åº”ç”¨ç¨‹åºå†…çš„ç”¨æˆ·æµã€‚ è¿™äº›APIè®©æ‚¨èƒ½å¤Ÿç¼–å†™ç®€æ´ï¼Œè¿è¡Œå¯é çš„è‡ªåŠ¨åŒ–UIæµ‹è¯•ã€‚ Espressoéå¸¸é€‚åˆç¼–å†™ç™½ç›’å¼è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå…¶ä¸­æµ‹è¯•ä»£ç ä½¿ç”¨æ¥è‡ªæ‰€æµ‹è¯•çš„åº”ç”¨ç¨‹åºçš„å®ç°ä»£ç ç»†èŠ‚ã€‚</p><p>Espressoæµ‹è¯•æ¡†æ¶çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><p>ç”¨äºåœ¨ç›®æ ‡åº”ç”¨ç¨‹åºä¸­æŸ¥çœ‹å’Œé€‚é…å™¨åŒ¹é…çš„çµæ´»APIã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#espresso-matching" target="_blank" rel="external">View matching</a>ã€‚<br>ä¸€ç»„å¹¿æ³›çš„æ“ä½œAPIï¼Œç”¨äºè‡ªåŠ¨åŒ–UIäº¤äº’ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#espresso-actions" target="_blank" rel="external"> Action APIs</a>ã€‚<br>UIçº¿ç¨‹åŒæ­¥æé«˜æµ‹è¯•çš„å¯é æ€§ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#espresso-thread-sync" target="_blank" rel="external">UI thread synchronization</a>ã€‚<br>å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥ â€‹ViewInteraction.check()â€‹æ–¹æ³•ä¸­çš„ ViewAssertion çš„é›†åˆã€‚é€šå¸¸ï¼Œä½ ä¼šä½¿ç”¨å¸¦æœ‰è§†å›¾åŒ¹é…å™¨çš„åŒ¹é…æ–­è¨€æ¥åˆ¤æ–­å½“å‰è¢«é€‰ä¸­è§†å›¾çš„çŠ¶æ€ï¼Œè¯·å‚é˜…<a href="https://developer.android.com/reference/android/support/test/espresso/assertion/package-summary.html" target="_blank" rel="external">ViewAssertions</a><br>éœ€è¦Android 2.2ï¼ˆAPIçº§åˆ«8ï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p><h2 id="View-matching"><a href="#View-matching" class="headerlink" title="View matching"></a>View matching</h2><h3 id="onView"><a href="#onView" class="headerlink" title="onView()"></a>onView()</h3><p>Espresso.onView()æ–¹æ³•å…è®¸æ‚¨è®¿é—®ç›®æ ‡åº”ç”¨ç¨‹åºä¸­çš„UIç»„ä»¶å¹¶ä¸å…¶è¿›è¡Œäº¤äº’ã€‚ è¯¥æ–¹æ³•æ¥å—Matcherå‚æ•°å¹¶æœç´¢è§†å›¾å±‚æ¬¡ä»¥å®šä½æ»¡è¶³æŸäº›ç»™å®šæ ‡å‡†çš„å¯¹åº”Viewå®ä¾‹ã€‚ æ‚¨å¯ä»¥é€šè¿‡æŒ‡å®šä»¥ä¸‹æ¡ä»¶æ¥ä¼˜åŒ–æœç´¢ï¼š</p><ul><li>è§†å›¾çš„ç±»å</li><li>è§†å›¾çš„å†…å®¹æè¿°</li><li>è§†å›¾çš„R.id</li><li>è§†å›¾ä¸­æ˜¾ç¤ºçš„æ–‡æœ¬<br>ä¾‹å¦‚ï¼Œè¦å®šä½IDå€¼ä¸ºmy_buttonçš„æŒ‰é’®ï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ¹é…å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</li></ul><p><code>onViewï¼ˆwithIdï¼ˆR.id.my_buttonï¼‰ï¼‰;</code><br>å¦‚æœæœç´¢æˆåŠŸï¼ŒonView()æ–¹æ³•è¿”å›ä¸€ä¸ªå¼•ç”¨ï¼Œè¯¥å¼•ç”¨å…è®¸æ‚¨å¯¹ç›®æ ‡è§†å›¾æ‰§è¡Œç”¨æˆ·æ“ä½œå’Œæµ‹è¯•æ–­è¨€ã€‚</p><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function">ViewInteraction <span class="title">onView</span><span class="params">(<span class="keyword">final</span> Matcher&lt;View&gt; viewMatcher)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> BASE.plus(<span class="keyword">new</span> ViewInteractionModule(viewMatcher)).viewInteraction();</div><div class="line"> &#125;</div></pre></td></tr></table></figure><h4 id="ViewMatchers"><a href="#ViewMatchers" class="headerlink" title="ViewMatchers"></a>ViewMatchers</h4><p>onViewæ–¹æ³•éœ€è¦ä¼ å…¥ç±»å‹ä¸ºMatcher<view>æ³›å‹viewMatcherå¯¹è±¡.</view></p><p>ViewMatchersç±»ä¸­æ–¹æ³•æœ‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">isAssignableFromï¼ŒwithClassNameï¼ŒisDisplayedï¼ŒisCompletelyDisplayedï¼ŒisDisplayingAtLeastï¼ŒisEnabledï¼ŒisFocusableï¼ŒhasFocusï¼ŒisSelectedï¼ŒhasSiblingï¼ŒwithContentDescriptionï¼ŒwithContentDescriptionï¼ŒwithContentDescriptionï¼ŒwithIdï¼ŒwithResourceNameï¼ŒwithTagKeyï¼ŒwithTagValueï¼ŒwithTextï¼ŒwithCharSequenceï¼ŒwithHintï¼ŒisCheckedï¼ŒisNotCheckedï¼ŒwithCheckBoxStateï¼ŒhasContentDescriptionï¼ŒhasDescendantï¼ŒisClickableï¼ŒisDescendantOfAï¼ŒwithEffectiveVisibilityï¼ŒwithParentï¼ŒwithChildï¼ŒisRootï¼ŒsupportsInputMethodsï¼ŒhasImeActionï¼ŒhasImeActionï¼ŒhasLinksï¼ŒassertThatï¼ŒwithSpinnerTextï¼ŒisJavascriptEnabledï¼ŒhasErrorTextï¼ŒwithInputTypeã€‚</div></pre></td></tr></table></figure></p><p> è¿™äº›æ–¹æ³•èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½åˆ°ç‰¹å®šçš„è§†å›¾ã€‚<br> æˆ‘ä»¬æ¥çœ‹çœ‹å¸¸ç”¨çš„å‡ ä¸ªæ–¹æ³•<br> withId<br> è¿”å›åŸºäºèµ„æºidsåŒ¹é…è§†å›¾çš„åŒ¹é…å™¨ã€‚<br> withText<br> è¿”å›åŸºäºTextViewçš„æ–‡æœ¬å±æ€§å€¼åŒ¹é…TextViewçš„åŒ¹é…å™¨ã€‚<br><code>onView(allOf(withId(R.id.my_view), withText(&quot;Hello!&quot;)))</code><br> isDisplayed<br> è¿”å›ä¸å½“å‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„è§†å›¾åŒ¹é…çš„åŒ¹é…å™¨ç»™ç”¨æˆ·ã€‚<br> å¦‚ä¸‹</p><p> <code>Espresso.onView(ViewMatchers.withId(R.id.mpu_summary_send_receipt_button))          .check(ViewAssertions.matches(ViewMatchers.isDisplayed()));</code><br>å…¶ä»–APIæ–¹æ³•å¯ä»¥åœ¨ä»¥ä¸‹æ–‡æ¡£ä¸­æ‰¾åˆ°å…·ä½“ç”¨æ³•å’Œè§£é‡Šï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è®°ä½æ¯ä¸ªæ–¹æ³•ï¼Œé‡åˆ°å…·ä½“çš„åœºæ™¯çš„æ—¶å€™å†è¿‡æ¥æŸ¥è¯¢ä¹Ÿæ¥å¾—åŠ<br><a href="https://developer.android.com/reference/android/support/test/espresso/matcher/ViewMatchers.html" target="_blank" rel="external">viewmatchers-API</a></p><h4 id="ViewMatchersä¸hamcreståŒ¹é…å™¨é…åˆä½¿ç”¨"><a href="#ViewMatchersä¸hamcreståŒ¹é…å™¨é…åˆä½¿ç”¨" class="headerlink" title="ViewMatchersä¸hamcreståŒ¹é…å™¨é…åˆä½¿ç”¨"></a>ViewMatchersä¸hamcreståŒ¹é…å™¨é…åˆä½¿ç”¨</h4><p><strong>ä»€ä¹ˆæ˜¯hamcrestï¼Ÿ</strong></p><p>Hamcrestæ¡†æ¶æ˜¯junit4æ¡†æ¶æ–°å¼•å…¥çš„æ–­è¨€æ¡†æ¶ï¼ŒHamcestæä¾›äº†ä¸€å¥—åŒ¹é…ç¬¦Matcherï¼Œè¿™äº›åŒ¹é…ç¬¦æ›´æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œå¯è¯»æ€§é«˜ï¼Œæ›´åŠ çµæ´»ã€‚<br>æˆ‘ä»¬å¯ä»¥é€šè¿‡å„ç§viewmatchersä¸Hamcrestç»„åˆåŒ¹é…å™¨æ¥ç¼©å°æœç´¢çš„èŒƒå›´ã€‚<br>å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š</p><p><code>onView(allOf(withId(R.id.button_signin), withText(&quot;Sign-in&quot;)));</code></p><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ â€‹notâ€‹ åè½¬åŒ¹é…ï¼š</p><p><code>onView(allOf(withId(R.id.button_signin), not(withText(&quot;Sign-out&quot;))));</code><br><strong>æ³¨æ„ï¼š</strong><br>ä¸€ä¸ªå·¥ç¨‹åŒ–çš„åº”ç”¨ä¸­ï¼Œæ‰€æœ‰ç”¨æˆ·å¯ä¸ä¹‹äº¤äº’çš„è§†å›¾éƒ½åº”è¯¥åŒ…å«è¯´æ˜æ–‡å­—æˆ–æœ‰ä¸€ä¸ªå†…å®¹æè¿°ï¼ˆå‚è€ƒ Android å¯è®¿é—®æ€§æŒ‡å¯¼ï¼‰ã€‚å¦‚æœä½ ä¸èƒ½é€šè¿‡ä½¿ç”¨ â€˜withTextâ€™ æˆ– â€˜withContentDescripitonâ€™ æ¥ç¼©å°onViewçš„æœç´¢èŒƒå›´ï¼Œå¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå¯è®¿é—®æ€§çš„ bugã€‚</p><p>è¯·ä½¿ç”¨æœ€å°‘çš„åŒ¹é…å™¨æ¥å®šä½è§†å›¾ã€‚ä¸è¦è¿‡æŒ‡å®šï¼Œå› ä¸ºè¿™å°†å¼ºåˆ¶æ¡†æ¶åšæ— ç”¨åŠŸã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªè§†å›¾å¯ä»¥é€šè¿‡å®ƒçš„æ–‡å­—å”¯ä¸€ç¡®å®šï¼Œä½ ä¸éœ€è¦è¯´æ˜è¯¥è§†å›¾ä¹Ÿå¯ä»¥é€šè¿‡ â€‹TextViewâ€‹ æŒ‡å®šã€‚å¯¹è®¸å¤šè§†å›¾è€Œè¨€ï¼Œä½¿ç”¨å®ƒçš„â€‹R.idâ€‹å€¼å°±è¶³å¤Ÿäº†ã€‚</p><p>æ›´å¤šçš„hamcrest apiè¯·æŸ¥çœ‹<br><a href="http://hamcrest.org/JavaHamcrest/javadoc/1.3/" target="_blank" rel="external">hamcrest api</a></p><p>###onData<br>å½“espressoåœ¨AdapterViewä¸­æŸ¥æ‰¾è§†å›¾æ—¶éœ€è¦ç”¨onDataæ–¹æ³•ï¼Œä¾‹å¦‚åœ¨AdapterViewå°éƒ¨ä»¶ä¸­ï¼Œè§†å›¾åœ¨è¿è¡Œæ—¶åŠ¨æ€å¡«å……å­è§†å›¾ã€‚å¦‚æœè¦æµ‹è¯•çš„ç›®æ ‡è§†å›¾ä½äºAdapterViewï¼ˆä¾‹å¦‚ListViewï¼ŒGridViewæˆ–Spinnerï¼‰ä¸­ï¼Œåˆ™onView()æ–¹æ³•å¯èƒ½æ— æ³•å·¥ä½œï¼Œå› ä¸ºåªæœ‰ä¸€éƒ¨åˆ†è§†å›¾å¯èƒ½ä¼šåŠ è½½åˆ°å½“å‰è§†å›¾å±‚æ¬¡ç»“æ„ä¸­ã€‚</p><p>ç›¸åï¼Œè°ƒç”¨onData()æ–¹æ³•å¯è·å–DataInteractionå¯¹è±¡ä»¥è®¿é—®ç›®æ ‡è§†å›¾å…ƒç´ ã€‚ Espressoå¤„ç†å°†ç›®æ ‡è§†å›¾å…ƒç´ åŠ è½½åˆ°å½“å‰è§†å›¾å±‚æ¬¡ç»“æ„ä¸­ã€‚ Espressoè¿˜è´Ÿè´£æ»šåŠ¨åˆ°ç›®æ ‡å…ƒç´ ï¼Œå¹¶å°†æ”¾åœ¨ç„¦ç‚¹å…ƒç´ ã€‚</p><p>æ³¨æ„ï¼šonData()æ–¹æ³•ä¸æ£€æŸ¥æ‚¨æŒ‡å®šçš„é¡¹ç›®æ˜¯å¦ä¸è§†å›¾å¯¹åº”ã€‚ Espressoä»…æœç´¢å½“å‰è§†å›¾å±‚æ¬¡ç»“æ„ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…ï¼Œè¯¥æ–¹æ³•å°†æŠ›å‡ºNoMatchingViewExceptionå¼‚å¸¸ã€‚</p><p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨onData()æ–¹æ³•å’ŒHamcreståŒ¹é…æ¥æœç´¢åŒ…å«ç»™å®šå­—ç¬¦ä¸²çš„åˆ—è¡¨ä¸­çš„ç‰¹å®šè¡Œã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒLongListActivityç±»åŒ…å«é€šè¿‡SimpleAdapterå…¬å¼€çš„å­—ç¬¦ä¸²åˆ—è¡¨ã€‚</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">onData(<span class="name">allOf</span>(<span class="name">is</span>(<span class="name">instanceOf</span>(<span class="name">Map</span>.class)),</div><div class="line">        hasEntry(<span class="name">equalTo</span>(<span class="name">LongListActivity</span>.ROW_TEXT), is(<span class="string">"test input"</span>)))<span class="comment">;</span></div></pre></td></tr></table></figure><h2 id="Performing-Actions"><a href="#Performing-Actions" class="headerlink" title="Performing Actions"></a>Performing Actions</h2><p>è°ƒç”¨ViewInteraction.perform()æˆ–DataInteraction.perform()æ–¹æ³•æ¥æ¨¡æ‹ŸUIç»„ä»¶ä¸Šçš„ç”¨æˆ·äº¤äº’ã€‚æ‚¨å¿…é¡»ä¼ å…¥ä¸€ä¸ªæˆ–å¤šä¸ªViewActionå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚EspressoæŒ‰ç…§ç»™å®šçš„é¡ºåºä¾æ¬¡è§¦å‘æ¯ä¸ªåŠ¨ä½œï¼Œå¹¶åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œå®ƒä»¬ã€‚<br>ViewActionsç±»æä¾›äº†æŒ‡å®šå¸¸ç”¨æ“ä½œçš„å¸®åŠ©æ–¹æ³•åˆ—è¡¨ã€‚æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•ä½œä¸ºæ–¹ä¾¿çš„å¿«æ·æ–¹å¼ï¼Œè€Œä¸æ˜¯åˆ›å»ºå’Œé…ç½®å•ä¸ªViewActionå¯¹è±¡ã€‚æ‚¨å¯ä»¥æŒ‡å®šä»¥ä¸‹æ“ä½œï¼š</p><ul><li>ViewActions.click()ï¼šç‚¹å‡»è§†å›¾ã€‚</li><li>ViewActions.typeText()ï¼šç‚¹å‡»è§†å›¾å¹¶è¾“å…¥æŒ‡å®šçš„å­—ç¬¦ä¸²ã€‚</li><li>ViewActions.scrollTo()ï¼šæ»šåŠ¨åˆ°è§†å›¾ã€‚ç›®æ ‡è§†å›¾å¿…é¡»æ˜¯æ¥è‡ªScrollViewçš„å­ç±»ï¼Œå®ƒçš„androidï¼švisibilityå±æ€§çš„å€¼å¿…é¡»æ˜¯VISIBLEã€‚å¯¹äºæ‰©å±•AdapterViewï¼ˆä¾‹å¦‚ï¼ŒListViewï¼‰çš„è§†å›¾ï¼ŒonData()æ–¹æ³•ä¸ºæ‚¨å¤„ç†æ»šåŠ¨ã€‚</li><li>ViewActions.pressKey()ï¼šä½¿ç”¨æŒ‡å®šçš„é”®ç æ‰§è¡Œé”®æŒ‰ä¸‹ã€‚</li><li>ViewActions.clearText()ï¼šæ¸…é™¤ç›®æ ‡è§†å›¾ä¸­çš„æ–‡æœ¬ã€‚<br>å¦‚æœç›®æ ‡è§†å›¾ä½äºScrollViewå†…éƒ¨ï¼Œè¯·å…ˆæ‰§è¡ŒViewActions.scrollTo()æ“ä½œï¼Œä»¥åœ¨å…¶ä»–æ“ä½œè¿›è¡Œä¹‹å‰åœ¨å±å¹•ä¸­æ˜¾ç¤ºè§†å›¾ã€‚å¦‚æœè§†å›¾å·²æ˜¾ç¤ºï¼ŒViewActions.scrollTo()æ“ä½œå°†ä¸èµ·ä½œç”¨ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œè¦æ¨¡æ‹Ÿè¾“å…¥å­—ç¬¦ä¸²å€¼å¹¶æŒ‰æŒ‰é’®æäº¤å€¼ï¼Œæ‚¨å¯ä»¥ç¼–å†™ç±»ä¼¼è¿™æ ·çš„è‡ªåŠ¨æµ‹è¯•è„šæœ¬ã€‚ ViewInteraction.perform()å’ŒDataInteraction.perform()æ–¹æ³•é‡‡ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªViewActionå‚æ•°ï¼Œå¹¶æŒ‰æä¾›çš„é¡ºåºè¿è¡Œæ“ä½œã€‚</p><p>//å°†æ–‡æœ¬é”®å…¥EditTextè§†å›¾ï¼Œç„¶åå…³é—­è½¯é”®ç›˜<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">onView(<span class="name">withId</span>(<span class="name">R</span>.id.editTextUserInput)ï¼‰</div><div class="line">Â Â Â Â  .perform(<span class="name">typeText</span>(<span class="name">STRING_TO_BE_TYPED</span>),closeSoftKeyboard()ï¼‰<span class="comment">;</span></div></pre></td></tr></table></figure></p><p>//æŒ‰æŒ‰é’®æäº¤æ–‡æœ¬æ›´æ”¹<br><code>onView(withId(R.id.changeTextBt)).perform(click());</code></p><p>å…¶ä»–action api è¯·æŸ¥çœ‹<br><a href="espresso.action">https://developer.android.com/reference/android/support/test/espresso/action/package-summary.html</a></p><h2 id="Verifying-Results"><a href="#Verifying-Results" class="headerlink" title="Verifying Results"></a>Verifying Results</h2><p>è°ƒç”¨ViewInteraction.check()æˆ–DataInteraction.check()æ–¹æ³•æ¥æ–­è¨€UIä¸­çš„è§†å›¾åŒ¹é…ä¸€äº›é¢„æœŸçŠ¶æ€ã€‚ æ‚¨å¿…é¡»ä¼ é€’ä¸€ä¸ªViewAssertionå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚ å¦‚æœæ–­è¨€å¤±è´¥ï¼ŒEspressoä¼šæŠ›å‡ºä¸€ä¸ªAssertionFailedErrorã€‚<br>ViewAssertionsç±»æä¾›äº†ç”¨äºæŒ‡å®šå…¬å…±æ–­è¨€çš„å¸®åŠ©ç¨‹åºæ–¹æ³•çš„åˆ—è¡¨ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨çš„æ–­è¨€åŒ…æ‹¬ï¼š<br>doesNotExistï¼šæ–­è¨€æ²¡æœ‰ä¸å½“å‰è§†å›¾å±‚æ¬¡ç»“æ„ä¸­æŒ‡å®šçš„æ¡ä»¶åŒ¹é…çš„è§†å›¾ã€‚<br>matchesï¼šæ–­è¨€æŒ‡å®šè§†å›¾å­˜åœ¨äºå½“å‰è§†å›¾å±‚æ¬¡ç»“æ„ä¸­ï¼Œå¹¶ä¸”å…¶çŠ¶æ€ä¸æŸä¸ªç»™å®šçš„HamcreståŒ¹é…å™¨åŒ¹é…ã€‚<br>selectedDescendentsMatchï¼šå­˜åœ¨æŒ‡å®šçš„å­©å­ä¸ºçˆ¶è§†å›¾æŸ¥çœ‹çš„å£°æ˜ï¼Œå®ƒä»¬çš„çŠ¶æ€ä¸æŸä¸ªç»™å®šçš„HamcreståŒ¹é…å™¨åŒ¹é…ã€‚</p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†å¦‚ä½•æ£€æŸ¥UIä¸­æ˜¾ç¤ºçš„æ–‡æœ¬çš„å€¼ä¸ä¹‹å‰åœ¨EditTextå­—æ®µä¸­è¾“å…¥çš„æ–‡æœ¬çš„å€¼ç›¸åŒã€‚<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">public</span> <span class="selector-tag">void</span> <span class="selector-tag">testChangeText_sameActivity</span>() &#123;</div><div class="line">    <span class="comment">// Type text and then press the button.</span></div><div class="line">    ...</div><div class="line">    <span class="selector-tag">onView</span>(withText(R.string.item_1_text))</div><div class="line">            <span class="selector-class">.check</span>(doesNotExist());</div><div class="line">    <span class="comment">// Check that the text was changed.</span></div><div class="line">    <span class="selector-tag">onView</span>(withId(R.id.textToBeChanged))</div><div class="line">            <span class="selector-class">.check</span>(matches(withText(STRING_TO_BE_TYPED)));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>ViewMatchers, ViewActions, ViewAssertions ç»„æˆäº†espressoçš„åŸºç¡€æ¶æ„ï¼Œæ‰€ä»¥è¦çœŸæ­£çš„æŒæ¡espressoå¿…é¡»å°†è¿™3éƒ¨åˆ†åŸºç¡€ç†Ÿæ‚‰ã€‚<br>ä¸Šä¸€èŠ‚<a href="https://qaseven.github.io/2016/11/30/expresso/" target="_blank" rel="external">espressoåŸºç¡€</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ&quot;&gt;&lt;a href=&quot;#espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ&quot;&gt;&lt;/a&gt;espressoåŸºç¡€æ¶æ„ä¸APIåˆ†æ&lt;/h2&gt;&lt;p&gt;Espres
      
    
    </summary>
    
    
      <category term="androidè‡ªåŠ¨åŒ–" scheme="http://yoursite.com/tags/android%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>espressoç³»åˆ—ä¸€ç®€ä»‹</title>
    <link href="http://yoursite.com/2016/11/30/expresso/"/>
    <id>http://yoursite.com/2016/11/30/expresso/</id>
    <published>2016-11-30T08:59:53.000Z</published>
    <updated>2017-09-21T07:42:27.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="espressoæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#espressoæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="espressoæ˜¯ä»€ä¹ˆï¼Ÿ"></a>espressoæ˜¯ä»€ä¹ˆï¼Ÿ</h2><p> Espresso æµ‹è¯•æ¡†æ¶æä¾›äº†ä¸€ç³»åˆ—çš„APIç”¨äºæ„å»ºUIæµ‹è¯•æ¥æµ‹è¯•appå†…ç”¨æˆ·æµæ“ä½œã€‚è¿™äº›APIè®©ä½ å¯ä»¥ç¼–å†™ç®€æ´å¯é çš„è‡ªåŠ¨åŒ–UIæµ‹è¯•ã€‚Espressoéå¸¸é€‚åˆç”¨æ¥ç¼–å†™ç™½ç›’æµ‹è¯•ï¼Œå…¶ä¸­æµ‹è¯•ä»£ç çš„ç¼–å†™æ˜¯åˆ©ç”¨äº†è¢«æµ‹è¯•appä¸­ç¨‹åºä»£ç å®ç°ç»†èŠ‚ã€‚</p><p>Espressoæµ‹è¯•å¯è¿è¡Œandroid 2.3.3(API 10 level)ä»¥åŠæ›´é«˜ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šã€‚ä½¿ç”¨Espressoçš„ä¸»è¦å¥½å¤„æ˜¯,å½“ä½ è¿è¡Œæµ‹è¯•æ—¶å®ƒæä¾›äº†è‡ªåŠ¨çš„åŒæ­¥æµ‹è¯•åŠ¨ä½œä¸åº”ç”¨ç¨‹åºUIã€‚Espressoä¼šæ£€æµ‹ä½ çš„ä¸»çº¿ç¨‹æ˜¯å¦ä¸ºç©ºé—²çŠ¶æ€,å¦‚æœä½ çš„æ²¡æœ‰è¢«åˆ©ç”¨,è¿™æ—¶å€™ä»–å°±ä¼šæŠ¢å ä¸»çº¿ç¨‹è¿è¡Œæµ‹è¯•ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿåœ¨æ°å½“çš„æ—¶é—´è¿è¡Œæ‚¨çš„æµ‹è¯•å‘½ä»¤,æé«˜æµ‹è¯•çš„å¯é æ€§ã€‚è¿™ç§èƒ½åŠ›ä¹Ÿä½¿æ‚¨æ— é¡»æ·»åŠ ä»»ä½•é¢å¤–çš„æªæ–½,ä¾‹å¦‚åœ¨æµ‹è¯•ä»£ç ä¸­åŠ å…¥<code>thread.sleep()</code>ã€‚</p><p>Espressoæµ‹è¯•æ¡†æ¶åŸºäº instrumentation-based API å¹¶ä¸”ä½¿ç”¨ AndroidJUnitRunneræµ‹è¯•é©±åŠ¨è¿è¡Œæµ‹è¯•ã€‚</p><p>Espressoæµ‹è¯•æ¡†æ¶çš„å…³é”®ç‰¹æ€§åŒ…æ‹¬ï¼š</p><ul><li>[ ] æä¾›äº†çµæ´»çš„APIç”¨äºåŒ¹é…ç›®æ ‡appä¸­viewå’Œadapterã€‚æ›´å¤šçš„ä¿¡æ¯ï¼Œè§<a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#espresso-matching" target="_blank" rel="external">ViewåŒ¹é…</a></li><li>[ ] å¤§è€Œå…¨çš„ è¡Œä¸º apiï¼ˆaction APIsï¼‰ ç”¨äºè‡ªåŠ¨åŒ–UIäº¤äº’ã€‚æ›´å¤šçš„ä¿¡æ¯ï¼Œè§<a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#espresso-actions" target="_blank" rel="external">è¡Œä¸ºAPIs</a></li><li>[ ] UIçº¿ç¨‹åŒæ­¥æ¥æé«˜æµ‹è¯•å¯é æ€§ã€‚æ›´å¤šä¿¡æ¯ï¼Œ<a href="https://developer.android.com/topic/libraries/testing-support-library/index.html#espresso-thread-sync" target="_blank" rel="external">è§UIçº¿ç¨‹åŒæ­¥</a></li></ul><h2 id="ç‰ˆæœ¬å…¼å®¹"><a href="#ç‰ˆæœ¬å…¼å®¹" class="headerlink" title="ç‰ˆæœ¬å…¼å®¹"></a>ç‰ˆæœ¬å…¼å®¹</h2><p>Espresso æ”¯æŒå¦‚ä¸‹ APIï¼š</p><table><thead><tr><th>ä»£å·</th><th>API</th></tr></thead><tbody><tr><td>Froyo</td><td>8</td></tr><tr><td>Gingerbread</td><td>10</td></tr><tr><td>  Ice Cream Sandwich</td><td>15</td></tr><tr><td>  Jelly Bean</td><td>16, 17 ,18</td></tr><tr><td>  KitKat</td><td>19</td></tr><tr><td>  Lollipop</td><td>21</td></tr></tbody></table><p>æ³¨æ„ï¼š<br>åˆ‡è®° espresso æœ‰ç‰ˆæœ¬æ–­å±‚ï¼Œå¹¶ä¸æ˜¯å…¨ç‰ˆæœ¬æ”¯æŒï¼Œè¯·æ³¨æ„ä½ è®¾å¤‡androidç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œä»¥å…é€ æˆä¸å¿…è¦çš„å…è´¹ã€‚<br>ä¸è¿‡æœ€æ–°çš„androidç³»ç»Ÿç‰ˆæœ¬ espressoéƒ½æ˜¯æ”¯æŒçš„ã€‚</p><h2 id="é…ç½®espresso"><a href="#é…ç½®espresso" class="headerlink" title="é…ç½®espresso"></a>é…ç½®espresso</h2><p>å®˜æ–¹æ–‡æ¡£å»ºè®®æˆ‘ä»¬åœ¨å¼€å§‹é…ç½®ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹å¦‚ä½•å¼€å§‹æµ‹è¯•ï¼Œæˆ‘è§‰å¾—éå¸¸æœ‰å¿…è¦ï¼Œå¾ˆå¤šæ–°æ‰‹ä¸Šæ¥å°±æ‹¿ç€ä¸çŸ¥é“é‚£æ‰¾æ¥çš„ä¾‹å­è¿è¡Œä¸‹ï¼Œå°±ä»¥ä¸ºè‡ªå·±çœŸçš„ä»€ä¹ˆéƒ½ä¼šã€‚è¿™æ ·çš„çœŸçš„å¾ˆä¸å¥½ï¼Œå®˜æ–¹æ–‡æ¡£æ‰æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ…¢æ…¢æ¥ã€‚</p><p>androidæ˜¯åŸºäºJUnitæµ‹è¯•æ¡†æ¶,å•å…ƒæµ‹è¯•,æ‚¨å¯ä»¥è¿è¡Œä»»æ„æœ¬åœ°çš„å•å…ƒæµ‹è¯•åœ¨JVMæˆ–instrumented testsåœ¨Androidè®¾å¤‡ä¸Šã€‚</p><h3 id="æµ‹è¯•ç±»å‹"><a href="#æµ‹è¯•ç±»å‹" class="headerlink" title="æµ‹è¯•ç±»å‹"></a>æµ‹è¯•ç±»å‹</h3><p>å½“ä½¿ç”¨Android studio ç¼–å†™ä»»ä½•ä½ çš„æµ‹è¯•æ—¶,ä½ çš„æµ‹è¯•ä»£ç å¿…é¡»è¿›å…¥ä¸¤ä¸ªä¸åŒçš„ä»£ç ç›®å½•(æºé›†)ã€‚æ¯ä¸ªæ¨¡å—åœ¨æ‚¨çš„é¡¹ç›®ä¸­,Android Studioéƒ½åŒ…æ‹¬æºé›†,å¯¹åº”äºä»¥ä¸‹æµ‹è¯•ç±»å‹:</p><h4 id="æœ¬åœ°å•å…ƒæµ‹è¯•"><a href="#æœ¬åœ°å•å…ƒæµ‹è¯•" class="headerlink" title="æœ¬åœ°å•å…ƒæµ‹è¯•"></a>æœ¬åœ°å•å…ƒæµ‹è¯•</h4><p>ä½äº <code>module-name/src/test/java/.</code></p><p>è¿™äº›æµ‹è¯•è¿è¡Œåœ¨æœ¬åœ°JVMå¹¶æ²¡æœ‰è®¿é—®Androidæ¡†æ¶apiåŠŸèƒ½çš„æƒé™ã€‚<br>è®©æˆ‘ä»¬é¦–å…ˆå¼€å§‹å¦‚ä½•æ„å»ºæœ¬åœ°å•å…ƒæµ‹è¯•ã€‚</p><h3 id="æ„å»ºæœ¬åœ°å•å…ƒæµ‹è¯•"><a href="#æ„å»ºæœ¬åœ°å•å…ƒæµ‹è¯•" class="headerlink" title="æ„å»ºæœ¬åœ°å•å…ƒæµ‹è¯•"></a>æ„å»ºæœ¬åœ°å•å…ƒæµ‹è¯•</h3><p>å¦‚æœæ‚¨çš„å•å…ƒæµ‹è¯•æ²¡æœ‰ä¾èµ–æˆ–åªæœ‰ç®€å•çš„ä¾èµ–Androidç³»ç»Ÿ,ä½ åº”è¯¥åœ¨æœ¬åœ°å¼€å‘æœºå™¨ä¸Šè¿è¡Œæ‚¨çš„æµ‹è¯•ã€‚è¿™ç§æµ‹è¯•æ–¹æ³•æ˜¯æœ‰æ•ˆçš„,å› ä¸ºå®ƒå¯ä»¥å¸®åŠ©ä½ é¿å…åŠ è½½ç›®æ ‡åº”ç”¨ç¨‹åºæ—¶çš„å¼€é”€ä»¥åŠå•å…ƒæµ‹è¯•éœ€è¦åœ¨ä¸€ä¸ªç‰©ç†è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨è¿è¡Œã€‚å› æ­¤,è¿è¡Œå•å…ƒæµ‹è¯•çš„æ—¶é—´å°†å¤§å¤§çš„å‡å°‘ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•,æ‚¨é€šå¸¸ä½¿ç”¨mocking æ¡†æ¶,åˆ—å¦‚Mockitoã€è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬mockæµ‹è¯•éœ€è¦çš„ä¾èµ–ã€‚</p><h3 id="è®¾ç½®æµ‹è¯•ç¯å¢ƒ"><a href="#è®¾ç½®æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="è®¾ç½®æµ‹è¯•ç¯å¢ƒ"></a>è®¾ç½®æµ‹è¯•ç¯å¢ƒ</h3><p>åœ¨ä½ çš„Android Studioé¡¹ç›®æ—¶,æ‚¨å¿…é¡»ä¸ºæœ¬åœ°å•å…ƒæµ‹è¯•å­˜å‚¨æºæ–‡ä»¶åœ¨ module-name/src/test/java/ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œè¿™ä¸ªç›®å½•å°±å·²ç»å­˜åœ¨ã€‚æ‚¨è¿˜éœ€è¦ä¸ºæ‚¨çš„é¡¹ç›®é…ç½®æµ‹è¯•ä¾èµ–,å› ä¸ºéœ€è¦ä½¿ç”¨JUnit 4çš„æ¡†æ¶æä¾›æ ‡å‡†çš„apiã€‚<br>å¦‚æœæ‚¨çš„æµ‹è¯•éœ€è¦ä¸Androidä¾èµ–å…³ç³»,åŒ…æ‹¬ä½¿ç”¨Mockitoæ¥ç®€åŒ–ä½ çš„å•å…ƒæµ‹è¯•ã€‚æ›´å¤šåœ°ä½¿ç”¨ mock objectsåœ¨æœ¬åœ°çš„å•å…ƒæµ‹è¯•ä¸­,è¯·æŸ¥çœ‹Mocking Androidä¾èµ–å…³ç³»ã€‚åœ¨ä½ çš„åº”ç”¨ç¨‹åºçš„é¡¶å±‚ç›®å½•çš„build.gradleæ–‡ä»¶é‡Œ,æ‚¨éœ€è¦æŒ‡å®šè¿™äº›åº“çš„ä¾èµ–å…³ç³»:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="comment">// Required -- JUnit 4 framework</span></div><div class="line">    testCompile <span class="string">'junit:junit:4.12'</span></div><div class="line">    <span class="comment">// Optional -- Mockito framework</span></div><div class="line">    testCompile <span class="string">'org.mockito:mockito-core:1.10.19'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="åˆ›å»ºæœ¬åœ°å•å…ƒæµ‹è¯•ç±»"><a href="#åˆ›å»ºæœ¬åœ°å•å…ƒæµ‹è¯•ç±»" class="headerlink" title="åˆ›å»ºæœ¬åœ°å•å…ƒæµ‹è¯•ç±»"></a>åˆ›å»ºæœ¬åœ°å•å…ƒæµ‹è¯•ç±»</h3><p>ä½ å½“åœ°çš„å•å…ƒæµ‹è¯•ç±»åº”è¯¥å†™æˆä¸€ä¸ªJUnit 4æµ‹è¯•ç±»ã€‚JUnitæ˜¯æœ€å—æ¬¢è¿å’Œå¹¿æ³›ä½¿ç”¨ä¸ºJavaå•å…ƒæµ‹è¯•æ¡†æ¶ã€‚è¿™ä¸ªæ¡†æ¶çš„æœ€æ–°ç‰ˆæœ¬,JUnit4,å…è®¸æ‚¨åœ¨ä¸€ä¸ªæ¯”ä¹‹å‰çš„ç‰ˆæ›´æ¸…æ´å’Œæ›´çµæ´»çš„æ–¹æ³•ä¸­ç¼–å†™æµ‹è¯•ã€‚ä¹‹å‰çš„Androidå•å…ƒæµ‹è¯•åŸºäºJUnit3æ¡†æ¶,ä½¿ç”¨JUnit4,æ‚¨ä¸éœ€è¦æ‰©å±•junit.frameworkã€‚TestCaseç±»ã€‚ä½ ä¹Ÿä¸éœ€è¦åœ¨æµ‹è¯•æ–¹æ³•åç§°åŒ…å«â€œtestâ€å…³é”®å­—,æˆ–è€…ä½¿ç”¨junitçš„ä»»ä½•ç±»åœ¨junit.frameworkæˆ–junit.extensionsåŒ…ã€‚</p><p>åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„JUnit 4æµ‹è¯•ç±»,é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªJavaç±»,å®ƒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæµ‹è¯•æ–¹æ³•ã€‚ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ä»¥@Test annotationæ ‡æ³¨å¹¶ä¸”åŒ…å«ä»£ç çš„å®ç°å’ŒéªŒè¯çš„ä»£ç ä¸­åŒ…å«æ‚¨æƒ³è¦æµ‹è¯•çš„ä¸€ä¸ªåŠŸèƒ½ç»„ä»¶ã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†å¦‚ä½•å®ç°ä¸€ä¸ªæœ¬åœ°çš„å•å…ƒæµ‹è¯•ç±»ã€‚æµ‹è¯•æ–¹æ³•emailValidator_CorrectEmailSimple_ReturnsTrueéªŒè¯isValidEmail()æ–¹æ³•ï¼Œåº”ç”¨ç¨‹åºè¿”å›æ­£ç¡®çš„ç»“æœã€‚<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta"><span class="meta-keyword">import</span> org.junit.Test;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> java.util.regex.Pattern;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> static org.junit.Assert.assertFalse;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> static org.junit.Assert.assertTrue;</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmailValidatorTest</span> </span>&#123;</div><div class="line"></div><div class="line">    @Test</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> emailValidator_CorrectEmailSimple_ReturnsTrue() &#123;</div><div class="line">        assertThat(EmailValidator.isValidEmail(<span class="string">"name@email.com"</span>), <span class="keyword">is</span>(<span class="literal">true</span>));</div><div class="line">    &#125;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>æµ‹è¯•ç»„ä»¶åœ¨åº”ç”¨ç¨‹åºè¿”å›é¢„æœŸçš„ç»“æœ,ä½¿ç”¨junit.Assertæ–¹æ³•æ¥æ‰§è¡ŒéªŒè¯æ£€æŸ¥(æˆ–æ–­è¨€)æ¥å¯¹æ¯”æµ‹è¯•ç»„ä»¶çš„çŠ¶æ€å’Œä¸€äº›æœŸæœ›å€¼ã€‚ä¸ºäº†ä½¿æµ‹è¯•å…·æœ‰æ›´å¥½çš„å¯è¯»çš„,æ‚¨å¯ä»¥ä½¿ç”¨Hamcrest matchers(å¦‚ is()å’ŒequalTo()æ–¹æ³•)æ¥åŒ¹é…è¿”å›çš„ç»“æœä¸é¢„æœŸçš„ç»“æœã€‚</p><h3 id="Mock-Androidä¾èµ–å…³ç³»"><a href="#Mock-Androidä¾èµ–å…³ç³»" class="headerlink" title="Mock Androidä¾èµ–å…³ç³»"></a>Mock Androidä¾èµ–å…³ç³»</h3><p>é»˜è®¤æƒ…å†µä¸‹,Androidæ’ä»¶Gradleæ‰§è¡Œæœ¬åœ°çš„å•å…ƒæµ‹è¯•ä¸ä¿®æ”¹åçš„ç‰ˆæœ¬çš„Android.jaråº“,å®ƒä¸åŒ…å«ä»»ä½•å®é™…çš„ä»£ç ã€‚ç›¸å,ä»ä½ çš„å•å…ƒæµ‹è¯•æ–¹æ³•è°ƒç”¨å®‰å“ç±»æŠ›å‡ºå¼‚å¸¸ã€‚è¿™ç¡®ä¿ä½ çš„æµ‹è¯•ä»£ç å’Œä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„è¡Œä¸ºçš„Androidå¹³å°(ä½ æ²¡æœ‰æ˜¾å¼åœ°mock)ã€‚<br>æ‚¨å¯ä»¥ä½¿ç”¨æ¨¡æ‹Ÿæ¡†æ¶åœ¨ä»£ç ä¸­å­˜æ ¹å¤–éƒ¨ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿è½»æ¾æµ‹è¯•æ‚¨çš„ç»„ä»¶æ˜¯å¦æŒ‰ç…§é¢„æœŸçš„æ–¹å¼ä¸ä¾èµ–å…³ç³»äº¤äº’ã€‚ é€šè¿‡ç”¨æ¨¡æ‹Ÿå¯¹è±¡æ›¿æ¢Androidä¾èµ–é¡¹ï¼Œæ‚¨å¯ä»¥å°†å•å…ƒæµ‹è¯•ä¸Androidç³»ç»Ÿçš„å…¶ä½™éƒ¨åˆ†éš”ç¦»ï¼ŒåŒæ—¶éªŒè¯è¿™äº›ä¾èµ–å…³ç³»ä¸­çš„æ­£ç¡®æ–¹æ³•æ˜¯å¦è¢«è°ƒç”¨ã€‚ Javaçš„Mockito mockingæ¡†æ¶ï¼ˆ1.9.5åŠæ›´é«˜ç‰ˆæœ¬ï¼‰æä¾›äº†ä¸Androidå•å…ƒæµ‹è¯•çš„å…¼å®¹æ€§ã€‚ ä½¿ç”¨Mockitoï¼Œæ‚¨å¯ä»¥é…ç½®æ¨¡æ‹Ÿå¯¹è±¡ä»¥åœ¨è°ƒç”¨æ—¶è¿”å›ä¸€äº›ç‰¹å®šå€¼ã€‚</p><p>è¦ä½¿ç”¨æ­¤æ¡†æ¶å°†mockå¯¹è±¡æ·»åŠ åˆ°æœ¬åœ°å•å…ƒæµ‹è¯•ï¼Œè¯·éµå¾ªä»¥ä¸‹ç¼–ç¨‹æ¨¡å‹ï¼š</p><ul><li>åœ¨build.gradleæ–‡ä»¶ä¸­åŒ…å«Mockitoåº“ä¾èµ–å…³ç³»ï¼Œå¦‚è®¾ç½®æµ‹è¯•ç¯å¢ƒä¸­æ‰€è¿°ã€‚</li><li>åœ¨å•å…ƒæµ‹è¯•ç±»å®šä¹‰çš„å¼€å§‹ï¼Œæ·»åŠ @RunWithï¼ˆMockitoJUnitRunner.classï¼‰æ³¨é‡Šã€‚ è¿™ä¸ªæ³¨é‡Šå‘Šè¯‰Mockitoæµ‹è¯•è¿è¡Œå™¨éªŒè¯ä½ çš„æ¡†æ¶çš„ä½¿ç”¨æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ç®€åŒ–äº†ä½ çš„æ¨¡æ‹Ÿå¯¹è±¡çš„åˆå§‹åŒ–ã€‚</li><li>è¦ä¸ºAndroidä¾èµ–é¡¹åˆ›å»ºæ¨¡æ‹Ÿå¯¹è±¡ï¼Œè¯·åœ¨å­—æ®µå£°æ˜ä¹‹å‰æ·»åŠ @Mockæ³¨é‡Šã€‚</li><li>è¦å­˜æ ¹ä¾èµ–å…³ç³»çš„è¡Œä¸ºï¼Œå¯ä»¥ä½¿ç”¨whenï¼ˆï¼‰å’ŒthenReturnï¼ˆï¼‰æ–¹æ³•æŒ‡å®šæ¡ä»¶å¹¶è¿”å›å€¼ã€‚</li></ul><p>ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•åˆ›å»ºä½¿ç”¨mockä¸Šä¸‹æ–‡å¯¹è±¡çš„å•å…ƒæµ‹è¯•ã€‚<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="meta"><span class="meta-keyword">import</span> static org.hamcrest.MatcherAssert.assertThat;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> static org.hamcrest.CoreMatchers.*;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> static org.mockito.Mockito.*;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> org.junit.Test;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> org.junit.runner.RunWith;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> org.mockito.Mock;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> org.mockito.runners.MockitoJUnitRunner;</span></div><div class="line"><span class="meta"><span class="meta-keyword">import</span> android.content.SharedPreferences;</span></div><div class="line"></div><div class="line">@RunWith(MockitoJUnitRunner.class)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UnitTestSample</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FAKE_STRING = <span class="string">"HELLO WORLD"</span>;</div><div class="line"></div><div class="line">    @Mock</div><div class="line">    Context mMockContext;</div><div class="line"></div><div class="line">    @Test</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> readStringFromContext_LocalizedString() &#123;</div><div class="line">        <span class="comment">// Given a mocked Context injected into the object under test...</span></div><div class="line">        when(mMockContext.getString(R.string.hello_word))</div><div class="line">                .thenReturn(FAKE_STRING);</div><div class="line">        ClassUnderTest myObjectUnderTest = <span class="keyword">new</span> ClassUnderTest(mMockContext);</div><div class="line"></div><div class="line">        <span class="comment">// ...when the string is returned from the object under test...</span></div><div class="line">        String result = myObjectUnderTest.getHelloWorldString();</div><div class="line"></div><div class="line">        <span class="comment">// ...then the result should be the expected one.</span></div><div class="line">        assertThat(result, <span class="keyword">is</span>(FAKE_STRING));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>è¦äº†è§£æœ‰å…³ä½¿ç”¨Mockitoæ¡†æ¶çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ç¤ºä¾‹ä»£ç ä¸­çš„Mockito APIå‚è€ƒå’ŒSharedPreferencesHelperTestç±»ã€‚<br>å¦‚æœAndroid.jarä¸­çš„Android APIæŠ›å‡ºçš„å¼‚å¸¸å¯¹äºæµ‹è¯•æœ‰é—®é¢˜ï¼Œæ‚¨å¯ä»¥æ›´æ”¹è¡Œä¸ºï¼Œä»¥ä½¿æ–¹æ³•é€šè¿‡åœ¨é¡¹ç›®çš„é¡¶çº§build.gradleæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®æ¥è¿”å›nullæˆ–é›¶ï¼š<br><code>android {  ...  testOptions {    unitTests.returnDefaultValues = true  }}</code></p><p>è­¦å‘Šï¼šå°†returnDefaultValueså±æ€§è®¾ç½®ä¸ºtrueåº”è¯¥å°å¿ƒã€‚  null/zero è¿”å›å€¼å¯ä»¥åœ¨æµ‹è¯•ä¸­å¼•å…¥å›å½’ï¼Œè¿™éš¾ä»¥è°ƒè¯•ï¼Œå¹¶ä¸”å¯èƒ½å…è®¸å¤±è´¥çš„æµ‹è¯•é€šè¿‡ã€‚ åªèƒ½ä½¿ç”¨å®ƒä½œä¸ºæœ€åçš„æ‰‹æ®µã€‚</p><h3 id="è¿è¡Œæœ¬åœ°æµ‹è¯•"><a href="#è¿è¡Œæœ¬åœ°æµ‹è¯•" class="headerlink" title="è¿è¡Œæœ¬åœ°æµ‹è¯•"></a>è¿è¡Œæœ¬åœ°æµ‹è¯•</h3><p>è¦è¿è¡Œæœ¬åœ°å•å…ƒæµ‹è¯•ï¼Œè¯·æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤æ“ä½œï¼š</p><ol><li>é€šè¿‡å•å‡»å·¥å…·æ ä¸­çš„ Sync Projectï¼Œç¡®ä¿æ‚¨çš„é¡¹ç›®ä¸GradleåŒæ­¥ã€‚</li><li>ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€è¿è¡Œæµ‹è¯•ï¼š</li></ol><ul><li>è¦è¿è¡Œå•ä¸ªæµ‹è¯•ï¼Œè¯·æ‰“å¼€â€œProjectâ€çª—å£ï¼Œç„¶åå³é”®å•å‡»æµ‹è¯•ï¼Œç„¶åå•å‡»RUNã€‚</li><li>è¦æµ‹è¯•ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œè¯·å³é”®å•å‡»æµ‹è¯•æ–‡ä»¶ä¸­çš„ç±»æˆ–æ–¹æ³•ï¼Œç„¶åå•å‡»Runã€‚</li><li>è¦åœ¨ç›®å½•ä¸­è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œè¯·å³é”®å•å‡»ç›®å½•å¹¶é€‰æ‹©Run testã€‚<br>Gradleçš„Androidæ’ä»¶ç¼–è¯‘ä½äºé»˜è®¤ç›®å½•ï¼ˆsrc / test / java /ï¼‰ä¸­çš„æœ¬åœ°å•å…ƒæµ‹è¯•ä»£ç ï¼Œæ„å»ºä¸€ä¸ªæµ‹è¯•åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„æµ‹è¯•è¿è¡Œå™¨ç±»åœ¨æœ¬åœ°æ‰§è¡Œå®ƒã€‚ ç„¶åï¼ŒAndroid Studioå°†åœ¨â€œè¿è¡Œâ€çª—å£ä¸­æ˜¾ç¤ºç»“æœã€‚</li></ul><h4 id="Instrumented-tests"><a href="#Instrumented-tests" class="headerlink" title="Instrumented tests"></a>Instrumented tests</h4><p>ä½äºmodule-name/src/androidTest/java/ã€‚<br>è¿™äº›éƒ½æ˜¯å¿…é¡»åœ¨Androidç¡¬ä»¶è®¾å¤‡æˆ–Androidæ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œçš„æµ‹è¯•ã€‚</p><p>ä»ªè¡¨åŒ–æµ‹è¯•å†…ç½®äºåœ¨æµ‹è¯•ä¸‹çš„åº”ç”¨æ—è¾¹çš„è®¾å¤‡ä¸Šè¿è¡Œçš„APKã€‚ ç³»ç»Ÿåœ¨åŒä¸€ä¸ªè¿‡ç¨‹ä¸­è¿è¡Œæµ‹è¯•APKå’Œæ‚¨çš„åº”ç”¨ç¨‹åºï¼Œå› æ­¤æ‚¨çš„æµ‹è¯•å¯ä»¥è°ƒç”¨æ–¹æ³•å’Œä¿®æ”¹åº”ç”¨ç¨‹åºä¸­çš„å­—æ®µï¼Œå¹¶è‡ªåŠ¨åŒ–ç”¨æˆ·ä¸æ‚¨çš„åº”ç”¨ç¨‹åºçš„äº’åŠ¨ã€‚</p><p>æœ‰å…³å¦‚ä½•åˆ›å»ºæ£€æµ‹æµ‹è¯•çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…ä»¥ä¸‹ä¸»é¢˜ï¼š</p><p>æ„å»ºæµ‹è¯•å•å…ƒæµ‹è¯•ï¼šä½¿ç”¨Androidä¾èµ–é¡¹æ„å»ºå¤æ‚çš„å•å…ƒæµ‹è¯•ï¼Œè¿™äº›æµ‹è¯•ä¸èƒ½æ»¡è¶³æ¨¡æ‹Ÿå¯¹è±¡ã€‚<br>è‡ªåŠ¨åŒ–ç”¨æˆ·ç•Œé¢æµ‹è¯•ï¼šåˆ›å»ºæµ‹è¯•ä»¥éªŒè¯ç”¨æˆ·ç•Œé¢åœ¨å•ä¸ªåº”ç”¨ç¨‹åºå†…çš„ç”¨æˆ·äº¤äº’æˆ–å¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„äº¤äº’æ“ä½œæ­£ç¡®ã€‚<br>æµ‹è¯•åº”ç”¨ç¨‹åºç»„ä»¶é›†æˆï¼šéªŒè¯ç”¨æˆ·ä¸ç›´æ¥ä¸ä¹‹äº¤äº’çš„ç»„ä»¶ï¼ˆä¾‹å¦‚æœåŠ¡æˆ–å†…å®¹æä¾›è€…ï¼‰çš„è¡Œä¸ºã€‚<br><img src="https://developer.android.com/images/testing/test-types_2x.png" alt=""><br>ä½†æ˜¯ï¼Œä¸Šè¿°çš„æœ¬åœ°å•å…ƒæµ‹è¯•å’Œinstrumented testsåªæ˜¯ç”¨äºåŒºåˆ†åœ¨æœ¬åœ°JVMä¸Šè¿è¡Œçš„æµ‹è¯•å’Œåœ¨Androidå¹³å°ï¼ˆåœ¨ç¡¬ä»¶è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šï¼‰è¿è¡Œçš„æµ‹è¯•ä¹‹é—´çš„æœ¯è¯­ã€‚ åœ¨æ„å»ºå®Œæ•´æµ‹è¯•å¥—ä»¶æ—¶åº”è¯¥ç†è§£çš„çœŸå®æµ‹è¯•ç±»å‹åœ¨ä¸‹è¡¨ä¸­æè¿°ã€‚</p><table><thead><tr><th>Type</th><th>å­ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>Unit tests</td><td>Local Unit Tests</td><td>æœ¬åœ°å•å…ƒæµ‹è¯•åœ¨Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸Šæœ¬åœ°è¿è¡Œçš„å•å…ƒæµ‹è¯•ã€‚å½“æ‚¨çš„æµ‹è¯•æ²¡æœ‰Androidæ¡†æ¶ä¾èµ–é¡¹æˆ–è€…å¯ä»¥æ¨¡æ‹ŸAndroidæ¡†æ¶ä¾èµ–é¡¹æ—¶ï¼Œä½¿ç”¨è¿™äº›æµ‹è¯•æ¥æœ€å°åŒ–æ‰§è¡Œæ—¶é—´ã€‚</td></tr><tr><td>Unit tests</td><td>Instrumented unit tests</td><td>æµ‹è¯•å•å…ƒæµ‹è¯•åœ¨Androidè®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œçš„å•å…ƒæµ‹è¯•ã€‚è¿™äº›æµ‹è¯•å¯ä»¥è®¿é—®Instrumentationä¿¡æ¯ï¼Œä¾‹å¦‚æ‚¨è¦æµ‹è¯•çš„åº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ã€‚å½“ä½ çš„æµ‹è¯•æœ‰Androidä¾èµ–ï¼Œæ¨¡æ‹Ÿå¯¹è±¡ä¸èƒ½æ»¡è¶³æ—¶ï¼Œä½¿ç”¨è¿™äº›æµ‹è¯•ã€‚</td></tr><tr><td>Integration Tests</td><td>Components within your app only</td><td>æ‚¨çš„åº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶ä»…å½“ç”¨æˆ·æ‰§è¡Œç‰¹å®šæ“ä½œæˆ–åœ¨å…¶æ´»åŠ¨ä¸­è¾“å…¥ç‰¹å®šè¾“å…¥æ—¶ï¼Œæ­¤ç±»å‹çš„æµ‹è¯•éªŒè¯ç›®æ ‡åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå¦‚é¢„æœŸã€‚ä¾‹å¦‚ï¼Œå®ƒå…è®¸æ‚¨æ£€æŸ¥ç›®æ ‡åº”ç”¨ç¨‹åºè¿”å›æ­£ç¡®çš„UIè¾“å‡ºï¼Œä»¥å“åº”ç”¨æˆ·åœ¨åº”ç”¨ç¨‹åºæ´»åŠ¨ä¸­çš„äº’åŠ¨ã€‚ Espressoç­‰UIæµ‹è¯•æ¡†æ¶å…è®¸æ‚¨ä»¥ç¼–ç¨‹æ–¹å¼æ¨¡æ‹Ÿç”¨æˆ·æ“ä½œå¹¶æµ‹è¯•å¤æ‚çš„åº”ç”¨å†…ç”¨æˆ·äº¤äº’ã€‚</td></tr><tr><td>Integration Tests</td><td>Cross-app Components</td><td>è·¨åº”ç”¨ç¨‹åºç»„ä»¶æ­¤ç±»å‹çš„æµ‹è¯•éªŒè¯ä¸åŒç”¨æˆ·åº”ç”¨ç¨‹åºä¹‹é—´æˆ–ç”¨æˆ·åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿåº”ç”¨ç¨‹åºä¹‹é—´çš„äº¤äº’çš„æ­£ç¡®è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·åœ¨Androidè®¾ç½®èœå•ä¸­æ‰§è¡Œæ“ä½œæ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦æµ‹è¯•æ‚¨çš„åº”ç”¨æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚æ”¯æŒè·¨åº”ç”¨ç¨‹åºäº¤äº’çš„UIæµ‹è¯•æ¡†æ¶ï¼ˆå¦‚UI Automatorï¼‰å…è®¸æ‚¨ä¸ºè¿™äº›åœºæ™¯åˆ›å»ºæµ‹è¯•ã€‚</td></tr></tbody></table><h4 id="Test-APIs"><a href="#Test-APIs" class="headerlink" title="Test APIs"></a>Test APIs</h4><p>ä»¥ä¸‹æ˜¯ç”¨äºåœ¨Androidä¸Šæµ‹è¯•åº”ç”¨çš„å¸¸è§APIã€‚<br>JUnit<br>æ‚¨åº”è¯¥å°†æ‚¨çš„å•å…ƒæˆ–é›†æˆæµ‹è¯•ç±»å†™ä¸ºJUnit 4æµ‹è¯•ç±»ã€‚ è¯¥æ¡†æ¶æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹æ³•æ¥åœ¨æµ‹è¯•ä¸­æ‰§è¡Œå¸¸è§çš„setup, teardown, and assertionæ“ä½œã€‚</p><p>åŸºæœ¬çš„JUnit 4æµ‹è¯•ç±»æ˜¯åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæµ‹è¯•æ–¹æ³•çš„Javaç±»ã€‚ æµ‹è¯•æ–¹æ³•ä»¥@Testæ³¨é‡Šå¼€å§‹ï¼ŒåŒ…å«ç»ƒä¹ å’ŒéªŒè¯è¦æµ‹è¯•çš„ç»„ä»¶ä¸­çš„å•ä¸ªåŠŸèƒ½ï¼ˆå³é€»è¾‘å•å…ƒï¼‰çš„ä»£ç ã€‚</p><p>ä»¥ä¸‹ä»£ç æ®µæ˜¾ç¤ºäº†ä¸€ä¸ªç¤ºä¾‹JUnit 4é›†æˆæµ‹è¯•ï¼Œå®ƒä½¿ç”¨Espresso APIå¯¹UIå…ƒç´ æ‰§è¡Œå•å‡»æ“ä½œï¼Œç„¶åæ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºé¢„æœŸçš„å­—ç¬¦ä¸²ã€‚<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@RunWith</span>(AndroidJUnit4.class)</div><div class="line"><span class="variable">@LargeTest</span></div><div class="line">public class MainActivityInstrumentationTest &#123;</div><div class="line"></div><div class="line">    <span class="variable">@Rule</span></div><div class="line">    public ActivityTestRule mActivityRule = new ActivityTestRule&lt;&gt;(</div><div class="line">            MainActivity.class);</div><div class="line"></div><div class="line">    <span class="variable">@Test</span></div><div class="line">    public void sayHello()&#123;</div><div class="line">        <span class="selector-tag">onView</span>(withText(<span class="string">"Say hello!"</span>))<span class="selector-class">.perform</span>(click());</div><div class="line"></div><div class="line">        <span class="selector-tag">onView</span>(withId(R.id.textView))<span class="selector-class">.check</span>(matches(withText(<span class="string">"Hello, World!"</span>)));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>åœ¨æ‚¨çš„JUnit 4æµ‹è¯•ç±»ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ä»¥ä¸‹æ³¨é‡Šè°ƒç”¨æµ‹è¯•ä»£ç ä¸­çš„éƒ¨åˆ†è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼š</p><ul><li>@Beforeï¼šä½¿ç”¨æ­¤æ³¨é‡Šæ¥æŒ‡å®šåŒ…å«æµ‹è¯•è®¾ç½®æ“ä½œçš„ä»£ç å—ã€‚æµ‹è¯•ç±»åœ¨æ¯æ¬¡æµ‹è¯•ä¹‹å‰è°ƒç”¨æ­¤ä»£ç å—ã€‚ä½ å¯ä»¥æœ‰å¤šä¸ª@Beforeæ–¹æ³•ï¼Œä½†æ˜¯æµ‹è¯•ç±»è°ƒç”¨è¿™äº›æ–¹æ³•çš„é¡ºåºä¸èƒ½ä¿è¯ã€‚</li><li>@Afterï¼šæ­¤æ³¨é‡ŠæŒ‡å®šä¸€ä¸ªåŒ…å«æµ‹è¯•æ‹†åˆ†æ“ä½œçš„ä»£ç å—ã€‚æµ‹è¯•ç±»åœ¨æ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¹‹åè°ƒç”¨è¿™ä¸ªä»£ç å—ã€‚æ‚¨å¯ä»¥åœ¨æµ‹è¯•ä»£ç ä¸­å®šä¹‰å¤šä¸ª@Afteræ“ä½œã€‚ä½¿ç”¨æ­¤æ³¨é‡Šä»å†…å­˜é‡Šæ”¾ä»»ä½•èµ„æºã€‚</li><li>@Testï¼šä½¿ç”¨æ­¤æ³¨é‡Šæ ‡è®°æµ‹è¯•æ–¹æ³•ã€‚å•ä¸ªæµ‹è¯•ç±»å¯ä»¥åŒ…å«å¤šä¸ªæµ‹è¯•æ–¹æ³•ï¼Œæ¯ä¸ªæµ‹è¯•æ–¹æ³•éƒ½ä»¥æ­¤æ³¨é‡Šä½œä¸ºå‰ç¼€ã€‚</li><li>@Ruleï¼šè§„åˆ™å…è®¸æ‚¨ä»¥å¯é‡ç”¨çš„æ–¹å¼çµæ´»åœ°æ·»åŠ æˆ–é‡æ–°å®šä¹‰æ¯ä¸ªæµ‹è¯•æ–¹æ³•çš„è¡Œä¸ºã€‚åœ¨Androidæµ‹è¯•ä¸­ï¼Œå°†æ­¤æ³¨é‡Šä¸Androidæµ‹è¯•æ”¯æŒåº“æä¾›çš„æµ‹è¯•è§„åˆ™ç±»ä¹‹ä¸€ä¸€èµ·ä½¿ç”¨ï¼Œä¾‹å¦‚ActivityTestRuleæˆ–ServiceTestRuleã€‚</li><li>@BeforeClassï¼šä½¿ç”¨æ­¤æ³¨é‡Šä¸ºæ¯ä¸ªæµ‹è¯•ç±»æŒ‡å®šä»…è°ƒç”¨ä¸€æ¬¡çš„é™æ€æ–¹æ³•ã€‚æ­¤æµ‹è¯•æ­¥éª¤å¯¹äºæ¶ˆè€—å¤§çš„æ“ä½œï¼ˆä¾‹å¦‚è¿æ¥åˆ°æ•°æ®åº“ï¼‰å¾ˆæœ‰ç”¨ã€‚</li><li>@AfterClassï¼šä½¿ç”¨æ­¤æ³¨é‡Šä¸ºæµ‹è¯•ç±»æŒ‡å®šé™æ€æ–¹æ³•ï¼Œä»…åœ¨ç±»ä¸­çš„æ‰€æœ‰æµ‹è¯•è¿è¡Œåè°ƒç”¨ã€‚ è¿™ä¸ªæµ‹è¯•æ­¥éª¤å¯¹é‡Šæ”¾åœ¨@BeforeClasså—ä¸­åˆ†é…çš„ä»»ä½•èµ„æºå¾ˆæœ‰ç”¨ã€‚</li><li>@Testï¼ˆtimeout =ï¼‰ï¼šä¸€äº›æ³¨é‡Šæ”¯æŒä¼ é€’å…ƒç´ çš„èƒ½åŠ›ï¼Œæ‚¨å¯ä»¥ä¸ºå…¶è®¾ç½®å€¼ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä¸ºæµ‹è¯•æŒ‡å®šè¶…æ—¶æœŸé™ã€‚ å¦‚æœæµ‹è¯•å¼€å§‹ï¼Œä½†æ²¡æœ‰åœ¨ç»™å®šçš„è¶…æ—¶æœŸé—´å†…å®Œæˆï¼Œå®ƒä¼šè‡ªåŠ¨å¤±è´¥ã€‚ æ‚¨å¿…é¡»ä»¥æ¯«ç§’ä¸ºå•ä½æŒ‡å®šè¶…æ—¶æœŸé™ï¼Œä¾‹å¦‚ï¼š@Testï¼ˆtimeout = 5000ï¼‰ã€‚<br>ä½¿ç”¨JUnit Assertç±»æ¥éªŒè¯å¯¹è±¡çŠ¶æ€çš„æ­£ç¡®æ€§ã€‚ assertæ–¹æ³•å°†æ‚¨ä»æµ‹è¯•æ‰€æœŸæœ›çš„å€¼ä¸å®é™…ç»“æœè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒå¤±è´¥ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ æ–­è¨€ç±»æ›´è¯¦ç»†åœ°æè¿°è¿™äº›æ–¹æ³•ã€‚<h4 id="Androidæµ‹è¯•æ”¯æŒåº“"><a href="#Androidæµ‹è¯•æ”¯æŒåº“" class="headerlink" title="Androidæµ‹è¯•æ”¯æŒåº“"></a>Androidæµ‹è¯•æ”¯æŒåº“</h4>Androidæµ‹è¯•æ”¯æŒåº“æä¾›äº†ä¸€ç»„APIï¼Œå…è®¸æ‚¨å¿«é€Ÿæ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„æµ‹è¯•ä»£ç ï¼ŒåŒ…æ‹¬JUnit 4å’ŒåŠŸèƒ½UIæµ‹è¯•ã€‚ åº“åŒ…æ‹¬ä»¥ä¸‹åŸºäºå·¥å…·çš„APIï¼Œå½“æ‚¨æƒ³è¦è‡ªåŠ¨åŒ–æµ‹è¯•æ—¶ï¼Œè¿™äº›APIæ˜¯æœ‰ç”¨çš„ï¼š</li></ul><p>AndroidJUnitRunner<br>é€‚ç”¨äºAndroidçš„JUnit 4å…¼å®¹æµ‹è¯•è¿è¡Œå™¨ã€‚<br>espresso<br>ä¸€ä¸ªUIæµ‹è¯•æ¡†æ¶; é€‚ç”¨äºåœ¨åº”ç”¨ç¨‹åºå†…çš„åŠŸèƒ½UIæµ‹è¯•ã€‚<br>UI automator<br>é€‚ç”¨äºç³»ç»Ÿå’Œå·²å®‰è£…åº”ç”¨ç¨‹åºä¹‹é—´è·¨åº”ç”¨ç¨‹åºåŠŸèƒ½UIæµ‹è¯•çš„UIæµ‹è¯•æ¡†æ¶ã€‚</p><h4 id="æ–­è¨€ç±»"><a href="#æ–­è¨€ç±»" class="headerlink" title="æ–­è¨€ç±»"></a>æ–­è¨€ç±»</h4><p>ç”±äºAndroidæµ‹è¯•æ”¯æŒåº“APIæ‰©å±•JUnitï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ–­è¨€æ–¹æ³•æ˜¾ç¤ºæµ‹è¯•ç»“æœã€‚æ–­è¨€æ–¹æ³•å°†æµ‹è¯•è¿”å›çš„å®é™…å€¼ä¸é¢„æœŸå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæ¯”è¾ƒæµ‹è¯•å¤±è´¥ï¼Œåˆ™æŠ›å‡ºAssertionExceptionå¼‚å¸¸ã€‚ä½¿ç”¨æ–­è¨€æ¯”è®°å½•æ›´æ–¹ä¾¿ï¼Œå¹¶æä¾›æ›´å¥½çš„æµ‹è¯•æ€§èƒ½ã€‚</p><p>ä¸ºäº†ç®€åŒ–æµ‹è¯•å¼€å‘ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨Hamcreståº“ï¼Œå®ƒå…è®¸æ‚¨ä½¿ç”¨HamcreståŒ¹é…å™¨APIåˆ›å»ºæ›´çµæ´»çš„æµ‹è¯•ã€‚</p><p>Monkey å’Œ monkeyrunner<br>Android SDKåŒ…å«ä¸¤ä¸ªç”¨äºåŠŸèƒ½çº§åº”ç”¨æµ‹è¯•çš„å·¥å…·ï¼š</p><p>Monkey<br>è¿™æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå‘è®¾å¤‡å‘é€æŒ‰é”®ï¼Œè§¦æ‘¸å’Œæ‰‹åŠ¿çš„ä¼ªéšæœºæµã€‚æ‚¨ä½¿ç”¨Android Debug Bridgeï¼ˆadbï¼‰å·¥å…·è¿è¡Œå®ƒï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å‹åŠ›æµ‹è¯•æ‚¨çš„åº”ç”¨ç¨‹åºï¼ŒæŠ¥å‘Šæ‰€é‡åˆ°çš„é”™è¯¯ï¼Œæˆ–é€šè¿‡ä½¿ç”¨ç›¸åŒçš„éšæœºæ•°ç§å­å¤šæ¬¡è¿è¡Œè¯¥å·¥å…·æ¥é‡å¤äº‹ä»¶æµã€‚<br>monkeyrunner<br>æ­¤å·¥å…·æ˜¯ç”¨Pythonç¼–å†™çš„æµ‹è¯•ç¨‹åºçš„APIå’Œæ‰§è¡Œç¯å¢ƒã€‚ APIåŒ…æ‹¬ç”¨äºè¿æ¥åˆ°è®¾å¤‡ï¼Œå®‰è£…å’Œå¸è½½åŒ…ï¼Œæˆªå–å±å¹•æˆªå›¾ï¼Œæ¯”è¾ƒä¸¤ä¸ªå›¾åƒä»¥åŠé’ˆå¯¹åº”ç”¨è¿è¡Œæµ‹è¯•åŒ…çš„åŠŸèƒ½ã€‚ä½¿ç”¨APIâ€‹â€‹ï¼Œæ‚¨å¯ä»¥ç¼–å†™å¤§é‡ï¼Œå¼ºå¤§å’Œå¤æ‚çš„æµ‹è¯•ã€‚æ‚¨ä½¿ç”¨monkeyrunnerå‘½ä»¤è¡Œå·¥å…·è¿è¡Œä½¿ç”¨APIâ€‹â€‹çš„ç¨‹åºã€‚</p><h4 id="æ„å»ºAndroidæµ‹è¯•çš„æŒ‡å—"><a href="#æ„å»ºAndroidæµ‹è¯•çš„æŒ‡å—" class="headerlink" title="æ„å»ºAndroidæµ‹è¯•çš„æŒ‡å—"></a>æ„å»ºAndroidæµ‹è¯•çš„æŒ‡å—</h4><p>ä»¥ä¸‹æ–‡æ¡£æä¾›äº†æœ‰å…³å¦‚ä½•æ„å»ºå’Œè¿è¡Œå„ç§æµ‹è¯•ç±»å‹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š</p><p>å»ºç«‹æœ¬åœ°å•å…ƒæµ‹è¯•<br>æ„å»ºå•å…ƒæµ‹è¯•æ²¡æœ‰ä¾èµ–æˆ–åªæœ‰ç®€å•çš„ä¾èµ–ï¼Œä½ å¯ä»¥mockï¼Œå®ƒè¿è¡Œåœ¨æœ¬åœ°JVMä¸Šã€‚<br>å»ºç­‘ä»ªè¡¨å•å…ƒæµ‹è¯•<br>ä½¿ç”¨Androidä¾èµ–é¡¹æ„å»ºå¤æ‚çš„å•å…ƒæµ‹è¯•ï¼Œè¿™å¯¹äºåœ¨ç¡¬ä»¶è®¾å¤‡æˆ–æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œçš„æ¨¡æ‹Ÿå¯¹è±¡æ— æ³•æ»¡è¶³ã€‚<br>è‡ªåŠ¨åŒ–ç”¨æˆ·ç•Œé¢æµ‹è¯•<br>åˆ›å»ºæµ‹è¯•ä»¥éªŒè¯ç”¨æˆ·ç•Œé¢åœ¨å•ä¸ªåº”ç”¨ç¨‹åºå†…çš„ç”¨æˆ·äº¤äº’æˆ–å¤šä¸ªåº”ç”¨ç¨‹åºä¹‹é—´çš„äº¤äº’æ­£ç¡®è¿è¡Œã€‚<br>æµ‹è¯•åº”ç”¨ç¨‹åºé›†æˆ<br>éªŒè¯ç”¨æˆ·ä¸ç›´æ¥ä¸ä¹‹äº¤äº’çš„ç»„ä»¶ï¼ˆä¾‹å¦‚æœåŠ¡æˆ–å†…å®¹æä¾›è€…ï¼‰çš„è¡Œä¸ºã€‚<br>æµ‹è¯•æ˜¾ç¤ºæ€§èƒ½<br>ç¼–å†™æµ‹è¯•åº”ç”¨ç¨‹åºUIæ€§èƒ½çš„æµ‹è¯•ï¼Œä»¥ç¡®ä¿æŒç»­æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚<br>ok æˆ‘ä»¬å·²ç»çœ‹å®Œäº† æ€ä¹ˆå¼€å§‹androidæµ‹è¯•ï¼Œæˆ‘æƒ³å¤§å®¶ä¸€å®šæœ‰äº†å¾ˆæ·±å…¥çš„äº†è§£äº†å§<br>è®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜ é…ç½®espresso<br>åœ¨Androidåº”ç”¨ç¨‹åºæ¨¡å—çš„build.gradleæ–‡ä»¶ä¸­ï¼Œå¿…é¡»ä¸ºEspressoå¼•å…¥jarä¾èµ–ï¼š</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="comment">// Other dependencies ...</span></div><div class="line">    androidTestCompile <span class="string">'com.android.support.test.espresso:espresso-core:2.2.2'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>å…³é—­æµ‹è¯•è®¾å¤‡ä¸Šçš„åŠ¨ç”» - åœ¨æµ‹è¯•è®¾å¤‡ä¸­æ‰“å¼€ç³»ç»ŸåŠ¨ç”»å¯èƒ½ä¼šå¯¼è‡´æ„å¤–çš„ç»“æœï¼Œæˆ–å¯èƒ½å¯¼è‡´æµ‹è¯•å¤±è´¥ã€‚ é€šè¿‡æ‰“å¼€å¼€å‘è€…é€‰é¡¹å¹¶å…³é—­æ‰€æœ‰ä»¥ä¸‹é€‰é¡¹ï¼Œä»è®¾ç½®ä¸­å…³é—­åŠ¨ç”»ï¼š</p><ul><li>åœ¨è®¾å¤‡ä¸Šçš„è®¾ç½®-&gt;å¼€å‘è€…é€‰é¡¹ä¸­ç¦ç”¨ä¸€ä¸‹ä¸‰é¡¹è®¾ç½®ï¼š &gt; çª—å£åŠ¨ç”»ç¼©æ”¾ &gt; è¿‡æ¸¡åŠ¨ç”»ç¼©æ”¾ &gt; åŠ¨ç”»ç¨‹åºæ—¶é•¿ç¼©æ”¾</li><li>ç¡®ä¿ä½ å·²ç»å®‰è£…äº†æœ€æ–°çš„ Extras ä¸‹çš„ Android Support Repository<br>è®¾ç½®junitä¸ºæµ‹è¯•é©±åŠ¨æ¡†æ¶<br>åœ¨build.gradle ä¸­ æ·»åŠ <br><code>testInstrumentationRunner &quot;android.support.test.runner.AndroidJUnitRunner&quot;</code><h2 id="å®Œæ•´çš„build-gradle-ç¤ºä¾‹æ–‡ä»¶å¦‚ä¸‹"><a href="#å®Œæ•´çš„build-gradle-ç¤ºä¾‹æ–‡ä»¶å¦‚ä¸‹" class="headerlink" title="å®Œæ•´çš„build.gradle ç¤ºä¾‹æ–‡ä»¶å¦‚ä¸‹"></a>å®Œæ•´çš„build.gradle ç¤ºä¾‹æ–‡ä»¶å¦‚ä¸‹</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">â€‹android.defaultConfigpply plugin: <span class="string">'com.android.application'</span></div><div class="line"></div><div class="line">android &#123;</div><div class="line">    compileSdkVersion <span class="number">24</span></div><div class="line">    buildToolsVersion rootProject.buildToolsVersion</div><div class="line">    defaultConfig &#123;</div><div class="line">        applicationId <span class="string">"com.example.android.testing.espresso.BasicSample"</span></div><div class="line">        minSdkVersion <span class="number">10</span></div><div class="line">        targetSdkVersion <span class="number">24</span></div><div class="line">        versionCode <span class="number">1</span></div><div class="line">        versionName <span class="string">"1.0"</span></div><div class="line"></div><div class="line">        testInstrumentationRunner <span class="string">"android.support.test.runner.AndroidJUnitRunner"</span></div><div class="line">    &#125;</div><div class="line">    lintOptions &#123;</div><div class="line">        abortOnError <span class="keyword">false</span></div><div class="line">    &#125;</div><div class="line">    productFlavors &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> &#123;</div><div class="line">    <span class="comment">// App dependencies</span></div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.android.support:support-annotations:'</span> + rootProject.supportLibVersion;</div><div class="line">    <span class="keyword">compile</span> <span class="string">'com.google.guava:guava:18.0'</span></div><div class="line">    <span class="comment">// Testing-only dependencies</span></div><div class="line">    <span class="comment">// Force usage of support annotations in the test app, since it is internally used by the runner module.</span></div><div class="line">    androidTestCompile <span class="string">'com.android.support:support-annotations:'</span> + rootProject.supportLibVersion;</div><div class="line">    androidTestCompile <span class="string">'com.android.support.test:runner:'</span> + rootProject.runnerVersion;</div><div class="line">    androidTestCompile <span class="string">'com.android.support.test:rules:'</span> + rootProject.rulesVersion;</div><div class="line">    androidTestCompile <span class="string">'com.android.support.test.espresso:espresso-core:'</span> + rootProject.espressoVersion;</div><div class="line">&#125;</div></pre></td></tr></table></figure></li></ul><p>ä¹‹åæˆ‘ä»¬åªéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥gradleå°±ä¼šå¸®æˆ‘ä»¬ä¸‹è½½ä¾èµ–è¿è¡Œæµ‹è¯•äº†ï¼Œå¯¹äº†è®°ç€è¦å®‰è£…gradleåˆ°ä½ çš„ç³»ç»Ÿä¸­.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;espressoæ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#espressoæ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;espressoæ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;espressoæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;p&gt; Espresso æµ‹è¯•æ¡†æ¶æä¾›äº†ä¸€ç³»åˆ—çš„APIç”¨äºæ„å»ºUI
      
    
    </summary>
    
    
      <category term="androidè‡ªåŠ¨åŒ–" scheme="http://yoursite.com/tags/android%E8%87%AA%E5%8A%A8%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>ä»QAçš„è§’åº¦æ¥è°ˆè°ˆä»£ç è´¨é‡çš„æ”¹è¿›</title>
    <link href="http://yoursite.com/2016/10/31/qaquilty/"/>
    <id>http://yoursite.com/2016/10/31/qaquilty/</id>
    <published>2016-10-31T14:15:46.000Z</published>
    <updated>2017-09-21T07:40:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§éƒ¨åˆ†äººçœ‹åˆ°è¿™ä¸ªé¢˜ç›®æ—¶ï¼Œç›´æ¥çš„ååº”æ˜¯QAå…³å¿ƒä»£ç è´¨é‡å¹²å˜›ï¼Œèƒ½çœ‹æ‡‚ä»£ç å—ï¼Ÿæ€ä¹ˆç»™dev feedbackï¼Ÿ</p><p><img src="/image/qa.gif" alt="qa"></p><p>å¦‚æœè¿˜æœ‰äººæŒè¿™æ ·çš„è§‚ç‚¹åï¼Œé‚£ä¹ˆæˆ‘åªèƒ½è¯´too young too simpleã€‚<br>é¦–å…ˆæˆ‘ä»¬å¾—è°ˆè°ˆä»€ä¹ˆæ˜¯ä»£ç è´¨é‡ï¼Ÿ<br>åˆ›å»ºä¼˜ç§€çš„ä»£ç æ¶‰åŠåˆ°æ­£ç¡®æ€§ã€å¯ç»´æŠ¤æ€§ç”šè‡³ä¼˜ç¾æ€§ã€‚<br>æ­£ç¡®æ€§ï¼Œæœ€èµ·ç ä½ çš„ä»£ç å®ç°çš„ä¸šåŠ¡é€»è¾‘æ˜¯æ­£ç¡®çš„ã€‚<br>å¯ç»´æŠ¤æ€§ï¼Œå…¬å¸ä¸­å…¶ä»–çš„å°ä¼™ä¼´èƒ½çœ‹çœ‹æ‡‚ä½ çš„ä»£ç é€»è¾‘ï¼Œä¾¿äºä¿®æ”¹ä»£ç ã€‚<br>ä¼˜ç¾æ€§ï¼Œç¬¦åˆå„ç§ä»£ç è§„èŒƒï¼Œå…¶ä»–äººçœ‹åˆ°ä»£ç åæƒŠä¸ºå¤©äººã€‚<br>ä½†æ˜¯è¦åšåˆ°ä»¥ä¸Šå‡ ç‚¹ç»éæ˜“äº‹ï¼Œé¦–å…ˆä½ å¾—æœ‰é«˜è¶…çš„ç¼–ç¨‹èƒ½åŠ›ï¼Œå…¶æ¬¡ä½ å¯¹å‰ç«¯æˆ–åç«¯çš„ä»£ç è§„èŒƒæœ‰æ·±åˆ»çš„ç†è§£ï¼Œä½†æ˜¯èƒ½æœ‰è¿™æ ·èƒ½åŠ›çš„äººåˆæœ‰å¤šå°‘å‘¢ï¼Ÿ<br>æˆ‘ä»¬éƒ½çŸ¥é“è½¯ä»¶å¼€å‘æ˜¯å›¢é˜Ÿåˆä½œæ‰èƒ½å®Œæˆçš„å·¥ä½œã€‚<br>é‚£ä¹ˆé¡¹ç›®çš„è´¨é‡ä¸å®¢æˆ·çš„éœ€æ±‚æ‰æ˜¯é¡¹ç›®ç”Ÿå­˜ä¸‹å»çš„å…³é”®ã€‚<br>æ‰€ä»¥æ€ä¹ˆæ‰èƒ½æ”¹è¿›é¡¹ç›®ä»£ç çš„è´¨é‡ï¼Ÿæˆ‘ä»¬å…ˆçœ‹çœ‹ä¸šç•Œå·¨å¤´å…¬å¸éƒ½æ˜¯å¦‚ä½•åšçš„ï¼Ÿ</p><h2 id="microsoftæ€ä¹ˆåšï¼Ÿ"><a href="#microsoftæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="microsoftæ€ä¹ˆåšï¼Ÿ"></a>microsoftæ€ä¹ˆåšï¼Ÿ</h2><p><img src="/image/mircosoft.jpg" alt="microsoft"></p><p>æˆ‘ä»¬éƒ½çŸ¥é“å¾®è½¯æ˜¯åšæ“ä½œç³»ç»Ÿå‡ºèº«çš„ï¼Œå…¶å®å¾®è½¯çš„æµ‹è¯•èƒ½åŠ›ä¸æµ‹è¯•å·¥å…·éƒ½æ˜¯ä¸šç•Œä¸­é¢†å…ˆçš„ï¼Œä»¥ä¸‹æ˜¯ä¸¤å¼ è¡¨å±•ç¤ºçš„æ˜¯å¾®è½¯å¦‚ä½•ä»visual studioä¸å¼€å‘è¿‡ç¨‹ä¸­æé«˜ä»£ç è´¨é‡</p><h4 id="Visual-Studio"><a href="#Visual-Studio" class="headerlink" title="Visual Studio"></a>Visual Studio</h4><table><thead><tr><th>æ ‡å‡†</th><th>æè¿°</th></tr></thead><tbody><tr><td>ä½¿ç”¨ä»£ç åˆ†æå·¥å…·åˆ†æåº”ç”¨ç¨‹åºè´¨é‡</td><td>é™æ€ä»£ç åˆ†æå·¥å…·å¯æŸ¥æ‰¾ C++ å’Œæ‰˜ç®¡ä»£ç é‡Œçš„è®¾è®¡ã€ä½¿ç”¨ã€å¯ç»´æŠ¤æ€§å’Œæ ·å¼é—®é¢˜ã€‚ å…¶ä¸­çš„è®¸å¤šé—®é¢˜å¯èƒ½å¯¼è‡´éš¾ä»¥åœ¨æ ‡å‡†æµ‹è¯•ç¯å¢ƒä¸­é‡ç°çš„ bugã€‚</td></tr><tr><td>å•å…ƒæµ‹è¯•ä»£ç </td><td>â€œæµ‹è¯•èµ„æºç®¡ç†å™¨â€å¯ä»¥åœ¨å¼€å‘å®è·µä¸­è½»æ¾åœ°é›†æˆå•å…ƒæµ‹è¯•ã€‚ å¯ä»¥ä½¿ç”¨ Microsoft å•å…ƒæµ‹è¯•æ¡†æ¶æˆ–è‹¥å¹²ç¬¬ä¸‰æ–¹å’Œå¼€æºæ¡†æ¶ä¹‹ä¸€ã€‚</td></tr><tr><td>  æµ‹é‡æ‰˜ç®¡ä»£ç çš„å¤æ‚æ€§å’Œå¯ç»´æŠ¤æ€§</td><td>ä»£ç åº¦é‡æ˜¯ä¸€ç»„è½¯ä»¶åº¦é‡å€¼ï¼Œä½¿å¼€å‘äººå‘˜å¯ä»¥æ›´å¥½åœ°äº†è§£ä»–ä»¬æ­£åœ¨å¼€å‘çš„ä»£ç ã€‚ åº¦é‡å€¼åŒ…æ‹¬å‡½æ•°å’Œç±»çš„å¯ç»´æŠ¤æ€§æŒ‡æ•°ã€å‡½æ•°çš„åœˆå¤æ‚åº¦ã€ç±»çš„ç»§æ‰¿æ·±åº¦å’Œç±»è€¦åˆåº¦çš„æ•°å€¼ã€‚</td></tr><tr><td>  ä½¿ç”¨ä»£ç å…‹éš†æ£€æµ‹åŠŸèƒ½æŸ¥æ‰¾é‡å¤ä»£ç </td><td>ä»£ç å…‹éš†å·¥å…·å¯ç”¨äºåœ¨æ•´ä¸ª Visual Studio è§£å†³æ–¹æ¡ˆå†…æœç´¢ Visual C# å’Œ Visual Basic é¡¹ç›®ä¸­é‡å¤æˆ–é«˜åº¦ç›¸ä¼¼çš„ä»£ç ã€‚ å¯ä»¥ç»å¸¸é‡æ„ä»£ç ä»¥æ¶ˆé™¤é‡å¤ä»£ç ï¼Œä»è€Œåˆ›å»ºæ›´æ˜“äºç»´æŠ¤çš„è§£å†³æ–¹æ¡ˆã€‚</td></tr><tr><td>  PreEmptive Analytics for Team Foundation Server</td><td>PreEmptive Analytics for TFS CE æœ‰åŠ©äºå°†åé¦ˆé©±åŠ¨çš„å¼€å‘è¿‡ç¨‹é›†æˆåˆ°å¼€å‘å·¥ä½œæµä¸­ã€‚ å½“åº”ç”¨ç¨‹åºåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å°†å¼‚å¸¸æŠ¥å‘Šæ•°æ®å‘å›ç»™ PreEmptive Analytics æœåŠ¡ã€‚ ç„¶åï¼Œè¯¥æœåŠ¡å°†æ ¹æ®ä½ å®šä¹‰çš„è§„åˆ™å’Œé˜ˆå€¼åˆ›å»ºæˆ–æ›´æ–° Microsoft Team Foundation Server ä¸­çš„å·¥ä½œé¡¹ã€‚  </td></tr><tr><td>  PreEmptive Dotfuscator å’Œ Analytics CE</td><td>PreEmptive Dotfuscator æ˜¯ .NET æ¨¡ç³Šå¤„ç†ç¨‹åºå’Œå‹ç¼©ç¨‹åºï¼Œæœ‰åŠ©äºé˜²æ­¢ç¨‹åºé­é‡åå‘å·¥ç¨‹ï¼ŒåŒæ—¶ä½¿ç¨‹åºæ›´å°æ›´é«˜æ•ˆã€‚</td></tr></tbody></table><h4 id="å¼€å‘è¿‡ç¨‹ä¸­æ”¹è¿›ä»£ç è´¨é‡"><a href="#å¼€å‘è¿‡ç¨‹ä¸­æ”¹è¿›ä»£ç è´¨é‡" class="headerlink" title="å¼€å‘è¿‡ç¨‹ä¸­æ”¹è¿›ä»£ç è´¨é‡"></a>å¼€å‘è¿‡ç¨‹ä¸­æ”¹è¿›ä»£ç è´¨é‡</h4><table><thead><tr><th>æ ‡å‡†</th><th>æè¿°</th></tr></thead><tbody><tr><td>  è®¾è®¡å’Œä»£ç çš„æ£€æŸ¥å‡†åˆ™</td><td>æä¾›è‹¥å¹²å¸®åŠ©è¿›è¡Œè®¾è®¡å’Œä»£ç æ£€æŸ¥çš„æŠ€æœ¯ï¼Œé€šè¿‡è®©å…¶ä»–åŒäº‹æ£€æŸ¥ä»£ç æ¥å‘ç° bug å’Œä¸æ­£ç¡®çš„å‡è®¾ã€‚</td></tr><tr><td>  å®‰å…¨ä»£ç ç¼–å†™å‡†åˆ™</td><td>æè¿°ç¼–å†™å®‰å…¨ä»£ç çš„æŠ€æœ¯å’Œç­–ç•¥ã€‚  </td></tr><tr><td>  é«˜è´¨é‡ä»£ç ç­¾å…¥å‡†åˆ™</td><td>åˆ—å‡ºä»¥ä¸åŒæ–¹å¼æ£€æŸ¥ä»£ç ä»¥ç¡®ä¿ä»£ç å®ç°æ‚¨çš„é¢„æœŸé«˜è´¨é‡è®¾è®¡ç›®çš„çš„å‡†åˆ™ã€‚</td></tr><tr><td>  ä»£ç åˆ†æå·¥å…·ä½¿ç”¨å‡†åˆ™</td><td>æä¾›å‡ æ¡ä½¿ç”¨ä»£ç åˆ†æå·¥å…·çš„å‡†åˆ™ã€‚  </td></tr><tr><td>  æ£€æµ‹å’Œæ›´æ­£ C/C++ ä»£ç ç¼ºé™·</td><td>æè¿°å¦‚ä½•ä½¿ç”¨ç”¨äºæ‰˜ç®¡ä»£ç çš„ä»£ç åˆ†æå·¥å…·æ£€æµ‹å’Œæ›´æ­£ä»£ç ç¼ºé™·ã€‚</td></tr><tr><td>  ä»£ç åˆ†æç­¾å…¥ç­–ç•¥</td><td>æè¿°å¦‚ä½•åˆ›å»ºä¸ Team Foundation æºæ§ä»¶ç­¾å…¥å…³è”çš„è‡ªå®šä¹‰ç­¾å…¥ç­–ç•¥ã€‚</td></tr><tr><td>è°ƒè¯•å‡†åˆ™</td><td>æä¾›å‡ æ¡æŸ¥æ‰¾ä»£ç ç¼ºé™·çš„å‡†åˆ™ã€‚</td></tr></tbody></table><h2 id="google-åˆæ˜¯æ€ä¹ˆåšï¼Ÿ"><a href="#google-åˆæ˜¯æ€ä¹ˆåšï¼Ÿ" class="headerlink" title="google åˆæ˜¯æ€ä¹ˆåšï¼Ÿ"></a>google åˆæ˜¯æ€ä¹ˆåšï¼Ÿ</h2><p><img src="/image/google.jpg" alt="google"></p><ul><li><p>ä»£ç å®¡æŸ¥ã€‚åœ¨ä½ æäº¤ä»»ä½•ä»£ç æ”¹åŠ¨ä¹‹å‰ï¼Œä½ å¾—æ‰¾å»ä»£ç â€œä¸»äººâ€ç­¾å­—ç¡®è®¤ã€‚ä¸ºäº†å®ç°ï¼Œè¯„å®¡è€…ï¼ˆè¢«é¼“åŠ±å»ï¼‰å»ºè®®å¤§ä¿®ä»£ç ï¼Œè€Œä¸æ˜¯è®©å®ƒæˆä¸ºæ ¹æœ¬æ²¡æœ‰ç»è¿‡æ€è€ƒçš„â€œå›¾ç« â€ä»£ç ã€‚</p></li><li><p>æŒ‰è¯­è¨€å¯è¯»æ€§è¦æ±‚åšæŒä»£ç é£æ ¼æŒ‡å—ï¼ˆè¯·å‚é˜…è¿™é‡Œï¼‰ã€‚é™¤äº†è®©æˆ‘ä»¬ä»£ç æœ‰ç»Ÿä¸€çš„å¤–è§‚ï¼ˆæ‰€ä»¥æˆ‘ä»¬èƒ½å¿«é€Ÿè¯†åˆ«æ–¹æ³•ã€å˜äº†ç­‰ï¼‰ï¼Œæˆ‘ä»¬çš„é£æ ¼æŒ‡å—ç¦æ­¢äº†ä¸€äº›å¤æ‚ã€æ··ä¹±ã€æ˜“å‡ºé”™çš„ C++ ç‰¹æ€§ï¼ˆæ¯”å¦‚ï¼šclass ç±»å‹çš„é™æ€å’Œå…¨å±€å˜é‡ï¼‰ã€‚</p></li><li><p>æ•´ä¸ªå›¢é˜Ÿéƒ½è‡´åŠ›æ”¹è¿›æˆ‘ä»¬ä»£ç åº“çš„è´¨é‡ï¼Œç»´æŠ¤æˆ‘ä»¬çš„æ ¸å¿ƒåº“ï¼Œä¸æ–­åšå‡ºæ›´å¥½çš„å·¥å…·ã€‚</p></li><li><p>ä¸€ä¸ªæ´»è·ƒçš„â€œcode healthâ€è¯¾é¢˜ç»„ã€‚</p></li><li>å‘å¸ƒè½¯ä»¶æ—¶ï¼Œä¸å¯¹å¤–éƒ¨æœŸé™æ‰¿æ‹…è´£ä»»ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œè¿™è®©æˆ‘ä»¬å¯ä»¥æ­£ç¡®åšäº‹ï¼Œè€Œéä¸ºäº†æœŸé™å†…å®Œæˆä»»åŠ¡æŠŠä¹±ä¸ƒå…«ç³Ÿçš„ä»£ç æ‹¼å‡‘èµ·æ¥ã€‚</li><li>â€œFix it.â€ ä¾‹å¦‚ï¼Œä¸€ä¸ªå·¥ç¨‹å¸ˆæˆ–è®¸è¯´ï¼Œâ€œæˆ‘è®¤ä¸ºæˆ‘ä»¬çœŸåº”è¯¥åˆ«å†ç”¨è¿‡æ—¶çš„  Cruft Map ç±»ï¼ˆclassï¼‰äº†ã€‚æˆ‘æ‰“ç®—åœ¨ 1 æœˆ 20 æ—¥ç»„ç»‡ä¸€æ¬¡ Fix itã€‚â€ å½“ 1 æœˆ 20 æ—¥æ¥ä¸´æ—¶ï¼Œå¤§å®¶åº”å½“æš‚åœå…¶æ­£å¸¸è¿ä½œï¼ŒæŠŠä»–ä»¬ä»£ç ä¸­çš„ Cruft Maps éƒ½æ¢æ‰ã€‚åœ¨ 1 æœˆ 21 æ—¥ï¼ŒGoogle å°±æ°¸è¿œå’Œ Cruft Map è¯´æ‹œæ‹œäº†ï¼ä¸è¿‡æœ€è¿‘ï¼Œæ ¸å¿ƒåº“å›¢é˜Ÿå·²ç»å¾ˆä¼˜ç§€äº†ï¼Œè²Œä¼¼æ²¡æœ‰å•¥ä¸œè¥¿å¯å†å€¼å¾—ç±»ä¼¼çš„ fix it äº†ã€‚</li><li>æµ‹è¯•æ–‡åŒ–ã€‚å•å…ƒæµ‹è¯•è¦†ç›–ç‡å¯èƒ½æ¥è¿‘ 100%ï¼Œæˆ‘ä»¬æœ‰æŒç»­æ„å»º/æ•´åˆ/æµ‹è¯•ï¼Œè¿˜æœ‰çŸ¥åçš„ â€œTesting on the Toiletâ€ (è¯·å‚è§Google Testing Blog)</li></ul><h2 id="facebook-å‘¢ï¼Ÿ-åˆæœ‰ä»€ä¹ˆä¸ä¸€æ ·"><a href="#facebook-å‘¢ï¼Ÿ-åˆæœ‰ä»€ä¹ˆä¸ä¸€æ ·" class="headerlink" title="facebook å‘¢ï¼Ÿ åˆæœ‰ä»€ä¹ˆä¸ä¸€æ ·"></a>facebook å‘¢ï¼Ÿ åˆæœ‰ä»€ä¹ˆä¸ä¸€æ ·</h2><p><img src="/image/facebook.jpeg" alt="facebook"></p><ul><li>å¼€å‘å¯¹è´¨é‡è´Ÿè´£ï¼š å¼€å‘ä»è®¾è®¡ï¼Œå®ç°ï¼Œæµ‹è¯•ï¼Œåˆ°éƒ¨ç½²éƒ½è¦è‡ªå·±åšã€‚å…¶å®ƒåšå·¥å…·ï¼Œæµç¨‹çš„å·¥ç¨‹å¸ˆé€šè¿‡å¼€å‘å·¥å…·å’Œæµç¨‹æ¥å¸®åŠ©å¼€å‘äººå‘˜æ›´ä¸ºç®€å•æ–¹ä¾¿åœ°åšæµ‹è¯•ï¼Œåšéƒ¨ç½²å’Œåšç›‘æ§ã€‚æ¯ä¸ªå¼€å‘äººå‘˜æœ‰è‡ªå·±å•ç‹¬çš„æµ‹è¯•ç¯å¢ƒï¼Œæµ‹è¯•ç¯å¢ƒå°±æ˜¯è¿è¡Œåœ¨å¼€å‘æœ¬åœ°æœºå™¨ä¸Šï¼Œéƒ¨ç½²éå¸¸ç®€å•å¿«é€Ÿã€‚æµ‹è¯•ç¯å¢ƒç”¨çš„æ˜¯çœŸå®çš„ç”¨æˆ·æ•°æ®ã€‚</li><li>æŒç»­é›†æˆå’Œæµ‹è¯•è‡ªåŠ¨åŒ–ï¼šæ¯å‘¨å‘å¸ƒä¸€æ¬¡ã€‚æ˜ŸæœŸå¤©æ™šä¸Šï¼Œè¦å‘å¸ƒçš„æ„å»ºä»ä¸»çº¿ä¸Šåˆ†æ”¯å‡ºæ¥åˆ°å‘å¸ƒåˆ†æ”¯ï¼Œåˆ°æ˜ŸæœŸäºŒçš„ä¸­åˆå¦‚æœæ²¡æœ‰å¤§çš„é—®é¢˜ï¼Œå°±å¯ä»¥ä¸Šçº¿äº†ã€‚æ‰€æœ‰çš„æµ‹è¯•è¿è¡Œæ§åˆ¶åœ¨10åˆ†é’Ÿä»¥å†…ï¼Œæ‰€ä»¥ä¸éœ€è¦è€ƒè™‘ä¸è¿è¡Œå“ªäº›æµ‹è¯•ç”¨ä¾‹ã€‚è¿è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ã€‚ ï¼ˆåªæ˜¯å¬è¯´ï¼Œæ²¡æœ‰ç»è¿‡è€ƒè¯ã€‚ï¼‰</li><li>ä¸¥æ ¼å®æ–½ä»£ç å®¡è®¡ï¼šåœ¨Facebook åš code reviewæ—¶é—´å¤§çº¦å 50%ï¼Œç®¡ç†è€…å¯¹ä»£ç è´¨é‡è´Ÿæœ‰ä¸€å®šè´£ä»» ã€‚ç”šè‡³ä»£ç è´¨é‡é«˜äºä¸€åˆ‡ï¼šFacebook Code reviewæ˜¯é‡ç‚¹KPIè€ƒæ ¸çš„å¯¹è±¡ï¼Œå®è¡Œè¿ååˆ¶ï¼Œå¦‚æœå› ä¸ºä»£ç è´¨é‡é—®é¢˜ï¼Œé‚£ä¹ˆäº§ç”Ÿçš„KPIè´£ä»»åŒ…æ‹¬é¢†å¯¼30ï¼…ã€ç¨‹åºå‘˜50ï¼…ã€å®¡æ ¸äººå‘˜20ï¼…ã€‚ åœ¨ä»£ç checkinä¹‹å‰ï¼Œéƒ½è¦ç”±ä¸“äººè¿›è¡Œreviewã€‚Facebook åˆ›å§‹äººå…¼ CEO é©¬å…‹æ‰å…‹ä¼¯æ ¼ä¼šäº²è‡ªå¯¹ News Feed æ¯ä¸ªä»£ç æ›´æ–°æŠŠå…³ã€‚åœ¨ Facebookï¼Œæ‰€æœ‰é‡å¤§å‡çº§çš„ä»£ç éƒ½è¿›è¡Œå¼ºåˆ¶è¯„ä¼°ï¼Œä»»ä½•ä¸€ä¸ªæ”¹åŠ¨éƒ½è‡³å°‘ç”±ä¸€äººæŠŠå…³ã€‚ä½†æ˜¯ï¼Œæ— è®ºå·¥ç¨‹å¸ˆå¯¹ News Feed åšå‡ºä»»ä½•æ”¹åŠ¨ï¼Œéƒ½å°†ç”±æ‰å…‹ä¼¯æ ¼äº²è‡ªæŠŠå…³ã€‚</li><li>å†…æµ‹ ï¼ˆdog foodï¼‰ï¼šå‘å¸ƒä¹‹å‰ï¼Œå…¬å¸å‘˜å·¥ä½¿ç”¨è¦å‘å¸ƒçš„åŠŸèƒ½ã€‚2ï¼3å¤©ä¹‹å†…å¯ä»¥æœ‰å‡ ç™¾ä¸ªæˆ–ä¸Šåƒä¸ªäººåœ¨ä½¿ç”¨æ–°åŠŸèƒ½ã€‚è´Ÿè´£è¦å‘å¸ƒåŠŸèƒ½çš„å¼€å‘äººå‘˜åœ¨æ˜ŸæœŸå¤©æ™šä¸Šåˆ°æ˜ŸæœŸäºŒä¸­åˆä¹‹é—´ä¼šåšå¤§é‡çš„æµ‹è¯• ã€‚</li><li>é€šè¿‡ç°åº¦å‘å¸ƒæ§åˆ¶é£é™©ï¼šæ–°åŠŸèƒ½æœ¬èº«è´¨é‡å¯èƒ½æœ‰é—®é¢˜ï¼Œæ–°åŠŸèƒ½ä¹Ÿå¯èƒ½å½±å“å…¶å®ƒç°æœ‰åŠŸèƒ½ã€‚ä¸ºäº†å‡å°‘æˆ–æ§åˆ¶è¿™äº›é£é™©ã€‚Facebookå¼€å‘äº†ä¸€æ•´å¥—å®Œå–„çš„å‘å¸ƒï¼Œæ§åˆ¶ï¼Œç›‘æ§æµç¨‹å’Œå·¥å…·ã€‚åšåˆ°ï¼š1.æµ‹è¯•é€šè¿‡åï¼Œäº§å“è´¨é‡åŸºæœ¬æœ‰ä¿è¯ã€‚2.å³ä½¿æœ‰æ¼æµ‹çš„bugï¼Œåªä¼šå½±å“å¾ˆå°‘é‡çš„ç”¨æˆ·ã€‚3.åŠæ—¶ç›‘æ§åˆ°é—®é¢˜ã€‚4.åŠæ—¶ä¿®å¤ã€‚</li><li>äº§å“ç›‘æ§ï¼šé€šè¿‡ç¤¾åŒºè®¨è®ºçš„æ­£è´Ÿé¢èˆ†æƒ…ï¼ŒåŠä¸å†å²åº”ç”¨æ•°æ®çš„å¯¹æ¯”æƒ…å†µï¼Œç›‘æ§äº§å“çš„ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€æŠ€æœ¯ä¿®å¤ã€‚<h2 id="thoughtworks-ä¸šç•Œä»¥æ•æ·è‘—ç§°çš„è½¯ä»¶ä¼ä¸šåˆæ˜¯å¦‚ä½•æ”¹è¿›çš„"><a href="#thoughtworks-ä¸šç•Œä»¥æ•æ·è‘—ç§°çš„è½¯ä»¶ä¼ä¸šåˆæ˜¯å¦‚ä½•æ”¹è¿›çš„" class="headerlink" title="thoughtworks ä¸šç•Œä»¥æ•æ·è‘—ç§°çš„è½¯ä»¶ä¼ä¸šåˆæ˜¯å¦‚ä½•æ”¹è¿›çš„"></a>thoughtworks ä¸šç•Œä»¥æ•æ·è‘—ç§°çš„è½¯ä»¶ä¼ä¸šåˆæ˜¯å¦‚ä½•æ”¹è¿›çš„</h2><img src="/image/thoughtworks.jpg" alt="thoughtworks"></li></ul><ul><li>é¡¹ç›®çš„åˆæœŸï¼Œdev,BA,QAå°±ä¼šåšåˆ°ä¸€èµ·IPM,è®©ä¸åŒçš„è§’è‰²éƒ½èƒ½äº†è§£storyï¼Œè®©devå°½æ—©çš„åˆ†æstoryä»¥åŠé‡‡ç”¨é‚£ç§æŠ€æœ¯å»å®Œæˆå·¥ä½œã€‚<br><img src="/image/twqa.jpg" alt="pair"></li></ul><ul><li>å¼€å‘é˜¶æ®µï¼Œdevä¼šé‡‡ç”¨pairçš„æ–¹å¼ï¼Œå’ŒQAï¼Œå…¶ä»–devå…±åŒå®Œæˆstoryï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œä¸€è®©ä¸ç†Ÿæ‚‰çš„æ–°äººå°½å¿«çš„äº†è§£é¡¹ç›®æ¶æ„ï¼ŒäºŒä¸QApair,QAå°†ä¼šæä¾›devè€ƒè™‘ä¸è¶³çš„ç‚¹ï¼Œä¸€èµ·ç¼–å†™å•å…ƒæµ‹è¯•ä»¥åŠfeature testã€‚</li><li>å½“devå®Œæˆä»£ç å·¥ä½œåï¼Œä¼šåœ¨githubä¸Šå‘å‡ºpull request æˆ–é‚€è¯·å…¶ä»–devï¼Œä¸€èµ·è¯„å®¡ä»£ç ã€‚</li><li>å„ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±å®Œå¤‡çš„cdæµç¨‹ï¼Œç¡®ä¿å‘å¸ƒè¿‡ç¨‹çš„æ­£ç¡®æ€§ï¼Œå‡å°‘äººä¸ºæ‰‹å·¥æ“ä½œçš„å¤±è¯¯ã€‚</li></ul><p>ä»ä»¥ä¸Šä¸šç•Œä»£è¡¨å…¬å¸çš„æ”¹è¿›æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºå®ƒä»¬éƒ½æ˜¯ä»ä»¥ä¸‹å‡ ç‚¹å‡ºå‘çš„ï¼š</p><ol><li>å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–ç‡<br>UIè‡ªåŠ¨åŒ–æµ‹è¯•çš„è¦†ç›–ç‡å¾ˆéš¾è¢«ä¿è¯ï¼Œä¸æ–­çš„æ”¹å˜çš„ui,ä½¿ä½¿ç”¨UIæµ‹è¯•æ¥éªŒè¯äº§å“çš„åŠŸèƒ½å˜å¾—ååˆ†éº»çƒ¦ï¼Œä½†æ˜¯å•å…ƒæµ‹è¯•åˆ™ä¸åŒï¼Œå„ç§è¯­è¨€éƒ½æœ‰è‡ªå·±çš„æµ‹è¯•å·¥å…·ä»¥åŠæµ‹è¯•è¦†ç›–ç‡å·¥å…·å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„å®Œå–„æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ¥å£æµ‹è¯•ä¸pactæµ‹è¯•æ¥ä¿è¯ç¬¬ä¸‰æ–¹é›†æˆæœåŠ¡çš„æ­£ç¡®æ€§ï¼Œæ‰€ä»¥é«˜è¦†ç›–ç‡çš„å•å…ƒæµ‹è¯•æ—¶äº§å“çš„è´¨é‡çš„åŸºç¡€ã€‚</li><li>ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥æœºåˆ¶<br>facebookï¼Œgoogleï¼Œå¾®è½¯ç­‰å…¬å¸ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥æœºåˆ¶ï¼Œæ˜¯ç¡®ä¿ä»£ç ä¸è¢«ç ´åçš„å…³é”®ç‚¹ï¼Œä¸ä¼šå› ä¸ºå›¢é˜Ÿæˆå‘˜çš„æŸæ¬¡ç²—å¿ƒçš„æäº¤ï¼Œé€ æˆæ•´ä¸ªé¡¹ç›®çš„å¤±è´¥ã€‚</li><li><p>å¼ºå¤§çš„ä»£ç åˆ†æå·¥å…·<br>ä»£ç çº§åˆ«çš„è§„èŒƒåŒ–ï¼Œä»¥åŠåŠ¨æ€ä¸é™æ€æ‰«æï¼Œè¿›ä¸€æ­¥çš„å¸®åŠ©è½¯ä»¶å¼€å‘äººå‘˜ã€è´¨é‡ä¿è¯äººå‘˜æŸ¥æ‰¾ä»£ç ä¸­å­˜åœ¨çš„ç»“æ„æ€§é”™è¯¯ã€å®‰å…¨æ¼æ´ç­‰é—®é¢˜ï¼Œä»è€Œä¿è¯è½¯ä»¶çš„æ•´ä½“è´¨é‡ã€‚ä¸CI,CDçš„é›†æˆï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬å°½æ—©çš„å‘ç°ä»£ç ä¸­å­˜åœ¨çš„é”™è¯¯ã€‚</p></li><li><p>è§„èŒƒåŒ–çš„æµ‹è¯•æµç¨‹<br>å„ä¸ªå…¬å¸è§„èŒƒåŒ–çš„æµ‹è¯•æµç¨‹ï¼Œä¿è¯é¡¹ç›®åœ¨æ¯ä¸€é˜¶æ®µéƒ½èƒ½å¤Ÿè¾“å‡ºé«˜è´¨é‡çš„ä»£ç ã€‚</p></li><li>å®Œå–„çš„é£é™©æ§åˆ¶<br>å®Œå–„çš„é£é™©æ§åˆ¶ï¼Œä¸ä»…ä»…è¡¨ç°çš„googleä¸Facebookçš„A/Bæµ‹è¯•ï¼Œä¹Ÿè¡¨ç°åœ¨å½“æœ‰ä»»ä½•é‡å¤§é—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿéšæ„çš„åˆ‡æ¢åˆ°æ—§çš„ç‰ˆæœ¬ï¼Œä¿è¯äº§å“ä¸å› ä¸ºè¯¥é—®é¢˜ï¼Œå°±é€ æˆå®•æœºã€‚</li><li>å®æ—¶çš„ç›‘æ§<br>è¿™äº›è¡Œä¸šçš„å·¨å¤´ï¼Œéƒ½æœ‰ç€éå¸¸å¼ºå¤§çš„è¿ç»´å›¢é˜Ÿï¼Œä»äº§å“çš„å¼€å‘é˜¶æ®µå°±å¼€å§‹å®æ–½äº†å„ç§ç›‘æ§æ‰‹æ®µï¼Œç›‘æ§èŒƒå›´åŒ…æ‹¬ç¼–è¯‘é˜¶æ®µï¼Œéƒ¨ç½²é˜¶æ®µï¼Œäº§å“ç¯å¢ƒï¼Œç¡¬ä»¶æœåŠ¡å™¨çš„çŠ¶æ€ç­‰ï¼Œå¸®åŠ©é¡¹ç›®çš„ä¸­æ‰€æœ‰æˆå‘˜åŠæ—¶çš„å‘ç°äº§å“ä¸­å­˜åœ¨çš„é—®é¢˜ï¼Œå¿«é€Ÿè·Ÿè¸ªä»¥åŠå®šä½é—®é¢˜ã€‚</li></ol><p><strong>ç¬¬ä¸€ç¯‡åˆ†æå„ä¸ªå…¬å¸éƒ½é‡‡å–äº†é‚£äº›ä»£ç è´¨é‡æ”¹è¿›æªæ–½å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šä»ä¸åŒçš„è§’åº¦å»è¯¦ç»†ä»‹ç»è¿™äº›æ”¹è¿›æªæ–½ã€‚</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¤§éƒ¨åˆ†äººçœ‹åˆ°è¿™ä¸ªé¢˜ç›®æ—¶ï¼Œç›´æ¥çš„ååº”æ˜¯QAå…³å¿ƒä»£ç è´¨é‡å¹²å˜›ï¼Œèƒ½çœ‹æ‡‚ä»£ç å—ï¼Ÿæ€ä¹ˆç»™dev feedbackï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/image/qa.gif&quot; alt=&quot;qa&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœè¿˜æœ‰äººæŒè¿™æ ·çš„è§‚ç‚¹åï¼Œé‚£ä¹ˆæˆ‘åªèƒ½è¯´too young too si
      
    
    </summary>
    
    
      <category term="QA" scheme="http://yoursite.com/tags/QA/"/>
    
  </entry>
  
  <entry>
    <title>capybara5--å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯</title>
    <link href="http://yoursite.com/2016/09/01/capybara5/"/>
    <id>http://yoursite.com/2016/09/01/capybara5/</id>
    <published>2016-09-01T14:31:15.000Z</published>
    <updated>2017-09-21T07:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯"><a href="#å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯" class="headerlink" title="å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯"></a>å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯</h2><p>ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ï¼Œè®©æˆ‘ä»¬æ¥å®ç°æˆ‘ä»¬ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•åœºæ™¯ï¼Œç™¾åº¦ä¸Šæœç´¢capybaraã€‚</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">describe <span class="string">"i want search capybara"</span>,  :<span class="keyword">type</span> =&gt; :feature do</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keyword">context</span> <span class="symbol">'i</span> need <span class="keyword">to</span> <span class="keyword">open</span> browser' do</div><div class="line">      it <span class="symbol">'should</span> be  has an browser'</div><div class="line"></div><div class="line">  <span class="keyword">end</span></div><div class="line">    <span class="keyword">context</span> <span class="symbol">'when</span> i input baidu url into the browser textarea' do</div><div class="line">      it <span class="symbol">'should</span> be redirect  <span class="keyword">to</span> the baidu homepage'</div><div class="line">  <span class="keyword">end</span></div><div class="line">    <span class="keyword">context</span> <span class="symbol">'when</span> i input the capybara into search <span class="literal">text</span> ' do</div><div class="line">      it <span class="symbol">'responds</span> <span class="keyword">with</span> <span class="number">200</span> <span class="keyword">and</span> show the result'</div><div class="line"></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure><hr><p>rspec ä¸ cucumberå®Œæ•´çš„ä½¿ç”¨æŒ‡å—å¹¶ä¸åŒ…å«åœ¨æœ¬ä¹¦çš„èŒƒç•´ï¼Œä½†æˆ‘ä¼šç»™å¤§å®¶è®²è§£åŸºæœ¬çš„é¡¹ç›®æ¶æ„ä¸è¯­æ³•ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½çš„ç†è§£capybaraå’Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„è§„èŒƒã€‚</p><h3 id="rspecæ–¹å¼"><a href="#rspecæ–¹å¼" class="headerlink" title="rspecæ–¹å¼"></a>rspecæ–¹å¼</h3><p>å¯¹äºåŸºäºrspecæ¡†æ¶çš„é¡¹ç›®ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºspecç›®å½•ï¼Œæ¥å°†æˆ‘ä»¬çš„æµ‹è¯•æ–‡ä»¶æ”¾ç½®å½“ä¸­ï¼Œè¿™æ ·åšä½¿æˆ‘ä»¬é¡¹ç›®ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ã€‚<br>æ­¤å¤–æˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºspec/rspec_help.rbæ–‡ä»¶å¸®åŠ©æˆ‘ä»¬è®¾ç½®æµ‹è¯•çš„é…ç½®ä¿¡æ¯ã€‚</p><p>å¦‚æœä½ çš„é¡¹ç›®æ˜¯åŸºäºrailsçš„ï¼Œé‚£ä¹ˆå°±æ›´ç®€å•äº†ï¼Œä½ åªéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç³»ç»Ÿå°±å¸®åŠ©æˆ‘ä»¬å®Œæˆè¿™äº›åŸºç¡€é…ç½®å’Œæ–‡ä»¶çš„ç”Ÿæˆ</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails <span class="keyword">generate</span> rspec:install</div></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.rspec</div><div class="line">spec/spec_helper.rb</div><div class="line">spec/rails_helper.rb</div></pre></td></tr></table></figure><p>è®©æˆ‘æ­£å¼å¼€å§‹<br>é¦–å…ˆæˆ‘ä»¬éœ€è¦é…ç½®spec_helper.rbæ–‡ä»¶ï¼Œ<br>å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°spec_helper.rbä¸­ï¼Œç¨åç« èŠ‚ä¸­æˆ‘å°†å…·ä½“ä»‹ç»é…ç½®æ–‡ä»¶ä¸­æ¯æ¡ä»£ç å®é™…çš„ä½œç”¨</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div></pre></td><td class="code"><pre><div class="line">require <span class="string">"capybara/rspec"</span></div><div class="line">require <span class="string">"capybara"</span></div><div class="line">require <span class="string">"rspec"</span></div><div class="line">require <span class="string">'pry'</span></div><div class="line"></div><div class="line">Capybara.default_driver = <span class="symbol">:selenium</span></div><div class="line">Capybara.app_host = <span class="string">'http://www.baidu.com'</span></div><div class="line"></div><div class="line">Capybara.register_driver <span class="symbol">:selenium</span> <span class="keyword">do</span> |app| <span class="symbol">Capybara:</span><span class="symbol">:Selenium</span><span class="symbol">:</span><span class="symbol">:Driver</span>.new(</div><div class="line">app, <span class="symbol">:browser</span> =&gt; <span class="symbol">:chrome</span> )</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="comment"># This file was generated by the `rspec --init` command. Conventionally, all</span></div><div class="line"><span class="comment"># specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.</span></div><div class="line"><span class="comment"># The generated `.rspec` file contains `--require spec_helper` which will cause</span></div><div class="line"><span class="comment"># this file to always be loaded, without a need to explicitly require it in any</span></div><div class="line"><span class="comment"># files.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Given that it is always loaded, you are encouraged to keep this file as</span></div><div class="line"><span class="comment"># light-weight as possible. Requiring heavyweight dependencies from this file</span></div><div class="line"><span class="comment"># will add to the boot time of your test suite on EVERY test run, even for an</span></div><div class="line"><span class="comment"># individual file that may not need all of that loaded. Instead, consider making</span></div><div class="line"><span class="comment"># a separate helper file that requires the additional dependencies and performs</span></div><div class="line"><span class="comment"># the additional setup, and require it from the spec files that actually need</span></div><div class="line"><span class="comment"># it.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># The `.rspec` file also contains a few flags that are not defaults but that</span></div><div class="line"><span class="comment"># users commonly want.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># See http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration</span></div><div class="line">RSpec.configure <span class="keyword">do</span> |config|</div><div class="line"></div><div class="line">  <span class="comment"># rspec-expectations config goes here. You can use an alternate</span></div><div class="line">  <span class="comment"># assertion/expectation library such as wrong or the stdlib/minitest</span></div><div class="line">  <span class="comment"># assertions if you prefer.</span></div><div class="line"></div><div class="line">  config.expect_with <span class="symbol">:rspec</span> <span class="keyword">do</span> |expectations|</div><div class="line">    <span class="comment"># This option will default to `true` in RSpec 4. It makes the `description`</span></div><div class="line">    <span class="comment"># and `failure_message` of custom matchers include text for helper methods</span></div><div class="line">    <span class="comment"># defined using `chain`, e.g.:</span></div><div class="line">    <span class="comment">#     be_bigger_than(2).and_smaller_than(4).description</span></div><div class="line">    <span class="comment">#     # =&gt; "be bigger than 2 and smaller than 4"</span></div><div class="line">    <span class="comment"># ...rather than:</span></div><div class="line">    <span class="comment">#     # =&gt; "be bigger than 2"</span></div><div class="line">    expectations.include_chain_clauses_in_custom_matcher_descriptions = <span class="keyword">true</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># rspec-mocks config goes here. You can use an alternate test double</span></div><div class="line">  <span class="comment"># library (such as bogus or mocha) by changing the `mock_with` option here.</span></div><div class="line">  config.mock_with <span class="symbol">:rspec</span> <span class="keyword">do</span> |mocks|</div><div class="line">    <span class="comment"># Prevents you from mocking or stubbing a method that does not exist on</span></div><div class="line">    <span class="comment"># a real object. This is generally recommended, and will default to</span></div><div class="line">    <span class="comment"># `true` in RSpec 4.</span></div><div class="line">    mocks.verify_partial_doubles = <span class="keyword">true</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># This option will default to `:apply_to_host_groups` in RSpec 4 (and will</span></div><div class="line">  <span class="comment"># have no way to turn it off -- the option exists only for backwards</span></div><div class="line">  <span class="comment"># compatibility in RSpec 3). It causes shared context metadata to be</span></div><div class="line">  <span class="comment"># inherited by the metadata hash of host groups and examples, rather than</span></div><div class="line">  <span class="comment"># triggering implicit auto-inclusion in groups with matching metadata.</span></div><div class="line">  config.shared_context_metadata_behavior = <span class="symbol">:apply_to_host_groups</span></div><div class="line"></div><div class="line"><span class="comment"># The settings below are suggested to provide a good initial experience</span></div><div class="line"><span class="comment"># with RSpec, but feel free to customize to your heart's content.</span></div><div class="line">=<span class="keyword">begin</span></div><div class="line">  <span class="comment"># This allows you to limit a spec run to individual examples or groups</span></div><div class="line">  <span class="comment"># you care about by tagging them with `:focus` metadata. When nothing</span></div><div class="line">  <span class="comment"># is tagged with `:focus`, all examples get run. RSpec also provides</span></div><div class="line">  <span class="comment"># aliases for `it`, `describe`, and `context` that include `:focus`</span></div><div class="line">  <span class="comment"># metadata: `fit`, `fdescribe` and `fcontext`, respectively.</span></div><div class="line">  config.filter_run_when_matching <span class="symbol">:focus</span></div><div class="line"></div><div class="line">  <span class="comment"># Allows RSpec to persist some state between runs in order to support</span></div><div class="line">  <span class="comment"># the `--only-failures` and `--next-failure` CLI options. We recommend</span></div><div class="line">  <span class="comment"># you configure your source control system to ignore this file.</span></div><div class="line">  config.example_status_persistence_file_path = <span class="string">"spec/examples.txt"</span></div><div class="line"></div><div class="line">  <span class="comment"># Limits the available syntax to the non-monkey patched syntax that is</span></div><div class="line">  <span class="comment"># recommended. For more details, see:</span></div><div class="line">  <span class="comment">#   - http://rspec.info/blog/2012/06/rspecs-new-expectation-syntax/</span></div><div class="line">  <span class="comment">#   - http://www.teaisaweso.me/blog/2013/05/27/rspecs-new-message-expectation-syntax/</span></div><div class="line">  <span class="comment">#   - http://rspec.info/blog/2014/05/notable-changes-in-rspec-3/#zero-monkey-patching-mode</span></div><div class="line">  config.disable_monkey_patching!</div><div class="line"></div><div class="line">  <span class="comment"># This setting enables warnings. It's recommended, but in some cases may</span></div><div class="line">  <span class="comment"># be too noisy due to issues in dependencies.</span></div><div class="line">  config.warnings = <span class="keyword">true</span></div><div class="line"></div><div class="line">  <span class="comment"># Many RSpec users commonly either run the entire suite or an individual</span></div><div class="line">  <span class="comment"># file, and it's useful to allow more verbose output when running an</span></div><div class="line">  <span class="comment"># individual spec file.</span></div><div class="line">  if config.files_to_run.one?</div><div class="line">    <span class="comment"># Use the documentation formatter for detailed output,</span></div><div class="line">    <span class="comment"># unless a formatter has already been configured</span></div><div class="line">    <span class="comment"># (e.g. via a command-line flag).</span></div><div class="line">    config.default_formatter = <span class="string">'doc'</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="comment"># Print the 10 slowest examples and example groups at the</span></div><div class="line">  <span class="comment"># end of the spec run, to help surface which specs are running</span></div><div class="line">  <span class="comment"># particularly slow.</span></div><div class="line">  config.profile_examples = <span class="number">10</span></div><div class="line"></div><div class="line">  <span class="comment"># Run specs in random order to surface order dependencies. If you find an</span></div><div class="line">  <span class="comment"># order dependency and want to debug it, you can fix the order by providing</span></div><div class="line">  <span class="comment"># the seed, which is printed after each run.</span></div><div class="line">  <span class="comment">#     --seed 1234</span></div><div class="line">  config.order = <span class="symbol">:random</span></div><div class="line"></div><div class="line">  <span class="comment"># Seed global randomization in this process using the `--seed` CLI option.</span></div><div class="line">  <span class="comment"># Setting this allows you to use `--seed` to deterministically reproduce</span></div><div class="line">  <span class="comment"># test failures related to randomization by passing the same `--seed` value</span></div><div class="line">  <span class="comment"># as the one that triggered the failure.</span></div><div class="line">  Kernel.srand config.seed</div><div class="line">=<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure><p>æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œæˆ‘ä»¬çš„æµ‹è¯•</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [22:00:31]</span></div><div class="line">$ rspec ./spec/features/baidusearch_spec.rb</div><div class="line">***</div><div class="line"></div><div class="line">Pending: (Failures listed here are expected <span class="keyword">and</span> <span class="keyword">do</span> <span class="keyword">not</span> affect your suite<span class="comment">'s status)</span></div><div class="line"></div><div class="line">  <span class="number">1</span>) i want search capybara i need <span class="keyword">to</span> open browser should be  has an browser</div><div class="line">     <span class="meta"># Not yet implemented</span></div><div class="line">     <span class="meta"># ./spec/features/bb_spec.rb:9</span></div><div class="line"></div><div class="line">  <span class="number">2</span>) i want search capybara <span class="keyword">when</span> i input baidu url <span class="keyword">into</span> the browser textarea should be redirect  <span class="keyword">to</span> the baidu homepage</div><div class="line">     <span class="meta"># Not yet implemented</span></div><div class="line">     <span class="meta"># ./spec/features/bb_spec.rb:16</span></div><div class="line"></div><div class="line">  <span class="number">3</span>) i want search capybara <span class="keyword">when</span> i input the capybara <span class="keyword">into</span> search <span class="keyword">text</span>  responds <span class="keyword">with</span> <span class="number">200</span> <span class="keyword">and</span> show the result</div><div class="line">     <span class="meta"># Not yet implemented</span></div><div class="line">     <span class="meta"># ./spec/features/bb_spec.rb:20</span></div><div class="line"></div><div class="line"></div><div class="line">Finished <span class="keyword">in</span> <span class="number">0.00059</span> seconds (files took <span class="number">1.37</span> seconds <span class="keyword">to</span> load)</div><div class="line"><span class="number">3</span> examples, <span class="number">0</span> failures, <span class="number">3</span> pending</div></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»æµ‹è¯•ç»“æœèƒ½çœ‹å‡ºï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°ä»»ä½•å…·ä½“æ“ä½œæ­¥éª¤ï¼Œæ¥ä¸‹å°±è®©æˆ‘ä»¬å®Œæˆè¿™äº›å·¥ä½œã€‚<br>å°†æˆ‘ä»¬æµ‹è¯•æ–‡ä»¶baidusearch_spec.rbä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">describe</span> <span class="string">"i want search capybara"</span>,  :<span class="keyword">type</span> =&gt; :feature <span class="keyword">do</span></div><div class="line">  <span class="keyword">context</span> <span class="string">"the page"</span> <span class="keyword">do</span></div><div class="line"></div><div class="line">    <span class="keyword">before</span> <span class="keyword">do</span></div><div class="line">      page.driver.browser.manage.window.resize_to(<span class="number">1440</span>,<span class="number">900</span>) #Mention it here</div><div class="line">      visit <span class="string">"/"</span></div><div class="line"></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="keyword">context</span> <span class="string">'i need to open browser'</span> <span class="keyword">do</span></div><div class="line">      it <span class="string">'should be  has an browser'</span> <span class="keyword">do</span></div><div class="line">      expect(page.driver.browser.browser).to eq :chrome</div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">    <span class="keyword">context</span> <span class="string">'when i input baidu url into the browser textarea'</span> <span class="keyword">do</span></div><div class="line">      it <span class="string">'should be redirect  to the baidu homepage'</span> <span class="keyword">do</span></div><div class="line">       expect(page.driver.current_url).to eq(<span class="string">'https://www.baidu.com/'</span>)</div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line">    <span class="keyword">context</span> <span class="string">'when i input the capybara into search text '</span> <span class="keyword">do</span></div><div class="line">      it <span class="string">' show search the result'</span> <span class="keyword">do</span></div><div class="line">        fill_in <span class="string">'kw'</span>, :<span class="keyword">with</span> =&gt; <span class="string">'capybara'</span></div><div class="line">        click_button <span class="string">'ç™¾åº¦ä¸€ä¸‹'</span></div><div class="line">        expect(page).to have_content <span class="string">'Capybara - Wikipedia, the free encyclopedia'</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"> <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œæµ‹è¯•<br>è¿™æ—¶æµè§ˆå™¨æ‰“å¼€å¹¶ä¸”æŒ‰ç…§æˆ‘ä»¬æµ‹è¯•æ–‡ä»¶ä¸­å…·ä½“æ­¥éª¤ä¸€æ­¥ä¸€æ­¥è¿›è¡Œæ“ä½œå’ŒéªŒè¯ï¼Œå…¨éƒ¨é€šè¿‡</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [22:26:15] C:1</span></div><div class="line">$ rspec ./spec/features/baidusearch_spec.rb</div><div class="line">...</div><div class="line"></div><div class="line">Finished <span class="keyword">in</span> <span class="number">5.46</span> <span class="built_in">seconds</span> (<span class="built_in">files</span> took <span class="number">3.81</span> <span class="built_in">seconds</span> <span class="built_in">to</span> <span class="built_in">load</span>)</div><div class="line"><span class="number">3</span> examples, <span class="number">0</span> failures</div></pre></td></tr></table></figure><h3 id="cucumberæ–¹å¼"><a href="#cucumberæ–¹å¼" class="headerlink" title="cucumberæ–¹å¼"></a>cucumberæ–¹å¼</h3><p>é¦–å…ˆæˆ‘ä»¬è¿è¡ŒcucumberæŸ¥çœ‹cucumberæ˜¯å¦å®‰è£…æ­£ç¡®<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [13:42:41]</span></div><div class="line">$ cucumber</div><div class="line"><span class="literal">No</span> such file <span class="keyword">or</span> directory - features. You can use `cucumber --init` <span class="keyword">to</span> <span class="builtin-name">get</span> started.</div></pre></td></tr></table></figure></p><p>å½“æˆ‘ä»¬çœ‹åˆ°ä»¥ä¸Šæç¤ºæ²¡æœ‰æ–‡ä»¶æˆ–è€…ç›®å½•æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®è®¤cucumberå®‰è£…æˆåŠŸ<br>æ¥ä¸‹æ¥è®©æˆ‘ä»¬åˆå§‹åŒ–cucumberæµ‹è¯•ç›®å½•ç»“æ„<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [11:24:56] C:2</span></div><div class="line">$ cucumber <span class="comment">--init</span></div><div class="line">  <span class="built_in">create</span>   features</div><div class="line">  <span class="built_in">create</span>   features/step_definitions</div><div class="line">  <span class="built_in">create</span>   features/support</div><div class="line">  <span class="built_in">create</span>   features/support/env.rb</div></pre></td></tr></table></figure></p><p>è¿™æ ·å°±å®Œæˆç›®å½•ç»“æ„çš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬è¦å°†æ‰€æœ‰featureæ–‡ä»¶éƒ½æ”¾åˆ°featuresç›®å½•ä¸‹<br>supportç›®å½•ä¸‹ï¼Œä½¿æˆ‘ä»¬éœ€è¦çš„ä¸€äº›é…ç½®æ–‡ä»¶.</p><p>step<em>definitionsç›®å½•ä¸‹ï¼Œæ˜¯å¯¹featureæ–‡ä»¶ä¸­çš„å…·ä½“æ“ä½œå®ç°ã€‚å› ä¸ºæˆ‘ä»¬éƒ½çŸ¥é“featureæ–‡ä»¶ä¸­åªæ˜¯åšäº†ä¸€äº›æè¿°ï¼Œå…·ä½“çš„æ‰§è¡Œæ˜¯æ”¾åˆ°step</em> definitionsä¸‹é¢çš„æ–‡ä»¶é‡Œé¢çš„ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨cucumberå®Œæˆå’Œä¸Šé¢specä¸€æ ·çš„åœºæ™¯ã€‚<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Feature: Search <span class="keyword">for</span> capybara on baidu</div><div class="line">      Scenario: Search <span class="keyword">for</span> website of baidu</div><div class="line">          Given I am on the baidu home page</div><div class="line">          When I search <span class="keyword">for</span> <span class="string">"capybara"</span></div><div class="line">          Then website of search result are returned</div></pre></td></tr></table></figure></p><p>åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œcucumberå‘½ä»¤ï¼Œ<br>è¿è¡Œä¸Šè¿°æµ‹è¯•ç”¨ä¾‹ï¼Œä¾¿å¯ä»¥çœ‹åˆ°ä¸‹åˆ—è¾“å‡ºï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ®µå®ç°æ­¥éª¤å®šä¹‰ï¼š<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [14:25:16] C:1</span></div><div class="line">$ cucumber</div><div class="line">Feature: Search <span class="keyword">for</span> capybara <span class="literal">on</span> baidu</div><div class="line"></div><div class="line">  Scenario: Search <span class="keyword">for</span> website <span class="keyword">of</span> baidu        <span class="comment"># features/baidu_search_capybara.feature:2</span></div><div class="line">    Given I am <span class="literal">on</span> the baidu home page          <span class="comment"># features/baidu_search_capybara.feature:3</span></div><div class="line">    When I search <span class="keyword">for</span> <span class="string">"capybara"</span>               <span class="comment"># features/baidu_search_capybara.feature:4</span></div><div class="line">    Then website <span class="keyword">of</span> search result are returned <span class="comment"># features/baidu_search_capybara.feature:5</span></div><div class="line"></div><div class="line"><span class="number">1</span> scenario (<span class="number">1</span> <span class="literal">undefined</span>)</div><div class="line"><span class="number">3</span> steps (<span class="number">3</span> <span class="literal">undefined</span>)</div><div class="line"><span class="number">0m</span>0.<span class="number">395s</span></div><div class="line"></div><div class="line">You can implement step definitions <span class="keyword">for</span> <span class="literal">undefined</span> steps <span class="keyword">with</span> these snippets:</div><div class="line"></div><div class="line">Given(<span class="regexp">/^I am on the baidu home page$/</span>) <span class="keyword">do</span></div><div class="line">  pending <span class="comment"># Write code here that turns the phrase above into concrete actions</span></div><div class="line">end</div><div class="line"></div><div class="line">When(<span class="regexp">/^I search for "([^"]*)"$/</span>) <span class="keyword">do</span> |arg1|</div><div class="line">  pending <span class="comment"># Write code here that turns the phrase above into concrete actions</span></div><div class="line">end</div><div class="line"></div><div class="line">Then(<span class="regexp">/^website of search result are returned$/</span>) <span class="keyword">do</span></div><div class="line">  pending <span class="comment"># Write code here that turns the phrase above into concrete actions</span></div><div class="line">end</div></pre></td></tr></table></figure></p><p>å¤åˆ¶ä»¥ä¸Šä»£ç åˆ°å…·ä½“step.rbæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æ–°å»ºæ–‡ä»¶capybara_search_step.rbã€‚<br>å†æ¬¡è¿è¡Œcucumberå‘½ä»¤<br>ç°åœ¨,æ‚¨å°†çœ‹åˆ°å‘½ä»¤è¡ŒæŠ¥å‘Š,è¿™äº›æ­¥éª¤å·²ç»å­˜åœ¨ä½†æ²¡æœ‰å®ç°:<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [14:25:22]</span></div><div class="line">$ cucumber</div><div class="line">Feature: Search <span class="keyword">for</span> capybara <span class="keyword">on</span> baidu</div><div class="line"></div><div class="line">  Scenario: Search <span class="keyword">for</span> website <span class="keyword">of</span> baidu        <span class="comment"># features/baidu_search_capybara.feature:2</span></div><div class="line">    Given I am <span class="keyword">on</span> <span class="keyword">the</span> baidu home page          <span class="comment"># features/step_definitions/capybara_search_step.rb:1</span></div><div class="line">      TODO (Cucumber::Pending)</div><div class="line">      ./features/step_definitions/capybara_search_step.rb:<span class="number">2</span>:<span class="keyword">in</span> `/^I am <span class="keyword">on</span> <span class="keyword">the</span> baidu home page$/'</div><div class="line">      features/baidu_search_capybara.feature:<span class="number">3</span>:<span class="keyword">in</span> `Given I am <span class="keyword">on</span> <span class="keyword">the</span> baidu home page'</div><div class="line">    When I search <span class="keyword">for</span> <span class="string">"capybara"</span>               <span class="comment"># features/step_definitions/capybara_search_step.rb:5</span></div><div class="line">    Then website <span class="keyword">of</span> search <span class="literal">result</span> are returned <span class="comment"># features/step_definitions/capybara_search_step.rb:9</span></div><div class="line"></div><div class="line"><span class="number">1</span> scenario (<span class="number">1</span> pending)</div><div class="line"><span class="number">3</span> steps (<span class="number">2</span> skipped, <span class="number">1</span> pending)</div><div class="line"><span class="number">0</span>m0<span class="number">.152</span>s</div></pre></td></tr></table></figure></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡å¢åŠ å°‘é‡çš„ä»£ç æ¥ä½¿æˆ‘ä»¬è‡ªåŠ¨åŒ–è¿è¡Œèµ·æ¥ã€‚<br>é¦–å…ˆç¡®ä¿ä½ çš„env.rbæ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'capybara/cucumber'</span></div><div class="line">Capybara.default_driver = <span class="symbol">:selenium</span></div></pre></td></tr></table></figure></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­æ·»åŠ require â€˜capybara/cucumberâ€™;<br>è¿™æ˜¯æˆ‘ä»¬å¿…é¡»éœ€è¦åŠ è½½æ–‡ä»¶ã€‚<br>ä¹‹åæˆ‘ä»¬éœ€è¦å‘Šè¯‰capybaraä½¿ç”¨seleniumé©±åŠ¨ï¼š<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Capybara<span class="selector-class">.default_driver</span> = :selenium</div></pre></td></tr></table></figure></p><p>å†æ¬¡é‡ç”³ï¼Œcapybaraåªæ˜¯å……å½“ä¸€ä¸ªä¸­é—´ä»¶ï¼Œé€‚é…ä¸åŒçš„dirver,ä½¿æˆ‘ä»¬èƒ½å¤Ÿå…¼å®¹ä»»ä½•çš„é©±åŠ¨ç¨‹åº,ä¾‹å¦‚ï¼ˆSelecting the Driverï¼Œ<br>RackTestï¼Œ<br>Seleniumï¼Œ<br>Capybara-webkitï¼Œ<br>Poltergeistï¼‰è¿™é‡Œæˆ‘ä»¬é€‰æ‹©selemium webdriver æ˜¯å› ä¸ºå®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„å¼€æºæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¾ˆå¤šå…¬å¸çš„è‡ªåŠ¨åŒ–æ¡†æ¶éƒ½æ˜¯åŸºäºå®ƒä¹‹ä¸Šçš„äºŒæ¬¡å¼€å‘è€Œæˆï¼Œä¾‹å¦‚appiumï¼Œæ·˜å®çš„Automan X,ç½‘æ˜“Daggerç­‰ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä¸è®¾ç½®é©±åŠ¨ï¼Œå°†ä¼šå¾—åˆ°ä»¥ä¸‹é”™è¯¯<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># lqi @ CNlqi in ~/work/test/capybara_demo on git:master x [17:13:47] C:2</span></div><div class="line">$ cucumber</div><div class="line">rack-test requires a rack application, but none was given (ArgumentError)</div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">capybara</span>-2.8.0/<span class="title">lib</span>/<span class="title">capybara</span>/<span class="title">rack_test</span>/<span class="title">driver</span>.<span class="title">rb</span>:17:<span class="title">in</span> `<span class="title">initialize</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">capybara</span>-2.8.0/<span class="title">lib</span>/<span class="title">capybara</span>.<span class="title">rb</span>:509:<span class="title">in</span> `<span class="title">new</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">capybara</span>-2.8.0/<span class="title">lib</span>/<span class="title">capybara</span>.<span class="title">rb</span>:509:<span class="title">in</span> `<span class="title">block</span> <span class="title">in</span> &lt;<span class="title">top</span> (<span class="title">required</span>)&gt;'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">capybara</span>-2.8.0/<span class="title">lib</span>/<span class="title">capybara</span>/<span class="title">session</span>.<span class="title">rb</span>:85:<span class="title">in</span> `<span class="title">call</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">capybara</span>-2.8.0/<span class="title">lib</span>/<span class="title">capybara</span>/<span class="title">session</span>.<span class="title">rb</span>:85:<span class="title">in</span> `<span class="title">driver</span>'</span></div><div class="line">/Users/lqi/work/test/capybara_demo/features/support/env.<span class="symbol">rb:</span><span class="number">12</span>:in <span class="string">`&lt;top (required)&gt;'</span></div><div class="line"><span class="string">/Users/lqi/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/cucumber-2.4.0/lib/cucumber/rb_support/rb_language.rb:96:in `</span>load<span class="string">'</span></div><div class="line"><span class="string">/Users/lqi/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/cucumber-2.4.0/lib/cucumber/rb_support/rb_language.rb:96:in `load_code_file'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">runtime</span>/<span class="title">support_code</span>.<span class="title">rb</span>:142:<span class="title">in</span> `<span class="title">load_file</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">runtime</span>/<span class="title">support_code</span>.<span class="title">rb</span>:84:<span class="title">in</span> `<span class="title">block</span> <span class="title">in</span> <span class="title">load_files!</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">runtime</span>/<span class="title">support_code</span>.<span class="title">rb</span>:83:<span class="title">in</span> `<span class="title">each</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">runtime</span>/<span class="title">support_code</span>.<span class="title">rb</span>:83:<span class="title">in</span> `<span class="title">load_files!</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">runtime</span>.<span class="title">rb</span>:253:<span class="title">in</span> `<span class="title">load_step_definitions</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">runtime</span>.<span class="title">rb</span>:61:<span class="title">in</span> `<span class="title">run!</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">lib</span>/<span class="title">cucumber</span>/<span class="title">cli</span>/<span class="title">main</span>.<span class="title">rb</span>:32:<span class="title">in</span> `<span class="title">execute!</span>'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">ruby</span>/<span class="title">gems</span>/2.2.0/<span class="title">gems</span>/<span class="title">cucumber</span>-2.4.0/<span class="title">bin</span>/<span class="title">cucumber</span>:8:<span class="title">in</span> `&lt;<span class="title">top</span> (<span class="title">required</span>)&gt;'</span></div><div class="line">/Users/lqi/.rbenv/versions/<span class="number">2.2</span>.<span class="number">2</span>/bin/<span class="symbol">cucumber:</span><span class="number">23</span>:in <span class="string">`load'</span></div><div class="line"><span class="string">/Users/lqi/.rbenv/versions/2.2.2/bin/cucumber:23:in `</span>&lt;main&gt;<span class="string">'</span></div></pre></td></tr></table></figure></p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œcapybaraè¢«ç”¨æ¥æµ‹è¯•rack åº”ç”¨ã€‚rack æ˜¯ä¸€ä¸ªè®¾è®¡éå¸¸å·§å¦™çš„ä¸­é—´ä»¶ï¼Œè¢«ç”¨ä½œåœ¨railsä¸sinatraæ¡†æ¶åšå…¨æ ˆçš„Client/Serveré›†æˆæµ‹è¯•ï¼Œå¹¶ä¸”æ²¡æœ‰ä»€ä¹ˆHTTPçš„å¼€é”€ï¼Œä»è€Œæ˜¯æµ‹è¯•èƒ½å¤Ÿå¿«é€Ÿè¿è¡Œã€‚ç¨åï¼Œæˆ‘ä»¬å°†è¯¦ç»†ä»‹ç»capybaraå¦‚ä½•æµ‹è¯•åœ¨railsä¸sinatraçš„åº”ç”¨æµ‹è¯•ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯ä½ åœ¨æ­¥éª¤å®šä¹‰ç”¨Rubyä»£ç è°ƒç”¨capybaraAPIé©±åŠ¨æµ‹è¯•ã€‚<br>å°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°ä½ çš„capybara_search_step.rbä¸­<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Given(<span class="regexp">/^I am on the baidu home page$/</span>) <span class="keyword">do</span></div><div class="line">  visit <span class="string">'https://www.baidu.com/'</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">When(<span class="regexp">/^I search for "([^"]*)"$/</span>) <span class="keyword">do</span> <span class="params">|search_term|</span></div><div class="line">  fill_in <span class="string">'kw'</span>, <span class="symbol">:with</span> =&gt; search_term</div><div class="line">  click_on <span class="string">'su'</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">Then(<span class="regexp">/^website of search result are returned$/</span>) <span class="keyword">do</span></div><div class="line">     page.should have_content <span class="string">'capybara'</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p><p>åœ¨æˆ‘ä»¬åˆ†æä»£ç ä¹‹å‰,è®©æˆ‘ä»¬å…ˆè¿è¡Œæµ‹è¯•,çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚åƒå¾€å¸¸ä¸€æ ·,åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥cucumberã€‚<br>å¸Œæœ›ä½ èƒ½çœ‹åˆ°chromeæ‰“å¼€ï¼Œå¹¶ä¸”è·³è½¬åˆ°baidué¦–é¡µï¼Œä¹‹åæœç´¢åˆ°capybaraç»“æœå¹¶è¿”å›ã€‚<br>æ­å–œä½ ï¼Œä½ å·²ç»åˆ©ç”¨capybaraå®Œæˆäº†ç¬¬ä¸€ä¸ªå…¨æ ˆçš„é›†æˆæµ‹è¯•ã€‚</p><p>åœ¨æˆ‘ä»¬æ·±å…¥äº†è§£capybaraä¸°å¯Œçš„APIä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç®€è¦çš„å›é¡¾ä¸€ä¸‹æ¯ä¸ªæ­¥éª¤çš„å†…å®¹ï¼Œè¿™é‡Œä½ å¯ä»¥çœ‹åˆ°capybraå¦‚ä½•ä¼˜é›…è€Œç®€æ´ä½¿ç”¨apiï¼Œä»£ç å­—é¢å«ä¹‰å·²ç»å‘æˆ‘ä»¬å±•ç¤ºå®ƒåœ¨å¹²ä»€ä¹ˆï¼Œä¸éœ€è¦å¤šè§£é‡Šã€‚cucumberå’Œcapybraé…åˆèµ·æ¥ä½¿ç”¨ï¼Œå…·æœ‰è‰¯å¥½çš„å¯è¯»æ€§ï¼Œé¡¹ç›®ä¸­çš„ä»»ä½•ä¸€ä¸ªè§’è‰²éƒ½èƒ½å¤Ÿå½“å‰åœºæ™¯åšäº†å“ªäº›äº‹æƒ…ï¼Œéå¸¸é€‚åˆåº”ç”¨äºè‡ªåŠ¨åŒ–å’Œç»´æŠ¤å·¥ä½œã€‚<br>ç¬¬ä¸€è¡Œä»£ç å‘Šè¯‰capybaraé€šçŸ¥driverï¼ˆselenium webdriverï¼‰<br>æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨å¹¶è·³è½¬åˆ°æˆ‘ä»¬æä¾›çš„é“¾æ¥åœ°å€ï¼š<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">visit</span> <span class="string">'https://www.baidu.com/'</span></div></pre></td></tr></table></figure></p><p>  æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è¾“å…¥æŸ¥è¯¢æ¡ä»¶ï¼Œç‚¹å‡»æœç´¢æŒ‰é’®ï¼Œæ‰€ä»¥æˆ‘ä»¬å‘Šè¯‰capybaraå»è®©driveråœ¨é¡µé¢ä¸ŠæŸ¥æ‰¾æœè¾“å…¥æ ï¼Œå¹¶å¡«å†™æœç´¢æ¡ä»¶ã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fill_in <span class="string">'kw'</span>, :<span class="keyword">with</span> =&gt; search_term</div><div class="line"></div><div class="line">click_on <span class="string">'su'</span></div></pre></td></tr></table></figure><p>è¿™é‡Œå”¯ä¸€çš„å›°æƒ‘æ˜¯fill_in æ–¹æ³•ä¸­ä½¿ç”¨â€™kwâ€™è¿™ä¸ªå…³é”®å­—ï¼Œå½“ä½ ä»£ç å‘Šè¯‰capybaraå»åœ¨é¡µé¢ä¸Šå¯»æ‰¾<br>è¿™ä¸ªå…³é”®å­—æ—¶ï¼Œcapybaraä½¿ç”¨äº†ä¸€ç§â€™çŒœæµ‹â€™çš„æœºåˆ¶ã€‚<br>ä¹Ÿå°±æ˜¯è¯´capybraè¯•å›¾åœ¨DOMå…ƒç´ å„ç§å±æ€§ä¸­æ‰¾åˆ°ä½ è¦æ±‚çš„ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­,æˆ‘ä»¬çŸ¥é“baiduæœç´¢è¡¨æ çš„idå±æ€§kwï¼Œè¿™æ˜¯æˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­æä¾›çš„ã€‚<br>æœ€å,æˆ‘ä»¬éœ€è¦æ£€æŸ¥è¿”å›çš„æœç´¢ç»“æœæ˜¯å¦æ­£ç¡®ã€‚ä¸ºæ­¤,æˆ‘ä»¬ä½¿ç”¨capybaraçš„å†…ç½®RSpecåŒ¹é…å™¨ã€‚å¦‚æœä½ ä¸çŸ¥é“RSpec,rspecå®˜æ–¹æ–‡æ¡£æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©(<a href="http://rspec.info/),ä¸ä¼ ç»Ÿæ–­è¨€ä¸åŒæ˜¯å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯åªæ˜¯è¿”å›false" target="_blank" rel="external">http://rspec.info/),ä¸ä¼ ç»Ÿæ–­è¨€ä¸åŒæ˜¯å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸æ˜¯åªæ˜¯è¿”å›false</a></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">page<span class="selector-class">.should</span> have_content <span class="string">'capybara'</span></div></pre></td></tr></table></figure><p>æœ€åéœ€è¦æ³¨æ„çš„æ˜¯,have_contentæ–¹æ³•çš„åŒ¹é…å™¨å†…ç½®äº†ä¸€ä¸ªé»˜è®¤çš„ç­‰å¾…ã€‚è¿™æ˜¯éå¸¸æœ‰ç”¨çš„,å› ä¸ºå¦‚æœæŸ¥æ‰¾çš„å†…å®¹æˆ‘æ˜¯é€šè¿‡JavaScriptå¼‚æ­¥åŠ è½½è€Œæˆçš„è¯(è€Œä¸æ˜¯åœ¨åˆå§‹é¡µé¢å°±åŠ è½½å®Œæˆ),capybaraåœ¨æˆ‘ä»¬è®¾ç½®é»˜è®¤ç­‰å¾…æ—¶é—´é‡è¯•,çœ‹å®ƒæ˜¯å¦å­˜åœ¨ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä»‹ç»å¦‚ä½•å¤„ç†å¼‚æ­¥JavaScriptçš„é—®é¢˜ã€‚</p><p>æ€»ç»“ï¼Œæœ¬ç« ç›®æ ‡æ˜¯è®©ä½ è®¤è¯†capybraï¼Œä»¥åŠé…ç½®å®ƒçš„è¿è¡Œç¯å¢ƒï¼Œrubyå’Œrubygemsä»¥åŠç›¸å…³ä¾èµ–ã€‚æœ€åï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„åœºæ™¯æ¥ç¼–å†™è‡ªåŠ¨åŒ–ï¼Œæ¥åŠ å¼ºæˆ‘ä»¬çš„å­¦ä¹ ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯&quot;&gt;&lt;a href=&quot;#å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯&quot;&gt;&lt;/a&gt;å®ç°ä½ ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–åœºæ™¯&lt;/h2&gt;&lt;p&gt;ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ï¼Œè®©æˆ‘ä»¬æ¥å®ç°æˆ‘ä»¬ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•åœºæ™¯ï¼Œç™¾åº¦ä¸Šæœç´¢c
      
    
    </summary>
    
    
      <category term="rails" scheme="http://yoursite.com/tags/rails/"/>
    
      <category term="webdriver" scheme="http://yoursite.com/tags/webdriver/"/>
    
  </entry>
  
  <entry>
    <title>capybara4--å®‰è£…cucumber</title>
    <link href="http://yoursite.com/2016/08/30/capybara4/"/>
    <id>http://yoursite.com/2016/08/30/capybara4/</id>
    <published>2016-08-30T07:54:19.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>capybaraæ˜¯ä¸€ä¸ªç®€å•çš„API,å®ƒæä¾›äº†æŠ½è±¡å±‚åœ¨ä½ çœŸå®è‡ªåŠ¨åŒ–åº“ä¹‹ä¸Šã€‚å¦‚æœå®ƒå¸®åŠ©,è®¤ä¸ºcapybaraæ˜¯ä½ çš„ç¿»è¯‘,ä½ å‘Šè¯‰å®ƒåšä¸€äº›äº‹æƒ…ï¼Œå®ƒå°†ä¼˜é›…çš„å°†å‘½ä»¤è½¬æ¢ä¸ºä½ åº”ç”¨é©±åŠ¨çš„APIã€‚</p><p>æ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨capybaraè¿›è¡Œç¿»è¯‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰capybaraåšä»€ä¹ˆå¹¶ä¸”éœ€è¦ä¸€ä¸ªAPIè‡ªåŠ¨åŒ–åº“å»è¿›è¡Œç¿»è¯‘ã€‚<br>capybaraæ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„åº“,<br>é€šè¿‡è¿™æœ¬ä¹¦æˆ‘ä»¬å°†çœ‹åˆ°å®ƒåœ¨å„ç§åœºæ™¯ä¸­åº”ç”¨ã€‚ç„¶è€Œã€‚ç›®å‰ä¸ºæ­¢æœ€å¸¸è§çš„æƒ…æ™¯æ˜¯åº”ç”¨cucumberä½œä¸ºcapybaraæµ‹è¯•é©±åŠ¨ï¼Œå»é©±åŠ¨selenium webdriver å¼€å±•æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€‚<br>å½“cucumberè¢«è°ƒç”¨æ¥è§£æè¿™äº›ç®€å•æ˜“æ‡‚çš„è‹±è¯­åœºæ™¯æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»å°†è¿™äº›åŒ¹é…</p><h2 id="cucumberä»‹ç»"><a href="#cucumberä»‹ç»" class="headerlink" title="cucumberä»‹ç»"></a>cucumberä»‹ç»</h2><p>cucumberæ˜¯ä¸€ç§å¯ä»¥ä½¿ç”¨æ–‡æœ¬æè¿°è¯­è¨€æ¥æ‰§è¡Œè‡ªåŠ¨æµ‹è¯•ç”¨ä¾‹çš„å·¥å…·ï¼Œä½¿ç”¨çš„è¯­è¨€å«åšGherkin.</p><p>Gherkinç”¨äºæè¿°è½¯ä»¶çš„è¡Œä¸ºè€Œä¸éœ€è¦äº†è§£å…·ä½“çš„å®ç°ï¼Œä½¿ç”¨Gherkinä¸»è¦æœ‰ä¸¤ä¸ªç›®çš„æ–‡æ¡£å’Œè‡ªåŠ¨æµ‹è¯•ç”¨ä¾‹ï¼ˆæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå’Œæ‰‹å·¥æµ‹è¯•ç”¨ä¾‹ä¹Ÿç»Ÿä¸€ï¼‰ã€‚ Gherkinæ”¯æŒè¶…è¿‡40ç§è¯­è¨€ï¼ŒåŒ…æ‹¬è‹±æ–‡ã€ä¸­æ–‡ã€‚ Gherkinå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ–°å¢æ³¨é‡Šï¼Œæ³¨é‡Šä»¥#å¼€å¤´ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶éƒ½æ˜¯å·².featureç»“å°¾ï¼Œåœ¨featureæ–‡ä»¶ä¸­è¾“å…¥åŠŸèƒ½æè¿°ã€åœºæ™¯ã€æ­¥éª¤ï¼Œå½“æ‰§è¡Œè¿™ä¸ªåŠŸèƒ½æ—¶æ¯ä¸€ä¸ªæ­¥éª¤éƒ½éœ€è¦ç¼–å†™rubyä»£ç å—æ¥å®ç°å…·ä½“çš„åŠŸèƒ½ï¼Œå½“å‰cucumberæ”¯æŒå¤šç§è¯­è¨€ï¼Œé™¤äº†rubyè¿˜å¯ä»¥ä½¿ç”¨javaã€javascriptæ¥ç¼–å†™å…·ä½“å®šä¹‰å±‚çš„å®ç°ã€‚</p><h3 id="ä»¥ä¸‹æ˜¯ä¸€ä¸ªcucumber-åœºæ™¯çš„ä¾‹å­"><a href="#ä»¥ä¸‹æ˜¯ä¸€ä¸ªcucumber-åœºæ™¯çš„ä¾‹å­" class="headerlink" title="ä»¥ä¸‹æ˜¯ä¸€ä¸ªcucumber åœºæ™¯çš„ä¾‹å­"></a>ä»¥ä¸‹æ˜¯ä¸€ä¸ªcucumber åœºæ™¯çš„ä¾‹å­</h3><p>   Feature: Search for Videos on Baidu</p><pre><code>Scenario: Search for Videos    Given I am on the  baidu home page    When I search for &quot;capybara&quot;    Then search result are returned</code></pre><p>æˆ‘ä»¬è®¾ç½®å¯ä»¥é‡‡ç”¨ä¸­æ–‡å®ç°åœºæ™¯<br>ä¸­æ–‡çš„è¯æœ€å‰é¢å¿…é¡»å¢åŠ # language: zh-CN</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># language: zh-CN</span></div><div class="line"></div><div class="line"><span class="section">åŠŸèƒ½:ç¬¬ä¸€ä¸ªä¸­æ–‡ç¨‹åº</span></div><div class="line"></div><div class="line">ä¸­æ–‡å®ç°</div><div class="line"></div><div class="line"><span class="section">åœºæ™¯:ä¸­æ–‡å®ç°åœºæ™¯</span></div><div class="line"></div><div class="line">å‡å¦‚å½“å‰æ˜¯ä¸­æ–‡</div><div class="line"></div><div class="line">å½“è¾“å…¥æ˜¯æµ‹è¯•</div><div class="line"></div><div class="line">é‚£ä¹ˆèƒ½çœ‹åˆ°ä¸­æ–‡æµ‹è¯•</div></pre></td></tr></table></figure><p>ä¸‹é¢çš„æµç¨‹å›¾è¯´æ˜äº†ä»cucumberåˆ°åº•å±‚é©±åŠ¨å¦‚ä½•å®ç°ï¼Œcapybaraåœ¨æ•´ä¸ªæµç¨‹é‡Œé¢å……å½“æ˜¯ä¸­é—´ä»·çš„ä½œç”¨ã€‚</p><p><img src="/image/capybaraflow.png" alt=""></p><p>å®‰è£…<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="keyword">install</span> cucumber</div></pre></td></tr></table></figure></p><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ bundlerï¼Œåªæ˜¯éœ€è¦æ·»åŠ ä»¥ä¸‹ä»£ç åˆ°Gemfile:</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">group <span class="symbol">:test</span> <span class="keyword">do</span></div><div class="line">  gem <span class="string">'cucumber'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure><p>åˆå§‹åŒ–featuresç›®å½•ï¼š<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cucumber <span class="comment">--init</span></div></pre></td></tr></table></figure></p><p>æŸ¥çœ‹å®Œå¸®åŠ©åˆ—è¡¨ï¼š<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cucumber <span class="comment">--help</span></div></pre></td></tr></table></figure></p><p>è¿è¡Œæ‰€æœ‰featuresï¼š<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">cucumber</span></div></pre></td></tr></table></figure></p><h2 id="Cucumber-Rails"><a href="#Cucumber-Rails" class="headerlink" title="Cucumber-Rails"></a>Cucumber-Rails</h2><p>å¦‚æœä½ ä½¿ç”¨capybara æ¥æµ‹è¯•railsåº”ç”¨ï¼Œä½ åº”è¯¥å®‰è£…cucumberï¼rails gem è€Œä¸æ˜¯æ ‡å‡†çš„rails gemã€‚<br>è¿™ä¸ªgeméœ€è¦capybaraå’Œcucumberä½œä¸ºä¾èµ–ã€‚<br>æ‰€ä»¥å½“ä½ å®‰è£…cucumberï¼rails gemæ—¶ï¼Œä¼šè‡ªåŠ¨å®‰è£…è¿™äº›ä¾èµ–ï¼Œæˆ‘ä»¬åªéœ€è¦è¿è¡Œä»¥ä¸‹å‘½ä»¤<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="keyword">install</span> cucumber-rails</div></pre></td></tr></table></figure></p><p>å¦‚æœä½ ä½¿ç”¨bundleï¼Œåªéœ€è¦å°†ä»¥ä¸‹ä»£ç æ·»åŠ è¿›gemfile:<br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">group <span class="symbol">:test</span>, <span class="symbol">:development</span> <span class="keyword">do</span></div><div class="line">  gem <span class="string">'cucumber-rails'</span>, <span class="symbol">:require</span> =&gt; <span class="keyword">false</span></div><div class="line">  <span class="comment"># database_cleaner is not required, but highly recommended</span></div><div class="line">  gem <span class="string">'database_cleaner'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p><p>ç„¶åè¿è¡Œ<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">bundle </span>install</div></pre></td></tr></table></figure></p><p>è¿è¡Œç”Ÿæˆå™¨å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆç›®å½•<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails <span class="keyword">generate</span> cucumber:install</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;capybaraæ˜¯ä¸€ä¸ªç®€å•çš„API,å®ƒæä¾›äº†æŠ½è±¡å±‚åœ¨ä½ çœŸå®è‡ªåŠ¨åŒ–åº“ä¹‹ä¸Šã€‚å¦‚æœå®ƒå¸®åŠ©,è®¤ä¸ºcapybaraæ˜¯ä½ çš„ç¿»è¯‘,ä½ å‘Šè¯‰å®ƒåšä¸€äº›äº‹æƒ…ï¼Œå®ƒå°†ä¼˜é›…çš„å°†å‘½ä»¤è½¬æ¢ä¸ºä½ åº”ç”¨é©±åŠ¨çš„APIã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥å½“æˆ‘ä»¬ä½¿ç”¨capybaraè¿›è¡Œç¿»è¯‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰capybaraåšä»€ä¹ˆå¹¶ä¸”
      
    
    </summary>
    
    
      <category term="capybara - rails - webdriver" scheme="http://yoursite.com/tags/capybara-rails-webdriver/"/>
    
  </entry>
  
  <entry>
    <title>capybara3--rspecé…ç½®</title>
    <link href="http://yoursite.com/2016/08/30/capybara3/"/>
    <id>http://yoursite.com/2016/08/30/capybara3/</id>
    <published>2016-08-30T04:42:49.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="rspecé…ç½®"><a href="#rspecé…ç½®" class="headerlink" title="rspecé…ç½®"></a>rspecé…ç½®</h2><p>æˆ‘ä»¬çŸ¥é“Capybara åªæ˜¯æ˜¯ä¸€ä¸ªç”¨æ¥ä»¥æ¨¡æ‹Ÿç”¨æˆ·å¯¹webåº”ç”¨çš„æ“ä½œæ¥æµ‹è¯•webåº”ç”¨çš„å·¥å…·åŒ…ï¼Œä¸èƒ½çœŸæ­£çš„ç§°ä¹‹ä¸ºæµ‹è¯•æ¡†æ¶ï¼Œå®ƒéœ€è¦å…¶ä»–çš„æµ‹è¯•é©±åŠ¨æ¡†æ¶æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæµ‹è¯•å·¥ä½œã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæµ‹è¯•é©±åŠ¨æ¡†æ¶.</p><p><img src="/image/rspec.png" alt=""></p><p>RSpecç”±Steven Bakerå¼€å‘å¹¶åœ¨2005å¹´å‘å¸ƒï¼Œå…¨é¢æ”¯æŒRubyç¨‹åºçš„BDDå¼€å‘æµ‹è¯•æ–¹å¼ï¼Œå¹¶ä¸”å¯¹äºRailsç¨‹åºæœ‰ç€è‰¯å¥½çš„æ”¯æŒï¼Œé’ˆå¯¹Viewï¼ŒControllerå’ŒModelæ¯ä¸€å±‚éƒ½æœ‰è‰¯å¥½çš„æ”¯æŒã€‚RSpecç›®å‰çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ï¼š3.5ã€‚</p><p>å®ƒåœ¨ BDD æµç¨‹çš„å¼€å‘ä¸­è¢«ç”¨æ¥å†™é«˜å¯è¯»æ€§çš„æµ‹è¯•ï¼Œå¼•å¯¼å¹¶éªŒè¯ä½ å¼€å‘çš„åº”ç”¨ç¨‹åºã€‚</p><p>minitestä¸rspecéƒ½æ˜¯rubyå’Œrailsæ¯”è¾ƒæµè¡Œçš„æ¡†æ¶ã€‚è¿™é‡Œæˆ‘ä»¬é€‰æ‹©rspecã€‚</p><p>å®‰è£…rspecå¾ˆç®€å•,æ‰“å¼€command lineè¿è¡Œä¸€ä¸‹æ“ä½œï¼š<br><figure class="highlight cmake"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="keyword">install</span> rspec</div></pre></td></tr></table></figure></p><p>æˆ–è€…å°†rspec æ·»åŠ åˆ°gemfileé‡Œ<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">gem</span> <span class="string">'rspec'</span></div></pre></td></tr></table></figure></p><p>æ‰§è¡Œbundle install æ¥å®‰è£…<br>å¦‚æœä½ çš„é¡¹ç›®é‡‡ç”¨çš„æ—¶rails,é‚£ä¹ˆ<strong>rspec-rails</strong> æˆ–è®¸æ›´é€‚åˆä½ </p><p>åœ¨gemfileé‡Œæ·»åŠ <br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">group <span class="symbol">:development</span>, <span class="symbol">:test</span> <span class="keyword">do</span></div><div class="line">  gem <span class="string">'rspec-rails'</span>, <span class="string">'~&gt; 3.4'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure></p><p>æ‰§è¡Œ bundle install</p><p>åˆå§‹åŒ–æµ‹è¯•ç›®å½•</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails <span class="keyword">generate</span> rspec:install</div></pre></td></tr></table></figure><p>è¿™å¢åŠ äº†ä»¥ä¸‹æ–‡ä»¶ç”¨äºé…ç½®:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.rspec</div><div class="line">spec/spec_helper.rb</div><div class="line">spec/rails_helper.rb</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;rspecé…ç½®&quot;&gt;&lt;a href=&quot;#rspecé…ç½®&quot; class=&quot;headerlink&quot; title=&quot;rspecé…ç½®&quot;&gt;&lt;/a&gt;rspecé…ç½®&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“Capybara åªæ˜¯æ˜¯ä¸€ä¸ªç”¨æ¥ä»¥æ¨¡æ‹Ÿç”¨æˆ·å¯¹webåº”ç”¨çš„æ“ä½œæ¥æµ‹è¯•webåº”ç”¨çš„å·¥å…·åŒ…ï¼Œä¸èƒ½çœŸ
      
    
    </summary>
    
    
      <category term="capybara - rails - webdriver" scheme="http://yoursite.com/tags/capybara-rails-webdriver/"/>
    
  </entry>
  
  <entry>
    <title>capybara2--å‡†å¤‡ç¯å¢ƒ</title>
    <link href="http://yoursite.com/2016/08/26/capybara2/"/>
    <id>http://yoursite.com/2016/08/26/capybara2/</id>
    <published>2016-08-26T14:48:50.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="rubyç¯å¢ƒé…ç½®"><a href="#rubyç¯å¢ƒé…ç½®" class="headerlink" title="rubyç¯å¢ƒé…ç½®"></a>rubyç¯å¢ƒé…ç½®</h2><p>capycara<br>Capybara éœ€è¦ Ruby 1.9.3æˆ–ä¹‹åçš„ç‰ˆæœ¬. æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé…ç½®rubyè¿è¡Œç¯å¢ƒ</p><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><ol><li>ä¸‹è½½ &amp; å®‰è£… Ruby<br>ä»<a href="http://rubyinstaller.org/æˆ–è€…" target="_blank" rel="external">http://rubyinstaller.org/æˆ–è€…</a> <a href="http://railsinstaller.org/" target="_blank" rel="external">http://railsinstaller.org/</a> ä¸‹è½½å·²ç»æ‰“åŒ…å¥½çš„å®‰è£…ç¨‹åºã€‚<br>1.1å®‰è£… rubyç‰ˆæœ¬</li><li>å®‰è£… DevKit<br>ä» <a href="http://rubyinstaller.org/downloads/ä¸‹è½½å®‰è£…DevKit" target="_blank" rel="external">http://rubyinstaller.org/downloads/ä¸‹è½½å®‰è£…DevKit</a><br>2.1 RubyInstaller Development Kit (DevKit)çš„å®‰è£…<br>åœ¨ä½¿ç”¨RubyGemså®‰è£…Ruby on Railsçš„åŒæ—¶ï¼Œè¿˜æœ‰å‡ ä¸ªä¸€èµ·è¢«å®‰è£…çš„ç±»åº“ã€‚è¿™äº›ç±»åº“ä¸­ï¼Œæœ‰ä¸€äº›æ˜¯ä¿æŒCè¯­è¨€ç¼–å†™çš„ä»£ç çš„å½¢å¼æ¥å‘å¸ƒçš„ï¼Œå®ƒä»¬éœ€è¦é€šè¿‡ä½¿ç”¨â€œgccâ€ç¼–è¯‘å™¨ç­‰ç»“åˆç¯å¢ƒä¸€èµ·æ¥ç¼–è¯‘ï¼Œä½†åœ¨Windowsä¸Šæ˜¯ä¸èƒ½ç”¨gccæ¥ç¼–è¯‘çš„ã€‚<br>å®‰è£…äº†æœ¬æ¬¡æ‰€ä»‹ç»çš„â€œRubyInstaller Development Kit (DevKit)â€åï¼Œç¼–è¯‘å™¨å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°å®‰è£…ä½¿ç”¨æ‰€éœ€çš„ç±»åº“ã€‚</li></ol><p>Rubyç¯å¢ƒé…ç½®</p><ol><li><p>åœ¨windowsä¸­é…ç½®ç¯å¢ƒå˜é‡</p><p> RUBY_HOME=rubyinstaller_dir ï¼ˆå®é™…çš„rubyæ‰€åœ¨è·¯å¾„ï¼‰</p><p> åœ¨pathä¸­æ·»åŠ  %RUBY_HOME%\bin</p></li><li><p>åœ¨å‘½ä»¤è¡Œä¸‹è¿è¡Œ ruby â€“versionï¼Œå¦‚æœæ˜¾ç¤ºrubyç‰ˆæœ¬ä¿¡æ¯è¯´æ˜å®‰è£…æ­£å¸¸ã€‚</p></li></ol><p>å¤šç‰ˆæœ¬rubyç¯å¢ƒé…ç½®</p><p>åˆ©ç”¨uruï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨windowsç³»ç»Ÿä¸Š ç®¡ç†å¤šä¸ªrubyç‰ˆæœ¬<br>ä¸‹è½½å®‰è£…uru</p><ol><li><p>å®‰è£…uru<br>è§£å‹uruåˆ°æŸä¸€ç›®å½•<br>ä¾‹å¦‚C:\toolsä¸‹<br>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">C:</span>\tools&gt; uru_rt admin install</div></pre></td></tr></table></figure></li><li><p>å®‰è£…rubyç‰ˆæœ¬ï¼Œå¯ä»¥å®‰è£…ä»»æ„ä¸ªrubyç‰ˆæœ¬</p></li><li><p>åœ¨uruä¸­æ³¨å†Œrubyç‰ˆæœ¬</p></li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">C</span>:\&gt; <span class="selector-tag">uru</span> <span class="selector-tag">admin</span> <span class="selector-tag">add</span> <span class="selector-tag">c</span>:\<span class="selector-tag">ruby</span>\<span class="selector-tag">jruby-1</span><span class="selector-class">.7</span><span class="selector-class">.18</span>\<span class="selector-tag">bin</span>\</div><div class="line"><span class="selector-tag">---</span>&gt; <span class="selector-tag">Registered</span> <span class="selector-tag">jruby</span> <span class="selector-tag">at</span> `<span class="selector-tag">c</span>:\<span class="selector-tag">ruby</span>\<span class="selector-tag">jruby-1</span><span class="selector-class">.7</span><span class="selector-class">.18</span>\<span class="selector-tag">bin</span>` <span class="selector-tag">as</span> `1718`</div><div class="line"></div><div class="line"><span class="selector-tag">C</span>:\&gt; <span class="selector-tag">uru</span> <span class="selector-tag">ls</span></div><div class="line">    1718        : <span class="selector-tag">jruby</span> 1<span class="selector-class">.7</span><span class="selector-class">.18</span> (1<span class="selector-class">.9</span><span class="selector-class">.3p551</span>) 2014<span class="selector-tag">-12-22</span> 625381<span class="selector-tag">c</span> <span class="selector-tag">on</span> <span class="selector-tag">Java</span> <span class="selector-tag">HotSpot</span>(<span class="selector-tag">TM</span>) ...</div><div class="line">    193         : <span class="selector-tag">ruby</span> 1<span class="selector-class">.9</span><span class="selector-class">.3p551</span> (2014<span class="selector-tag">-11-13</span>) <span class="selector-attr">[i386-mingw32]</span></div><div class="line">    215         : <span class="selector-tag">ruby</span> 2<span class="selector-class">.1</span><span class="selector-class">.5p273</span> (2014<span class="selector-tag">-11-13</span> <span class="selector-tag">revision</span> 48405) <span class="selector-attr">[x64-mingw32]</span></div></pre></td></tr></table></figure><p>è¯¦ç»†æ“ä½œå‘½ä»¤æŸ¥çœ‹<br><a href="http://www.neverletdown.net/2015/08/managing-multiple-ruby-versions-with-uru.html" target="_blank" rel="external">http://www.neverletdown.net/2015/08/managing-multiple-ruby-versions-with-uru.html</a></p><p><strong>å¼ºçƒˆä¸å»ºè®®ç”¨windowsæ¥å¼€å‘,åŸå› è¯·æŸ¥çœ‹<br><a href="https://bitbucket.org/jonforums/uru" target="_blank" rel="external">https://bitbucket.org/jonforums/uru</a></strong></p><p>linuxï¼ˆUbuntuï¼‰æˆ–è€…mac osæ›´é€‚åˆä½ ç”¨æ¥å¼€å‘ã€‚<br>è¯¦ç»†è¯·çœ‹ <a href="https://ruby-china.org/topics/1020" target="_blank" rel="external">https://ruby-china.org/topics/1020</a></p><h3 id="linux-ubuntu"><a href="#linux-ubuntu" class="headerlink" title="linux-ubuntu"></a>linux-ubuntu</h3><p>Installing Ruby</p><p>ç¬¬ä¸€æ­¥å®‰è£…é…ç½®rubyç¯å¢ƒæ‰€éœ€è¦çš„ä¸€äº›åŸºç¡€åº“<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></div><div class="line">sudo apt-<span class="built_in">get</span> install git-core curl zlib1g-<span class="built_in">dev</span> build-essential libssl-<span class="built_in">dev</span> libreadline-<span class="built_in">dev</span> libyaml-<span class="built_in">dev</span> libsqlite3-<span class="built_in">dev</span> sqlite3 libxml2-<span class="built_in">dev</span> libxslt1-<span class="built_in">dev</span> libcurl4-openssl-<span class="built_in">dev</span> python-software-properties libffi-<span class="built_in">dev</span></div></pre></td></tr></table></figure></p><p>åˆ©ç”¨å·¥å…·æ¥ç®¡ç†çš„rubyç‰ˆæœ¬ï¼Œrbenv å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">cd</span></div><div class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/rbenv/rbenv.git ~/.rbenv</div><div class="line"><span class="keyword">echo</span> <span class="string">'export PATH="$HOME/.rbenv/bin:$PATH"'</span> &gt;&gt; ~/.bashrc</div><div class="line"><span class="keyword">echo</span> <span class="string">'eval "$(rbenv init -)"'</span> &gt;&gt; ~/.bashrc</div><div class="line">exec $SHELL</div><div class="line"></div><div class="line">git clone http<span class="variable">s:</span>//github.<span class="keyword">com</span>/rbenv/<span class="keyword">ruby</span>-build.git ~/.rbenv/plugins/<span class="keyword">ruby</span>-build</div><div class="line"><span class="keyword">echo</span> <span class="string">'export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"'</span> &gt;&gt; ~/.bashrc</div><div class="line">exec $SHELL</div><div class="line"></div><div class="line">rbenv install <span class="number">2.3</span>.<span class="number">1</span></div><div class="line">rbenv <span class="keyword">global</span> <span class="number">2.3</span>.<span class="number">1</span></div><div class="line"><span class="keyword">ruby</span> -v</div><div class="line">http<span class="variable">s:</span>//gorails.<span class="keyword">com</span>/setup/ubuntu/<span class="number">16.10</span></div></pre></td></tr></table></figure></p><h3 id="mac-os"><a href="#mac-os" class="headerlink" title="mac os"></a>mac os</h3><p>åˆ©ç”¨homebrew æ¥å®‰è£…ç®¡ç†macçš„åº”ç”¨<br>å®‰è£… Homebrew</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…homebrewã€‚homebrew å…è®¸æˆ‘ä»¬æ–¹ä¾¿ä»æºç å®‰è£…å’Œç¼–è¯‘è½¯ä»¶åŒ…<br>å½“homebrewéœ€è¦å®‰è£…xcode å‘½ä»¤è¡Œå·¥å…·ï¼Œè¾“å…¥yes.æ‰“å¼€å‘½ä»¤è¡Œå¹¶ä¸”è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/<span class="keyword">install</span>/<span class="keyword">master</span>/<span class="keyword">install</span>)<span class="string">"</span></div></pre></td></tr></table></figure></p><p>Installing Ruby</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">brew </span><span class="keyword">install </span>rbenv ruby-<span class="keyword">build</span></div></pre></td></tr></table></figure><p>Add rbenv to bash so that it loads every time you open a terminal</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">echo</span> '<span class="keyword">if</span> which rbenv &gt; <span class="string">/dev/null</span>; then eval <span class="string">"$(rbenv init -)"</span>; fi' &gt;&gt; ~<span class="string">/.bash_profile</span></div><div class="line">source ~<span class="string">/.bash_profile</span></div></pre></td></tr></table></figure><p>Install Ruby</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">rbenv</span> <span class="selector-tag">install</span> 2<span class="selector-class">.3</span><span class="selector-class">.1</span></div><div class="line"><span class="selector-tag">rbenv</span> <span class="selector-tag">global</span> 2<span class="selector-class">.3</span><span class="selector-class">.1</span></div><div class="line"><span class="selector-tag">ruby</span> <span class="selector-tag">-v</span></div></pre></td></tr></table></figure><h2 id="å®‰è£…capybara"><a href="#å®‰è£…capybara" class="headerlink" title="å®‰è£…capybara"></a>å®‰è£…capybara</h2><h3 id="å®‰è£…ç³»ç»Ÿä¾èµ–åº“"><a href="#å®‰è£…ç³»ç»Ÿä¾èµ–åº“" class="headerlink" title="å®‰è£…ç³»ç»Ÿä¾èµ–åº“"></a>å®‰è£…ç³»ç»Ÿä¾èµ–åº“</h3><p>åœ¨æŸäº›æ“ä½œç³»ç»Ÿä¸­rubyç¯å¢ƒå¯èƒ½éœ€è¦ä¸€äº›ç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒï¼Œé€šå¸¸æ˜¯å‡ºäºæ€§èƒ½æ–¹é¢çš„åŸå› ï¼Œrubyæ˜¯ä¸€ç§è§£é‡Šæ€§è¯­è¨€æ‰€ä»¥åœ¨å¤„ç†æŸäº›ä»»åŠ¡æ—¶ï¼Œä¾‹å¦‚è§£æXMLä¼šéå¸¸æ…¢ï¼Œè¿™æ—¶æŠŠè¿™äº›ä»»åŠ¡äº¤ç»™ç¬¬ä¸‰æ–¹åº“å¤„ç†ï¼Œæ•ˆç‡å°±ä¼šæˆå€å¢åŠ ã€‚<br>å¯¹äºwindowså¹³å°ï¼Œä½ ä¸ç”¨æ‹…å¿ƒç¬¬ä¸‰ä¾èµ–åº“çš„é—®é¢˜ï¼Œä¸è¿‡ä½ è¦ç¡®ä¿æ‚¨å·²ç»å®‰è£…äº†Ruby DevKit;<br>è¯¦ç»†è¯´æ˜å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯·å‚é˜…<a href="http://rubyinstaller.org/add-ons/" target="_blank" rel="external">http://rubyinstaller.org/add-ons/</a> devkit</p><p>capybaraä¾èµ–äºnokogirlï¼Œä¸€ä¸ªæµè¡Œçš„åŸºäºrubyçš„XMLçš„è§£æå™¨ï¼Œè¯¥åº“å¯èƒ½éœ€è¦ä»¥ä¸‹ç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒï¼š<br>â€¢ libxml2<br>â€¢ libxml2-dev â€¢ libxslt<br>â€¢ libxslt-dev<br>å¯¹äºä¸åŒçš„æ“ä½œç³»ç»Ÿå®‰è£…è¿™äº›åº“çš„æ–¹å¼å¯èƒ½ç•¥æœ‰ä¸åŒï¼Œå¯¹äºlinux ä¾‹å¦‚Ubuntu å¯ä»¥ä½¿ç”¨apt-get ï¼Œå¯¹äºredhat è¯·ä½¿ç”¨yum install å¯¹äºmac os x é‚£ä¹ˆbrew æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©ã€‚<br>å®Œæˆè¿™äº›ç¬¬ä¸‰æ–¹ä¾èµ–å æˆ‘ä»¬å°±å¯ä»¥å®‰è£…capybaraäº†</p><p>æ·»åŠ ä»¥ä¸‹çš„ä»£ç åˆ°ä½ çš„Gemfileé‡Œï¼Œå¹¶ä¸”è¿è¡Œbundle installã€‚<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">gem</span> <span class="string">'capybara'</span></div></pre></td></tr></table></figure></p><h3 id="ä»€ä¹ˆæ˜¯Bundle"><a href="#ä»€ä¹ˆæ˜¯Bundle" class="headerlink" title="ä»€ä¹ˆæ˜¯Bundle"></a>ä»€ä¹ˆæ˜¯Bundle</h3><p>ç›¸å½“äºå¤šä¸ªRubyGemsæ‰¹å¤„ç†è¿è¡Œã€‚åœ¨é…ç½®æ–‡ä»¶gemfilelé‡Œè¯´æ˜ä½ çš„åº”ç”¨ä¾èµ–å“ªäº›ç¬¬ä¸‰æ–¹åŒ…ï¼Œä»–è‡ªåŠ¨å¸®ä½ ä¸‹è½½å®‰è£…å¤šä¸ªåŒ…ï¼Œå¹¶ä¸”ä¼šä¸‹è½½è¿™äº›åŒ…ä¾èµ–çš„åŒ….<br><a href="http://bundler.io/" target="_blank" rel="external">http://bundler.io/</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;rubyç¯å¢ƒé…ç½®&quot;&gt;&lt;a href=&quot;#rubyç¯å¢ƒé…ç½®&quot; class=&quot;headerlink&quot; title=&quot;rubyç¯å¢ƒé…ç½®&quot;&gt;&lt;/a&gt;rubyç¯å¢ƒé…ç½®&lt;/h2&gt;&lt;p&gt;capycara&lt;br&gt;Capybara éœ€è¦ Ruby 1.9.3æˆ–ä¹‹åçš„ç‰ˆæœ¬. æ‰€ä»¥é¦–å…ˆ
      
    
    </summary>
    
    
      <category term="capybara - rails - webdriver" scheme="http://yoursite.com/tags/capybara-rails-webdriver/"/>
    
  </entry>
  
  <entry>
    <title>capybara1-capybaraç®€ä»‹</title>
    <link href="http://yoursite.com/2016/08/26/capybara1/"/>
    <id>http://yoursite.com/2016/08/26/capybara1/</id>
    <published>2016-08-26T06:17:36.000Z</published>
    <updated>2017-09-21T07:45:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="capybaraç®€ä»‹"><a href="#capybaraç®€ä»‹" class="headerlink" title="capybaraç®€ä»‹"></a>capybaraç®€ä»‹</h2><p>capybaraæ˜¯ä¸€ä¸ªrubyçš„gem,å®ƒæ˜¯ä¸€ä¸ªç”¨æ¥æµ‹è¯•webåº”ç”¨çš„å·¥å…·åŒ…ï¼Œä½¿ç”¨å®ƒå¯ä»¥æ¨¡æ‹Ÿç”¨æˆ·å¯¹webåº”ç”¨çš„æ“ä½œã€‚å®ƒå¯ä»¥é€šè¿‡CSSæˆ–xpathé€‰æ‹©å™¨é€‰ä¸­é¡µé¢ä¸Šçš„å…ƒç´ ï¼Œç„¶åå¯¹è¿™äº›å…ƒç´ åº”ç”¨ä¸€äº›æ“ä½œï¼Œä»è€Œå®ç°æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºã€‚</p><h3 id="åº•å±‚driverçš„å®ç°"><a href="#åº•å±‚driverçš„å®ç°" class="headerlink" title="åº•å±‚driverçš„å®ç°"></a>åº•å±‚driverçš„å®ç°</h3><p>åŸºäºåº•å±‚driverçš„åŸºç¡€ä¸Šï¼Œæä¾›ä¸€å¥—ç»Ÿä¸€çš„ ç•Œé¢äº¤äº’apiï¼Œå¦‚visit, right_clickï¼Œhoverç­‰ã€‚å®ƒå†…ç½® Rack::Test å’Œ Selenium æ”¯æŒï¼Œä¹Ÿæ”¯æŒå…¶ä»–é©±åŠ¨ã€‚WebKit é€šè¿‡å¤–éƒ¨ gem çš„å½¢å¼æ”¯æŒã€‚</p><p>åº•å±‚çš„driveræœ‰å¾ˆå¤šï¼Œå¯ä»¥æ˜¯å®Œå…¨æ‰“å¼€æµè§ˆå™¨æ–¹å¼çš„driver(å¦‚ï¼šRackTestï¼Œselenium-webdriver)ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºäºheadless webkit çš„ driver(å¦‚ï¼šcapybara-webkit, poltergeist).</p><h3 id="capybara-ä¼˜ç‚¹"><a href="#capybara-ä¼˜ç‚¹" class="headerlink" title="capybara ä¼˜ç‚¹"></a>capybara ä¼˜ç‚¹</h3><p>  â— æ— éœ€é…ç½® å¯¹äº Rails å’Œ Rack åº”ç”¨è€Œè¨€ï¼Œå¼€ç®±å³ç”¨ã€‚<br>  â— ç¬¦åˆç›´è§‰çš„ API æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¡Œä¸ºã€‚<br>  â— å¯æ›¿æ¢åç«¯ å¯ä»¥æ›¿æ¢æµ‹è¯•åç«¯ï¼Œä¾‹å¦‚ä»å¿«é€Ÿçš„ headless æ¨¡å¼åˆ‡æ¢åˆ°å®é™…çš„æµè§ˆå™¨ï¼Œæ— éœ€æ›´æ”¹æµ‹è¯•ã€‚<br>  â— å¼ºåŠ›åŒæ­¥ ä½ ä¸ç”¨æ‰‹åŠ¨ç­‰å¾…å¼‚æ­¥è¿‡ç¨‹ç»“æŸã€‚</p><p>å› ä¸ºcapyybaraæä¾›äº†ä»¥ä¸‹å¥½å¤„ï¼š<br>  â— è¿™æ˜¯ä¸€ä¸ªæ›´é«˜å±‚æ¬¡çš„APIï¼Œè¿™æ„å‘³ç€å½“ä½ ä½¿ç”¨ä¸åŒdriveræ—¶ï¼Œä¾‹å¦‚ï¼ˆheadlessæˆ–è€…browserï¼‰å¯ä»¥ä½¿ç”¨åŒæ ·çš„APIå¤„ç†åŠ¨æ€é¡µé¢æˆ–é™æ€HTML.<br>  â— å®ƒæ˜¯ä¸“é—¨ä¸ºUè‡ªåŠ¨åŒ–æµ‹è¯•webåº”ç”¨è€Œè®¾è®¡çš„ç¨‹åº,<br>  â— å› æ­¤å®ƒæ‹¥æœ‰ååˆ†æœ‰ç”¨çš„æ–­è¨€çš„æ–¹æ³•åˆ¤æ–­é¡µé¢æ˜¯å¦æ­£ç¡®ã€‚<br>  â— å½“æˆ‘ä»¬æµ‹è¯•çœŸå®çš„æµè§ˆå™¨æ—¶ï¼Œä»–ä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬å¤„ç†è®¸å¤šæ£˜æ‰‹çš„å¼‚æ­¥é—®é¢˜<br>  â— å®ƒè¢«è®¾è®¡ç”¨äºæµ‹è¯•æœºæ¶çš„åº”ç”¨ï¼Œå› æ­¤å®ƒä¼šå¼€æœºå¹¶ä¸ºæ‚¨ç®¡ç†åå°æœåŠ¡å™¨<br>  â— å®ƒä¸ºè®¾è®¡ä¸ºrackåº”ç”¨çš„æµ‹è¯•æ¡†æ¶,æ‰€ä»¥å®ƒå°†å¼•å¯¼å’Œç®¡ç†åå°æœåŠ¡ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;capybaraç®€ä»‹&quot;&gt;&lt;a href=&quot;#capybaraç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;capybaraç®€ä»‹&quot;&gt;&lt;/a&gt;capybaraç®€ä»‹&lt;/h2&gt;&lt;p&gt;capybaraæ˜¯ä¸€ä¸ªrubyçš„gem,å®ƒæ˜¯ä¸€ä¸ªç”¨æ¥æµ‹è¯•webåº”ç”¨çš„å·¥å…·åŒ…ï¼Œ
      
    
    </summary>
    
    
      <category term="rails" scheme="http://yoursite.com/tags/rails/"/>
    
      <category term="webdriver" scheme="http://yoursite.com/tags/webdriver/"/>
    
  </entry>
  
  <entry>
    <title>gatlingå®˜æ–¹æ–‡æ¡£ç¿»è¯‘5</title>
    <link href="http://yoursite.com/2016/06/29/gatling5/"/>
    <id>http://yoursite.com/2016/06/29/gatling5/</id>
    <published>2016-06-29T09:45:25.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬äº”ç¯‡</p><p><a href="http://gatling.io/docs/2.2.2/migration_guides/2.0-to-2.1.html" target="_blank" rel="external">http://gatling.io/docs/2.2.2/migration_guides/2.0-to-2.1.html</a></p><p>Migrating from 2.0 to 2.1<br>Global changes<br>Scala 2.11<br>Gatling is now built with Scala 2.11. If youâ€™re using Scala IDE, make sure youâ€™re using a version compatible with Scala 2.11.</p><p>Compiler runs standalone<br>Gatling itself doesnâ€™t compile the Simulations anymore and expects that the simulations are already compiled. This means that gatling.sh/gatling.bat and the Maven plugin runs the compiler prior to running Gatling. Consequently, a few options in gatling.conf have been removed:</p><p>gatling.core.disableCompiler<br>gatling.core.zinc.jvmArgs<br>Please note that, as this change implied that the Maven Plugin was heavily modified so that it compiles the simulations separately prior to running Gatling, youâ€™ll need to upgrade the Maven Plugin to its version 2.1.0 too.</p><p>Percentiles<br>Gatling now publishes 4 percentiles instead of 2. These percentiles are published in the reports and in the Graphite integration module. Beware that keys in gatling.conf file have been translated:</p><p>Gatling 2.0:<br>percentile1 = 95<br>percentile2 = 99<br>Gatling 2.1+:<br>percentile1 = 50<br>percentile2 = 75<br>percentile3 = 95<br>percentile4 = 99<br>Core<br>Mute mode<br>The â€œmute modeâ€ option, which was previously restricted to the SBT Plugin, is now also usable by the bundle scripts and the Maven Archetype.</p><p>Assertions<br>Validating assertions in combination with the reports-only / ro option does not require to pass the simulation (using -s) for which the assertions will be validated anymore.</p><p>Throttling<br>Throttling now automatically adds a maxDuration of either the simulation throttling duration, or the minimum of the scenarios throttling durations.</p><p>HTTP<br>Parameters<br>Form parameters are no longer specific to POST method, you can use them with all methods.</p><p>Request Bodies Directory<br>The directory name was changed from request-bodies to bodies as it now can host both request bodies and response bodies. The latter one are now captured by the recorder, and can be used as template for checking the response body.</p><p>CLI option was renamed from rbf to bdf.</p><p>Checks<br>Deprecated dontValidate was dropped in 2.1 as previously announced. Please use optional instead.</p><p>Protocol<br>Deprecated baseHeaders was dropped in 2.1 as previously announced. Please use headers instead.</p><p>Maven Archetype<br>Due to some necessary changes to allow Gatling to use Scala 2.11, youâ€™ll have to update IDEPathHelper.scala, Engine.scala and Recorder.scala if youâ€™re using the Maven archetype.</p><p>Either generate a new project with the 2.1.1 archetype (there was a bug in 2.1), or override your classes with the ones here. If you choose the latter, donâ€™t forget to fix the simulationPackage in Recorder.scala.</p><p>SBT Plugin<br>The SBT Pluginâ€™s test framework has been moved to the core project in 2.1. As a consequence, the test framework name has be modified to follow the naming conventions of all core modules and share its versionning.</p><p>The SBT Plugin will also share the same versionning schema as all other Gatling modules, and has been renamed to â€˜gatling-sbtâ€™.</p><p>The new coordinates are therefore :</p><p>â€œio.gatlingâ€ % â€œgatling-sbtâ€ % â€œ2.1.0â€ for the SBT Plugin<br>â€œio.gatlingâ€ % â€œgatling-test-frameworkâ€ % â€œ2.1.0â€ for the testing framework.</p><p>ä»2.0 åˆå¹¶åˆ°2.1<br>å…¨å±€å˜åŒ–<br>Scala 2.11<br>gatling ç°åœ¨ç”¨2.11 æ„å»ºï¼Œå¦‚æœä½ ä½¿ç”¨Scala IDE, ç¡®è®¤ä½ æ˜¯ä½¿ç”¨çš„ç‰ˆæœ¬èƒ½å¤Ÿå…¼å®¹scala2.11.</p><p>Compiler runs standalone<br>ç¼–è¯‘å™¨ç‹¬ç«‹çš„è¿è¡Œ</p><p>gatlingæœ¬èº«ä¸å†ç¼–è¯‘æ¨¡æ‹Ÿå™¨å’Œé¢„æµ‹æ¨¡æ‹Ÿå·²ç»ç¼–è¯‘ã€‚</p><p>è¿™å°±æ„å‘³ç€ gatling.sh/gatling.bat å’Œmavenæ’ä»¶ç¼–è¯‘åœ¨è¿è¡Œgatlingä¹‹å‰ã€‚å› æ­¤,ä¸€äº›é€‰é¡¹åœ¨gatling.conf å·²ç»è¢«ç§»é™¤</p><p>è¯·æ³¨æ„ï¼Œè¿™ç§å˜åŒ–æ„å‘³ç€Mavenæ’ä»¶å¤§é‡ä¿®æ”¹ï¼Œå•ç‹¬ç¼–è¯‘ä»¿çœŸè¿è¡Œgatlingä¹‹å‰ï¼Œä½ éœ€è¦å‡çº§ç‰ˆæœ¬2.1.0çš„Mavenæ’ä»¶ã€‚</p><p>Percentiles<br>gatling å‘å¸ƒ4ä½ç™¾åˆ†æ•°æ¥ä»£æ›¿2ä½ã€‚<br>è¿™äº›ç™¾åˆ†ä½æ•°å‘å¸ƒåœ¨ç”Ÿæˆçš„æŠ¥å‘Šå’Œå›¾è¡¨çš„é›†æˆæ¨¡å—<br>æ³¨æ„é”®åœ¨gatling.conf æ–‡ä»¶å·²ç»è¢«ç¿»è¯‘ã€‚</p><p>Gatling 2.0:<br>percentile1 = 95<br>percentile2 = 99<br>Gatling 2.1+:<br>percentile1 = 50<br>percentile2 = 75<br>percentile3 = 95<br>percentile4 = 99<br>Core</p><p>Mute mode</p><p>â€œé™éŸ³æ¨¡å¼â€é€‰é¡¹,è¯¥é€‰é¡¹ä»¥å‰å±€é™äºSBTæ’ä»¶,ç°åœ¨ä¹Ÿå¯ç”¨bundleçš„è„šæœ¬å’ŒMaven Archetypeã€‚<br>Assertions</p><p>éªŒè¯æ–­è¨€ç»“åˆthe reports-only / ro optionä¸éœ€è¦é€šè¿‡ä»¿çœŸ(using- s)çš„æ–­è¨€å°†è¢«éªŒè¯äº†ã€‚</p><p>Throttling<br>èŠ‚æµç°åœ¨è‡ªåŠ¨æ·»åŠ ä¸€ä¸ªmaxDurationä»¿çœŸèŠ‚æµçš„æŒç»­æ—¶é—´ã€èŠ‚æµæ—¶é—´æˆ–æœ€ä½çš„åœºæ™¯ã€‚<br>HTTP<br>Parameters<br>å½¢å¼å‚æ•°ä¸å†æ˜¯ç‰¹å®šäºPOSTæ–¹æ³•,æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬åœ¨å…¨éƒ¨çš„æ–¹æ³•ã€‚<br>Request Bodies Directory<br>ç›®å½•æ›´åä»è¯·æ±‚ä½“çš„body,å› ä¸ºå®ƒç°åœ¨å¯ä»¥ä¸»æœºè¯·æ±‚bodyå’Œå“åº”ã€‚åè€…ç°åœ¨è¢«è®°å½•,å¹¶å¯ä»¥ç”¨ä½œæ¨¡æ¿æ£€æŸ¥å“åº”çš„bodyã€‚</p><p>CLI optionè¢«é‡æ–°å‘½åä» rbf åˆ° bdf.</p><p>Checks<br>æ­¤å‰å®£å¸ƒå¼ƒç”¨dontValidateä¸‹é™2.1ã€‚è¯·ä½¿ç”¨optionalã€‚</p><p>Protocol<br>æ­¤å‰å®£å¸ƒå¼ƒç”¨baseHeadersä¸‹é™2.1ã€‚è¯·ä½¿ç”¨headersã€‚</p><p>Maven Archetype</p><p>ç”±äºä¸€äº›å¿…è¦çš„æ”¹å˜,å…è®¸gatlingä½¿ç”¨Scala 2.11ä¸­,ä½ å°†ä¸å¾—ä¸æ›´æ–°IDEPathHelper.scala, Engine.scala and Recorder.scalaã€‚å¦‚æœä½ ä½¿ç”¨Maven archetype ã€‚</p><p>SBT Plugin<br>SBTæ’ä»¶çš„æµ‹è¯•æ¡†æ¶å·²ç»è¢«è½¬ç§»åˆ°2.1çš„æ ¸å¿ƒé¡¹ç›®ã€‚å› æ­¤,æµ‹è¯•æ¡†æ¶çš„åç§°å·²è¢«ä¿®æ”¹éµå¾ªæ‰€æœ‰æ ¸å¿ƒæ¨¡å—çš„å‘½åçº¦å®šå’Œåˆ†äº«å®ƒçš„ç‰ˆæœ¬ã€‚</p><p>SBTæ’ä»¶è¿˜å°†å…±äº«ç›¸åŒçš„ç‰ˆæœ¬æ¨¡å¼å’Œå…¶ä»–gatlingæ¨¡å—,å¹¶é‡æ–°å‘½åä¸ºâ€œgatling-sbtâ€ã€‚<br>å› æ­¤,æ–°åæ ‡:<br>â€œio.gatlingâ€ % â€œgatling-sbtâ€ % â€œ2.1.0â€ å…³äº the SBT æ’ä»¶<br>â€œio.gatlingâ€ % â€œgatling-test-frameworkâ€ % â€œ2.1.0â€ å…³äºæµ‹è¯•æ¡†æ¶.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç¬¬äº”ç¯‡&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://gatling.io/docs/2.2.2/migration_guides/2.0-to-2.1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gatling.io/docs/
      
    
    </summary>
    
    
      <category term="gatling" scheme="http://yoursite.com/tags/gatling/"/>
    
  </entry>
  
  <entry>
    <title>gatlingå®˜æ–¹æ–‡æ¡£ç¿»è¯‘4</title>
    <link href="http://yoursite.com/2016/06/15/gatling3-1/"/>
    <id>http://yoursite.com/2016/06/15/gatling3-1/</id>
    <published>2016-06-15T09:54:52.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬å››ç¯‡</p><p><a href="http://gatling.io/docs/2.2.1/migration_guides/2.0.0-M3a-to-2.0.html" target="_blank" rel="external">http://gatling.io/docs/2.2.1/migration_guides/2.0.0-M3a-to-2.0.html</a><br>Migrating from 2.0.0-M3a to 2.0<br>Global changes<br>Gatling requires at least JDK7u6<br>As targeting newer JDKs provides bug fixes, speed improvements and opens opportunities for optimization, Gatling now requires at least a JDK7u6 (released almost two years ago already).</p><p>Gatling is now available on Maven Central<br>Gatling releases are now available on Maven Central, and snapshots are deployed on each successful build by Travis CI to Sonatypeâ€™s snapshots repository. If you were using Gatling with its Maven plugin, you no longer need to add the Excilys repository in your pom.xml.</p><p>Simulation<br>Necessary imports<br>import bootstrap.<em> and import assertions.</em> are now unnecessary and have to be removed.<br>import io.gatling.http.Headers.Names.<em> is now unnecessary, headers names are now directly available from HeaderNames.<br>import io.gatling.http.Headers.Values.</em> is now unnecessary, headers values are now directly available from HeaderValues.<br>Injection DSL<br>ramp(10 users) becomes rampUsers(10)<br>heaviside(10 users) becomes heavideUsers(10)<br>atOnce(10 users) becomes atOnceUsers(10)<br>constantRate(10 usersPerSec) becomes constantUsersPerSec(10)<br>rampRate(10 usersPerSec) becomes rampUsersPerSec(10)<br>split(10 users) becomes splitUsers(10)<br>Core<br>Structure Elements<br>In asLongAs, exitASAP now defaults to true. For more information on the change of behaviour it introduces, see asLongAs documentation.</p><p>Checks<br>whatever has been renamed to optional.<br>transform now no longer takes and returns an Option[T] and takes and returns plain types, but transformOption provides the same functionality as transform did.<br>HTTP<br>Form parameters (for POST requests)<br>Renamed</p><p>Methods for adding form parameters to the request have been renamed:</p><p>param =&gt; formParam<br>multiValuedParam =&gt; multiValuedFormParam<br>Misc<br>requestInfoExtractor and responseInfoExtractor have been merged into a single extraInfoExtractor, which takes a ExtraInfo =&gt; List[Any] function.<br>gatling.http.ahc.useRawUrl configuration parameter was removed, please use disableUrlEncoding instead, as described here.<br>For more information on extraInfoExtractor, please refer to its documentation.</p><p>Logs<br>simulation.log has been redesigned.</p><p>If you wrote your own specific simulation.log parser, youâ€™ll need to migrate it to the new structure.</p><p>Recorder<br>Until now, when setting up the Recorder, you had to setup two ports for the Recorderâ€™s local proxy: one for HTTP, one for HTTPS. This is not needed anymore, as the Recorder handles itself the switch to an HTTPS connection if necessary, and only a single port needs to be specified.</p><p>Maven Plugin<br>The <includes>â€¦</includes> and <excludes>â€¦</excludes> configuration options have been removed. Should you want to select a specific simulation to run, you can use the <simulationclass>â€¦</simulationclass> config option to do so.</p><p>For more information, see the Maven plugin documentation.</p><p>Migrating from 2.0.0-M3a to 2.0<br>ä»2.0.0-M3a åˆå¹¶åˆ°2.0</p><p>å…¨å±€æ”¹å˜<br>Gatling  éœ€è¦è‡³å°‘JDK7u6ç‰ˆæœ¬</p><p>å› ä¸ºå¿ƒå¾—JDKsä¿®å¤ä¸€äº›é—®é¢˜ï¼Œé€Ÿåº¦å¾—åˆ°æ”¹å–„ï¼Œä¼˜åŒ–äº†å¤„ç†ï¼Œgatling ç°åœ¨éœ€è¦è‡³å°‘JDK7u6(2å¹´å‰å·²ç»å‘å¸ƒ)</p><p>gatling ç°åœ¨åŒæ ·åœ¨maven cetral é€‚ç”¨</p><p>gatling ç°åœ¨åŒæ ·åœ¨maven cetral é€‚ç”¨ï¼Œå¹¶ä¸”å¿«ç…§éƒ½ä¼šéƒ¨ç½²åˆ° Sonatypeâ€™s snapshots repository å½“æ¯æ¬¡ Travis ci æ„å»ºæˆåŠŸåã€‚å¦‚æœä½ ä½¿ç”¨mavenæ’ä»¶ç‰ˆgatlingï¼Œä½ ä¸éœ€è¦æ·»åŠ the Excilys repository åœ¨ä½ çš„pom.xmlä¸­ã€‚</p><p>æ¨¡æ‹Ÿå™¨<br>Necessary imports<br>import bootstrap.<em> and import assertions.</em> ç°åœ¨å·²ç»ä¸éœ€è¦å¹¶ä¸”è¢«ç§»é™¤<br>import io.gatling.http.Headers.Names.<em> å·²ç»ä¸éœ€è¦ï¼Œ headers namesè¢« HeaderNamesä»£æ›¿.<br>import io.gatling.http.Headers.Values.</em> å·²ç»ä¸éœ€è¦, headers values è¢« HeaderValuesä»£æ›¿.</p><p>Injection DSL<br>ramp(10 users) å˜ä¸º rampUsers(10)<br>heaviside(10 users) å˜ä¸º heavideUsers(10)<br>atOnce(10 users)å˜ä¸º atOnceUsers(10)<br>constantRate(10 usersPerSec) å˜ä¸º constantUsersPerSec(10)<br>rampRate(10 usersPerSec)å˜ä¸º rampUsersPerSec(10)<br>split(10 users) å˜ä¸º splitUsers(10)<br>Core</p><p>Structure Elements<br>ç»“æ„åŒ–ç»„ä»¶</p><p>åœ¨ asLongAs, exitASAP é»˜è®¤ä¸ºtruleã€‚<br>æœ‰å…³çš„è¡Œä¸ºæ”¹å˜çš„æ›´å¤šä¿¡æ¯ä»‹ç»,è¯·çœ‹asLongAsæ–‡æ¡£ã€‚</p><p>Checks</p><p>whatever å·²ç»è¢«é‡æ–°å‘½åä¸º optional.<br>transform now no longer takes and returns an Option[T] and takes and returns plain types, but transformOption provides the same functionality as transform did.<br>transformç°åœ¨ä¸å†éœ€è¦ç°åœ¨è¿”å›ä¸€ä¸ªOption[T],å¹¶è¿”å›plainç±»å‹,ä½†transformOptionå’Œtransformæä¾›äº†ç›¸åŒçš„åŠŸèƒ½ã€‚<br>HTTP<br>Form parameters (å…³äº POST è¯·æ±‚)<br>é‡å‘½å</p><p> adding form parameters æ–¹æ³•è¯·æ±‚å·²ç»è¢«é‡å‘½å:</p><p>param =&gt; formParam<br>multiValuedParam =&gt; multiValuedFormParam</p><p>Misc<br>requestInfoExtractor å’Œ responseInfoExtractor å·²ç»åˆå¹¶ä¸º extraInfoExtractor, which takes a ExtraInfo =&gt; List[Any] function.<br>gatling.http.ahc.useRawUrl é…ç½®å‚æ•°å·²ç»è¢«ç§»é™¤, è¯·ç”¨ disableUrlEncoding ä»£æ›¿, æè¿°å¦‚ä¸‹.<br>æ›´å¤šå…³äº extraInfoExtractorä¿¡æ¯, è¯·å‚ç…§è¿™ä¸ªæ–‡æ¡£.</p><p>Logs</p><p>simulation.log å·²ç»è¢«é‡æ–°è®¾è®¡.</p><p>å¦‚æœä½ å†™è‡ªå·±çš„simulation.logè§£æå™¨,æ‚¨éœ€è¦å®ƒè¿ç§»åˆ°æ–°ç»“æ„</p><p>Recorder</p><p>Until now, å½“ä½ è®¾ç½® Recorderæ—¶, ä½ å¿…é¡»è®¾ç½®ä¸¤ä¸ªç«¯å£è®°å½•å™¨çš„å½“åœ°ä»£ç†:ä¸€ä¸ªç”¨äºHTTP,HTTPSã€‚ è¿™å†ä¹Ÿä¸éœ€è¦äº†, å› ä¸ºrecordå¤„ç†æœ¬èº«è½¬å‘ä¸€ä¸ªHTTPSè¿æ¥å¦‚æœå¿…è¦,å¹¶ä¸”åªéœ€è¦æŒ‡å®šä¸€ä¸ªå•ç‹¬çš„ç«¯å£ã€‚</p><p>Maven Plugin</p><p>The <code>&lt;includes&gt;...&lt;/includes&gt;</code> å’Œ <code>&lt;excludes&gt;...&lt;/excludes&gt;</code> é…ç½®é¡¹ å·²ç»è¢«ç§»é™¤. å¦‚æœä½ éœ€è¦é€‰æ‹©ä¸€ä¸ªç‰¹æ®Šçš„æ¨¡æ‹Ÿè¿è¡Œ, ä½ å¯ä»¥ä½¿ç”¨ <code>&lt;simulationClass&gt;...&lt;/simulationClass&gt;</code> å»é…ç½®.</p><p>æ›´å¤šçš„ä¿¡æ¯, æŸ¥é˜… Maven plugin æ–‡æ¡£.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç¬¬å››ç¯‡&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://gatling.io/docs/2.2.1/migration_guides/2.0.0-M3a-to-2.0.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gatling.io
      
    
    </summary>
    
    
      <category term="gatling" scheme="http://yoursite.com/tags/gatling/"/>
    
  </entry>
  
  <entry>
    <title>gatlingå®˜æ–¹æ–‡æ¡£ç¿»è¯‘3</title>
    <link href="http://yoursite.com/2016/06/08/gatling3/"/>
    <id>http://yoursite.com/2016/06/08/gatling3/</id>
    <published>2016-06-08T15:22:40.000Z</published>
    <updated>2017-09-21T07:39:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸‰ç¯‡<br><a href="http://gatling.io/docs/2.2.1/migration_guides/1.5.x-to-2.0.html" target="_blank" rel="external">http://gatling.io/docs/2.2.1/migration_guides/1.5.x-to-2.0.html</a></p><p>Migrating from 1.5.x to 2.0<br>Global changes<br>Gatling requires at least JDK7u6<br>As targeting newer JDKs provides bug fixes, speed improvements and opens opportunities for optimization, Gatling now requires at least a JDK7u6 (released almost two years ago already).</p><p>Scala 2.10<br>Gatling is built with Scala 2.10. If youâ€™re using Scala IDE, make sure youâ€™re using a version compatible with Scala 2.10.</p><p>Gatling is now available on Maven Central<br>Gatling releases are now available on Maven Central, and snapshots are deployed on each successful build by Travis CI to Sonatypeâ€™s snapshots repository. If you were using Gatling with its Maven plugin, you no longer need to add the Excilys repository in your pom.xml.</p><p>Package and GroupId changes<br>Gatlingâ€™s artifacts groupId and package are now io.gatling. Youâ€™ll have to :</p><p>Update your build scripts to change the groupId of Gatlingâ€™s dependencies from com.excilys.ebi.gatling to io.gatling<br>Update your simulations to replace the com.excilys.ebi.gatling part in the imports by io.gatling<br>Simulation<br>Necessary imports<br>akka.util.duration classes have been ported to the scala.concurrent.duration package. Simply replace import akka.util.duration.<em> by import scala.concurrent.duration.</em>.<br>import bootstrap.<em> and import assertions.</em> are now unnecessary and have to be removed.<br>import com.excilys.ebi.gatling.http.Headers.Names.<em> is now unnecessary, headers names are now directly available from HeaderNames.<br>import com.excilys.ebi.gatling.http.Headers.Values.</em> is now unnecessary, headers values are now directly available from HeaderValues.<br>Protocols setup<br>Protocols are no longer configured by scenario and are now configured by simulation, using the protocols method.</p><p>A 1.4.x-1.5.x setUp like this one:</p><p>setUp(scn.(â€¦).protocolConfig(httpConfig))<br>would now be with Gatling 2.0:</p><p>setUp(scn.(â€¦)).protocols(httpConfig)<br>Assertions setup<br>The assertThat method has been removed, assertions are now configured using assertions in the same fashion as protocols are, e.g.</p><p>setup(scn.(â€¦).protocolConfig(httpConfig))</p><p>assertThat(global.responseTime.max.lessThan(1000))<br>becomes:</p><p>setup(scn.(â€¦))<br>  .protocols(httpConfig)<br>  .assertions(global.responseTime.max.lessThan(1000)<br>New Injection DSL<br>The users, ramp and delay methods to configure the injection profile for your scenario have been removed in favor of a full-blown dedicated DSL.</p><p>Injection steps are now configured using the inject method available on your configured scenario.</p><p>Migrating users</p><p>// With Gatling 1.5.X<br>setUp(scn.users(10)â€¦)</p><p>// With Gatling 2.0<br>setUp(scn.inject(atOnceUsers(10))â€¦<br>Migrating ramp</p><p>// With Gatling 1.5.X<br>setUp(scn.users(10).ramp(30)â€¦)</p><p>// With Gatling 2.0<br>setUp(scn.inject(rampUsers(10) over (30 seconds))â€¦<br>Migrating delay</p><p>// With Gatling 1.5.X<br>setUp(scn.users(10).delay(5)â€¦)</p><p>// With Gatling 2.0<br>setUp(scn.inject(nothingFor(5 seconds), atOnceUsers(10))â€¦<br>For more information on the new Injection DSL, please consult the Injection DSL reference documentation.</p><p>Core<br>Checks<br>whatever has been renamed to optional.</p><p>Structure Elements<br>The first parameter of foreach is now an Expression (e.g. a Gatling EL string), not the name of the attribute to loop over.<br>For example, if you have a list attribute in the userâ€™s session holding a list of values:</p><p>.foreach(â€œlistâ€, â€œelemâ€) {<br>  â€¦<br>}<br>becomes:</p><p>.foreach(â€œ${list}â€, â€œelemâ€) {<br>  â€¦<br>}<br>In asLongAs, exitASAP now defaults to true. For more information on the change of behaviour it introduces, see asLongAs documentation.<br>Session<br>Session has been under major refactoring:</p><p>session.get(â€œfoobarâ€) becomes session(â€œfoobarâ€)<br>session.getTypedAttribute<a href="&quot;foobar&quot;">T</a> becomes session(â€œfoobarâ€).as[T]<br>session.getAttributeAsOption<a href="&quot;foobar&quot;">T</a> becomes session(â€œfoobarâ€).asOption[T]<br>session.setAttribute(â€œfoobarâ€, 1234) becomes session.set(â€œfoobarâ€, 1234)<br>session.setAttributes(Map(â€œfooâ€ -&gt; 1, â€œbarâ€ -&gt; 2) becomes session.setAll(â€œfooâ€ -&gt; 1, â€œbarâ€ -&gt; 2)<br>session.removeAttribute(â€œfoobarâ€) becomes session.remove(â€œfoobarâ€)<br>session.isAttributeDefined(â€œfoobarâ€) becomes session.contains(â€œfoobarâ€)<br>HTTP<br>Protocol<br>HTTP protocol bootstrapper, httpProtocol, has been renamed to http.</p><p>Query parameters<br>Removed</p><p>Versions of queryParam and multivaluedQueryParam that took no other parameters than the key (resolving the value from the session, using the keyâ€™s name to find the attribute with the same name) have been removed.</p><p>Modified</p><p>multivaluedQueryParam can now resolve the values directly from the session, using Gatlingâ€™s EL.</p><p>Form parameters (for POST requests)<br>Renamed</p><p>Methods for adding form parameters to the request have been renamed:</p><p>param =&gt; formParam<br>multiValuedParam =&gt; multivaluedFormParam<br>Removed</p><p>Versions of queryParam and multivaluedQueryParam that took no other parameters than the key (resolving the value from the session, using the keyâ€™s name to find the attribute with the same name) have been removed.</p><p>Modified</p><p>multivaluedFormParam can now resolve the values directly from the session, using Gatlingâ€™s EL.</p><p>Request bodies<br>Scalate templates support has been dropped. ElFileBody (see below) is the best suited to replace your existing Scalate templates.<br>The API for setting request bodies on request has changed. Instead of having several methods like body, fileBody and byteArrayBody, there is a now a single method, body(â€¦) in which you set the type of body to send.<br>Migrating .body(body)</p><p>.body(body) has been replaced by .body(StringBody(body)).</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(â€œLook Ma, Iâ€™m a request body !â€)<br>becomes:</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(StringBody(â€œLook Ma, Iâ€™m a request body !â€))<br>Migrating .fileBody(filePath)</p><p>.fileBody(filePath) has been replaced by .body(RawFileBody(filePath)).</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .fileBody(â€œmy_upload.xslxâ€)<br>becomes:</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(FileBody(â€œmy_upload.xslxâ€))<br>Migrating .fileBody(filePath, values)</p><p>.fileBody(filePath, values) has been replaced by .body(ElFileBody(filePath)). values are now directly resolved from the virtual userâ€™s sessionâ€™s content.</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .fileBody(â€œmy_template.txtâ€, Map(â€œuserNameâ€ -&gt; â€œuser123â€)<br>becomes:</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(ElFileBody(â€œmy template.txtâ€))<br>If my template.txt contains:</p><p>Hi, my name is ${userName}<br>and the virtual userâ€™s session has an attribute userName set to user123,</p><p>Then the effectively sent request body would be:</p><p>Hi, my name is user123<br>Migrating .byteArrayBody(byteArray)</p><p>.byteArrayBody(byteArray) has been replaced by .body(ByteArrayBody(bytes)).</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .byteArrayBody(Array(1, 2, 3, 4))<br>becomes:</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(ByteArrayBody(Array(1, 2, 3, 4)))<br>For more information, see the Request bodies reference section.</p><p>Misc<br>ExtendedResponse has been renamed into Response.<br>requestInfoExtractor and responseInfoExtractor have been merged into a single extraInfoExtractor, which takes a ExtraInfo =&gt; List[Any] function.<br>For more information on extraInfoExtractor, please refer to its documentation.</p><p>Logs<br>simulation.log has been redesigned.</p><p>If you wrote your own specific simulation.log parser, youâ€™ll need to migrate it to the new structure.</p><p>Recorder<br>Until now, when setting up the Recorder, you had to setup two ports for the Recorderâ€™s local proxy: one for HTTP, one for HTTPS. This is not needed anymore, as the Recorder handles itself the switch to an HTTPS connection if necessary, and only a single port needs to be specified.</p><p>Maven Plugin<br>The <includes>â€¦</includes> and <excludes>â€¦</excludes> configuration options have been removed. Should you want to select a specific simulation to run, you can use the <simulationclass>â€¦</simulationclass> config option to do so.</p><p>For more information, see the Maven plugin documentation.</p><p>ä»1.5è¿ç§»åˆ°2.0</p><p>å…¨å±€å˜åŒ–<br>gatlingè‡³å°‘éœ€è¦JDK7u6</p><p>æä¾›æ–°jdké’ˆå¯¹çš„æ˜¯bugä¿®å¤ã€ä¼˜åŒ–é€Ÿåº¦å’Œæ‰“å¼€ä¼˜åŒ–é€Ÿåº¦,gatlingç°åœ¨è‡³å°‘éœ€è¦JDK7u6(å¤§çº¦ä¸¤å¹´å‰å·²ç»å‘å¸ƒ)ã€‚<br>Scala 2.10</p><p>gatlingä½¿ç”¨Scala 2.10ã€‚å¦‚æœä½ ä½¿ç”¨Scalaçš„IDE,ç¡®ä¿æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªç‰ˆæœ¬èƒ½ä¸Scala 2.10å…¼å®¹ã€‚<br>gatlingç°åœ¨å¯ç”¨åœ¨Mavenä¸­å¤®åº“</p><p>galtlingç‰ˆæœ¬ç°åœ¨å¯ä»¥ä½¿ç”¨Mavenä¸­å¤®,ä»¥åŠå¿«ç…§éƒ¨ç½²åœ¨æ¯ä¸ªæˆåŠŸæ„å»ºäº† Travis CI Sonatypeå¿«ç…§å­˜å‚¨åº“ã€‚å¦‚æœä½ æ˜¯ä½¿ç”¨gatlingçš„Mavenæ’ä»¶,æ‚¨ä¸å†éœ€è¦æ·»åŠ pom.xml Excilyså­˜å‚¨åº“ã€‚</p><p>packageå’ŒGroupIdå˜åŒ–</p><p>gatlingçš„groupIdå’Œpackageç°åœ¨io.gatlingç»„ä»¶ã€‚<br>ä½ å¿…é¡»:<br>æ›´æ–°æ‚¨çš„æ„å»ºè„šæœ¬æ”¹å˜ä»com.excilys.ebi groupId gatlingçš„ä¾èµ–å…³ç³»ã€‚gatling,io.gatlingæ›´æ–°ä½ çš„æ¨¡æ‹Ÿæ¥ä»£æ›¿com.excilys.ebiã€‚io.gatling<br>æ›´æ–°ä½ çš„æ¨¡æ‹Ÿå™¨æ¥ä»£æ›¿com.excilys.ebi.io.gatlingéƒ¨åˆ†é€šè¿‡å¼•å…¥io.gatling</p><p>akka.util.duration ç±» å·²ç»ç§»æ¤åˆ° scala.concurrent.duration åŒ…ä¸­ã€‚ç®€å•ä» import akka.util.duration.<em> æ›¿æ¢åˆ° import scala.concurrent.duration.</em>.</p><p>import bootstrap.<em> å’Œ import assertions.</em> ç°åœ¨ä¸æ˜¯å¿…é¡»çš„ï¼Œå·²ç»è¢«ç§»é™¤.</p><p>import com.excilys.ebi.gatling.http.Headers.Names._ ç°åœ¨ä¸æ˜¯å¿…é¡»çš„, headers åå­— ç›´æ¥ä½¿ç”¨HeaderNames.</p><p>import com.excilys.ebi.gatling.http.Headers.Values._ ç°åœ¨ä¸æ˜¯å¿…é¡»çš„, headers å€¼ ç›´æ¥ä½¿ç”¨HeaderValues.</p><p>åè®®è®¾ç½®<br>åè®®å·²ç»ä¸å†é…ç½®åœºæ™¯,ç°åœ¨é…ç½®æ¨¡æ‹Ÿå™¨,ä½¿ç”¨åè®®çš„æ–¹æ³•ã€‚</p><p>A 1.4.x-1.5.x è®¾ç½®å¦‚ä¸‹:</p><p>setUp(scn.(â€¦).protocolConfig(httpConfig))<br> Gatling 2.0å°†ä¼šè¿™æ ·è®¾ç½®:</p><p>setUp(scn.(â€¦)).protocols(httpConfig)</p><p>Assertions è®¾ç½®</p><p>assertThatæ–¹æ³•å·²ç»è¢«ç§»é™¤ï¼Œassertionsé…ç½®ä½¿ç”¨assertionsä»¥ç›¸åŒçš„æ–¹å¼ä½œä¸ºåè®®.å¦‚ä¸‹</p><p>setup(scn.(â€¦).protocolConfig(httpConfig))</p><p>assertThat(global.responseTime.max.lessThan(1000))</p><p>æ”¹å˜<br>setup(scn.(â€¦))<br>  .protocols(httpConfig)<br>  .assertions(global.responseTime.max.lessThan(1000)<br>æ–°çš„DSLè¯­è¨€æ³¨å…¥</p><p>é€šè¿‡ç”¨æˆ·ã€å¢é•¿å’Œå»¶è¿Ÿæ¥é…ç½®ä½ çš„åœºæ™¯æ³¨å…¥å‰–é¢çš„æ–¹æ³•å·²è¢«æ‹†é™¤,å–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸“ç”¨çš„DSLã€‚</p><p>æ³¨å…¥æ­¥éª¤ç°åœ¨ä½¿ç”¨æ³¨å°„æ–¹æ³•é…ç½®å¯ç”¨çš„é…ç½®ã€‚</p><p>åˆå¹¶ users</p><p>// With Gatling 1.5.X<br>setUp(scn.users(10)â€¦)</p><p>// With Gatling 2.0<br>setUp(scn.inject(atOnceUsers(10))â€¦<br>åˆå¹¶ ramp</p><p>// With Gatling 1.5.X<br>setUp(scn.users(10).ramp(30)â€¦)</p><p>// With Gatling 2.0<br>setUp(scn.inject(rampUsers(10) over (30 seconds))â€¦<br>åˆå¹¶ delay</p><p>// With Gatling 1.5.X<br>setUp(scn.users(10).delay(5)â€¦)</p><p>// With Gatling 2.0<br>setUp(scn.inject(nothingFor(5 seconds), atOnceUsers(10))â€¦</p><p>æ–°æ³¨å…¥çš„DSLçš„æ›´å¤šä¿¡æ¯,è¯·æŸ¥é˜…æ³¨å…¥DSLå‚è€ƒæ–‡æ¡£ã€‚</p><p>æ ¸å¿ƒ<br>Checks<br>whatever ç°åœ¨è¢«æ”¹åä¸º optional.</p><p>Structure Elements</p><p>The first parameter of foreach is now an Expression (e.g. a Gatling EL string), not the name of the attribute to loop over.</p><p>foreachç°åœ¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå‚æ•°(å¦‚gatling EL string),ä¸æ˜¯éå†å±æ€§çš„åç§°ã€‚</p><p>For example, if you have a list attribute in the userâ€™s session holding a list of values:</p><p>ä¾‹å¦‚,å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå±æ€§åˆ—è¡¨åœ¨ç”¨æˆ·çš„ä¼šè¯æŒæœ‰çš„å€¼åˆ—è¡¨:</p><p>.foreach(â€œlistâ€, â€œelemâ€) {<br>  â€¦<br>}<br>å˜ä¸º:</p><p>.foreach(â€œ${list}â€, â€œelemâ€) {<br>  â€¦<br>}<br>In asLongAs, exitASAP now defaults to true. For more information on the change of behaviour it introduces, see asLongAs documentation.</p><p>åœ¨ asLongAs exitASAP ç°åœ¨é»˜è®¤è®¾ç½®æ˜¯true.æœ‰å…³çš„è¡Œä¸ºæ”¹å˜çš„æ›´å¤šä¿¡æ¯ä»‹ç»,è¯·çœ‹asLongAsæ–‡æ¡£ã€‚</p><p>Session</p><p>ä¼šè¯å·²ç»ä½œä¸ºä¸»è¦çš„é‡æ„:</p><p>session.get(â€œfoobarâ€) becomes session(â€œfoobarâ€)<br>session.getTypedAttribute<a href="&quot;foobar&quot;">T</a> becomes session(â€œfoobarâ€).as[T]<br>session.getAttributeAsOption<a href="&quot;foobar&quot;">T</a> becomes session(â€œfoobarâ€).asOption[T]<br>session.setAttribute(â€œfoobarâ€, 1234) becomes session.set(â€œfoobarâ€, 1234)<br>session.setAttributes(Map(â€œfooâ€ -&gt; 1, â€œbarâ€ -&gt; 2) becomes session.setAll(â€œfooâ€ -&gt; 1, â€œbarâ€ -&gt; 2)<br>session.removeAttribute(â€œfoobarâ€) becomes session.remove(â€œfoobarâ€)<br>session.isAttributeDefined(â€œfoobarâ€) becomes session.contains(â€œfoobarâ€)</p><p>HTTPåè®®<br>HTTPåè®®å¯åŠ¨åŠ è½½å™¨ã€httpProtocolå·²ç»æ›´åä¸ºHTTPã€‚<br>Query å‚æ•°<br>ç§»é™¤<br>ç‰ˆæœ¬çš„queryParamå’ŒmultivaluedQueryParam,æ²¡æœ‰å…¶ä»–æ¯”çš„å…³é”®å‚æ•°(è§£å†³ä¼šè¯ä¸­çš„å€¼,ä½¿ç”¨å…³é”®çš„åå­—æ‰¾åˆ°å…·æœ‰ç›¸åŒåç§°çš„å±æ€§)å·²è¢«ç§»é™¤ã€‚</p><p>Modified</p><p>multivaluedFormParamç°åœ¨å¯ä»¥è§£å†³ç›´æ¥ä»ä¼šè¯å€¼,ä½¿ç”¨gatlingçš„ELã€‚</p><p>Request bodies</p><p>Scalate templates support has been dropped.<br>å¯¹Scalate templates æ”¯æŒå·²ç»æ”¾å¼ƒã€‚</p><p> ElFileBody (å¦‚ä¸‹) æ˜¯å½“å‰ä»£æ›¿Scalate templatesæœ€ä½³æ–¹æ¡ˆ</p><p>apiçš„è¯·æ±‚ä½“çš„è®¾ç½®æ„å¢ƒæ”¹å˜ã€‚ç°åœ¨ç”¨è¿™å‡ ä¸ªæ–¹æ³•æ¥ä»£æ›¿body fileBody byteArrayBody.ç°åœ¨æœ‰ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•ã€‚body(â€¦)é€šè¿‡ä½ è®¾ç½®çš„ç±»å‹çš„bodyæ¥å‘é€ã€‚<br>åˆå¹¶ .body(body)</p><p>body(body) å·²ç»è¢« .body(StringBody(body))ä»£æ›¿.</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(â€œLook Ma, Iâ€™m a request body !â€)<br>å˜æˆï¼š</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(StringBody(â€œLook Ma, Iâ€™m a request body !â€))</p><p>åˆå¹¶ .fileBody(filePath)</p><p>.fileBody(filePath) è¢« .body(RawFileBody(filePath))ä»£æ›¿.</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .fileBody(â€œmy_upload.xslxâ€)<br>becomes:</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(FileBody(â€œmy_upload.xslxâ€))</p><p>åˆå¹¶ .fileBody(filePath, values)</p><p>.fileBody(filePath, values) å·²ç»è¢« .body(ElFileBody(filePath))ä»£æ›¿.<br>å€¼ç°åœ¨ç›´æ¥è§£å†³è™šæ‹Ÿç”¨æˆ·ä¼šè¯çš„å†…å®¹ã€‚</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .fileBody(â€œmy_template.txtâ€, Map(â€œuserNameâ€ -&gt; â€œuser123â€)</p><p>å˜ä¸º</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(ElFileBody(â€œmy template.txtâ€))</p><p>å¦‚æœ template.txt åŒ…å«:</p><p>Hi, my name is ${userName}</p><p>å’Œè™šæ‹Ÿç”¨æˆ·çš„ä¼šè¯å±æ€§çš„ç”¨æˆ·åè®¾ç½®ä¸ºuser123,</p><p>ç„¶åå°†å‘é€æœ‰æ•ˆåœ°è¯·æ±‚ä¸»ä½“:<br>Hi, my name is user123</p><p>åˆå¹¶ .byteArrayBody(byteArray)</p><p>.byteArrayBody(byteArray) è¢« .body(ByteArrayBody(bytes))ä»£æ›¿.</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .byteArrayBody(Array(1, 2, 3, 4))</p><p>å˜ä¸ºï¼š</p><p>http(â€œmy post requestâ€)<br>  .post(â€œ<a href="http://www.example.org" target="_blank" rel="external">http://www.example.org</a>â€œ)<br>  .body(ByteArrayBody(Array(1, 2, 3, 4)))</p><p>æ›´å¤šæœ‰å…³ä¿¡æ¯,è¯·å‚è§è¯·æ±‚æœºæ„å¼•ç”¨éƒ¨åˆ†ã€‚</p><p>Misc<br>ExtendedResponseå·²ç»é‡å‘½åä¸ºå“åº”ã€‚requestInfoExtractorå’ŒresponseInfoExtractorå·²ç»åˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„extraInfoExtractor,ExtraInfo =&gt; List[Any] function.ã€‚<br>åœ¨extraInfoExtractorçš„æ›´å¤šä¿¡æ¯,è¯·å‚é˜…æ–‡æ¡£ã€‚</p><p>Logs<br>simulation.log è¢«é‡æ–°è®¾è®¡ã€‚</p><p>If you wrote your own specific simulation.log parser, youâ€™ll need to migrate it to the new structure.<br>å¦‚æœä½ å†™è‡ªå·±çš„simulation.logè§£æå™¨,æ‚¨éœ€è¦å®ƒè¿ç§»åˆ°æ–°ç»“æ„</p><p>Recorder<br>å½•åˆ¶å™¨<br>Until now, å½“ä½ è®¾ç½® Recorderæ—¶, ä½ å¿…é¡»è®¾ç½®ä¸¤ä¸ªç«¯å£è®°å½•å™¨çš„å½“åœ°ä»£ç†:ä¸€ä¸ªç”¨äºHTTP,HTTPSã€‚ è¿™å†ä¹Ÿä¸éœ€è¦äº†, å› ä¸ºrecordå¤„ç†æœ¬èº«è½¬å‘ä¸€ä¸ªHTTPSè¿æ¥å¦‚æœå¿…è¦,å¹¶ä¸”åªéœ€è¦æŒ‡å®šä¸€ä¸ªå•ç‹¬çš„ç«¯å£ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç¬¬ä¸‰ç¯‡&lt;br&gt;&lt;a href=&quot;http://gatling.io/docs/2.2.1/migration_guides/1.5.x-to-2.0.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gatling.io/docs/2.
      
    
    </summary>
    
    
      <category term="gatling" scheme="http://yoursite.com/tags/gatling/"/>
    
  </entry>
  
  <entry>
    <title>gatlingå®˜æ–¹æ–‡æ¡£ç¿»è¯‘2</title>
    <link href="http://yoursite.com/2016/06/02/gatling2/"/>
    <id>http://yoursite.com/2016/06/02/gatling2/</id>
    <published>2016-06-02T14:37:03.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬äºŒç¯‡<br><a href="http://gatling.io/docs/2.2.1/whats_new/2.2.html" target="_blank" rel="external">http://gatling.io/docs/2.2.1/whats_new/2.2.html</a></p><p>Whatâ€™s New in 2.2<br>JDK<br>Gatling now requires JDK8. JVM default tuning uses G1 Garbage Collector, so we strongly advice you use a very up-to-date JDK, not early versions.</p><p>Core<br>Feeder Shuffle<br>You can now shuffle a feeder content before enqueuing its content, see Feeder documentation for more details.</p><p>Assertions<br>Gatling now supports â€œper-millionâ€ assertions, similar to â€œpercentâ€ ones.</p><p>Conditional Checks (since 2.2.1)<br>Itâ€™s now possible to only perform a given check when a given condition is met. See Conditional Checks documentation for more details.</p><p>HTTP<br>Native Transport<br>Gatling is now based on Netty 4 that provide an optional native epoll-based NIO re-implementation (different from JDK NIO) which can give better throughput. This option is only available on Linux. See Netty documentation for more details.</p><p>Gatling ships with the required jar, but the option is turned down by default.</p><p>In order to enable it, set gatling.http.ahc.useNativeTransport to true in gatling.conf.</p><p>OpenSSL Support<br>Netty 4 also provides a support for OpenSSL and BoringSSL. See Netty documentation for more details.</p><p>Gatling doesnâ€™t ship the required jar and it depends on your operating system and if you want static or dynamic binding. Youâ€™re expected to manually add the suited library to Gatlingâ€™s classpath.</p><p>In order to enable it, set gatling.http.ahc.useOpenSsl to true in gatling.conf.</p><p>Forms Support<br>You can now use the form(â€œcssSelectorâ€).saveAs(â€œmyFormâ€) check to capture a Map[String, Seq[String]] of all the inputs of an HTML form at once.</p><p>You can then feed them back to a later request. See HTTP request documentation for more details.</p><p>Polling Support<br>Gatling now supports HTTP polling, see HTTP polling documentation for more details.</p><p>Hostname Resolution<br>By default, virtual users now use a shuffled list of the DNS records Gatling gets from the JDK. If you use DNS round-robin, this will balance your virtual users amongst the nodes of a static cluster.</p><p>Alternatively, you can enable perUserNameResolution on the HTTP protocol and have each virtual user perform DNS resolution on its own. This, way, your virtual users would be properly balanced if your cluster grows elastically under load. See HTTP protocol documentation for more details.</p><p>We also support DNS fail-over, meaning that virtual users will try the next DNS record of they couldnâ€™t connect to the first address.</p><p>Hostname Aliasing<br>You can bypass hostname resolution and define aliases in hostNameAliases on the HTTP protocol. See HTTP protocol documentation for more details.</p><p>Local Addresses<br>Itâ€™s now possible to pass multiple local addresses to the HTTP protocol in localAddresses. See HTTP protocol documentation for more details.</p><p>Reports<br>JUnit Format Report File<br>Gatling now generates a JUNIt format report file based on the assertions in your simulation. This file is generated as /js/assertions.xml.</p><p>Groups Duration<br>You can switch from Group cumulated response times to duration when generating the reports. See gatling.charting.useGroupDurationMetric option in gatling.conf</p><p>Maven Plugin<br>The Gatling Maven plugin now provides test and integration-test that are bound to the phases of the same name.</p><p>It also now provides a useOldJenkinsJUnitSupport that exposes our JUnit file to Jenkins. At some point, weâ€™ll provide a native support.</p><p>åœ¨2.2çš„æ–°å¢äº†é‚£äº›åŠŸèƒ½<br>JDK<br>gatlingç°åœ¨éœ€è¦JDK8æ”¯æŒã€‚ JVMé»˜è®¤è°ƒæ•´ä½¿ç”¨G1åƒåœ¾æ”¶é›†å™¨ï¼Œå› æ­¤æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨å‡çº§åˆ°æœ€æ–°çš„JDKï¼Œè€Œä¸æ˜¯æ—©æœŸç‰ˆæœ¬ã€‚</p><p>æ ¸å¿ƒ<br>Feeder Shuffleï¼ˆä¸ä¼šç¿»â€¦ï¼‰<br>ç°åœ¨ï¼ŒYou can now shuffle a feeder content before enqueuing its contentï¼Œè¯·å‚é˜…Feederæ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>æ–­è¨€<br>gatlingç°åœ¨æ”¯æŒâ€œper-millionâ€çš„æ–­è¨€ï¼Œç±»ä¼¼äºâ€œpercentâ€ã€‚</p><p>æ¡ä»¶æ£€æŸ¥ï¼ˆè‡ª2.2.1ï¼‰<br>ç°åœ¨åªè¦å½“ç»™å®šæ¡ä»¶æ»¡è¶³æ—¶å°±å¯ä»¥æ‰§è¡Œä¸€ä¸ªç»™å®šçš„æ£€æŸ¥ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ¡ä»¶æ£€æŸ¥æ–‡æ¡£ã€‚</p><p>HTTP<br>æœ¬æœºä¼ è¾“<br>è™½ç„¶æˆ‘ä¹Ÿä¸çŸ¥é“ epoll-based NIOæ˜¯ä»€ä¹ˆã€‚ã€‚ã€‚</p><p>gatlingç°åœ¨åŸºäºNetty 4æä¾›ä¸€ä¸ªå¯é€‰çš„åŸºäºåŸç”Ÿçš„epoll-NIOé‡æ–°å®ç°ï¼ˆä»JDK NIOä¸åŒï¼‰ï¼Œå®ƒå¯ä»¥æä¾›æ›´å¥½çš„ååé‡ã€‚æ­¤é€‰é¡¹ä»…åœ¨Linuxä¸Šå¯ç”¨ã€‚è¯¦è§çš„Nettyæ–‡æ¡£,äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>gatlingä¸éœ€è¦æºå¸¦éœ€è¦çš„jaråŒ…ï¼Œå®ƒå–å†³äºä½ çš„æ“ä½œç³»ç»Ÿ,å¦‚æœä½ æƒ³è¦é™æ€æˆ–åŠ¨æ€ç»‘å®šã€‚ä½ éœ€è¦æ‰‹åŠ¨é…ç½®éœ€è¦çš„jarçš„pathåˆ°gatlingçš„classpathã€‚<br>åŠ ç‰¹æ—é™„å¸¦æ‰€éœ€çš„jar,ä½†é»˜è®¤é€‰é¡¹æ˜¯å…³é—­çš„ã€‚</p><p>ä¸ºäº†å¯ç”¨å®ƒ,è®¾ç½®gatling.http.ahcã€‚åœ¨gatling.conf useNativeTransportä¸ºtrueã€‚</p><p>ä¸ºäº†å¯ç”¨ä»–ï¼Œéœ€è¦åœ¨gatling.confé‡Œå°† gatling.http.ahc.useOpenSslè®¾ç½®ä¸ºtrueã€‚</p><p>è¡¨å•æ”¯æŒ<br>æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨çš„form(â€œcssSelectorâ€).saveAsï¼ˆâ€œmyFormâ€ï¼‰æ£€æŸ¥æ•æ‰Map[String, Seq[String]]åœ¨HTMLè¡¨å•çš„æ‰€æœ‰è¾“å…¥ã€‚</p><p>ç„¶åï¼Œæ‚¨å¯ä»¥ä¼ é€’ç»™ä»¥åçš„è¯·æ±‚ã€‚è§HTTPè¯·æ±‚çš„æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>è½®è®­æ”¯æŒ<br>gatlingç°åœ¨æ”¯æŒHTTPè½®è¯¢ï¼Œè¯·å‚é˜…HTTPè½®è¯¢æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>hostnameè§£æ<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œ, virtual users now use a shuffled list of the DNS records Gatling gets from the JDK. If you use DNS round-robinã€‚å¦‚æœæ‚¨ä½¿ç”¨DNSå¾ªç¯ï¼Œè¿™å°†ä½ çš„è™šæ‹Ÿç”¨æˆ·çš„é™æ€ç¾¤é›†çš„èŠ‚ç‚¹ä¹‹é—´å¹³è¡¡ã€‚</p><p>æˆ–è€…ï¼Œä¹Ÿå¯ä»¥åœ¨HTTPåè®®ä½¿ç”¨perUserNameResolutionï¼Œå¹¶è®©æ¯ä¸ªè™šæ‹Ÿç”¨æˆ·è‡ªèº«è¿›è¡ŒDNSè§£æã€‚è¿™æ ·ï¼Œå¦‚æœä½ çš„é›†ç¾¤è´Ÿè½½ä¸‹çš„å¼¹æ€§å¢é•¿æ—¶ï¼Œä½ çš„è™šæ‹Ÿç”¨æˆ·ä¼šä¿æŒè‰¯å¥½çš„å¹³è¡¡ã€‚è§HTTPåè®®æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>æˆ‘ä»¬ä¹Ÿæ”¯æŒDNSæ•…éšœè½¬ç§»ï¼Œè¿™æ„å‘³ç€è™šæ‹Ÿç”¨æˆ·ä¼šå°è¯•ä¸‹ä¸€ä¸ªDNSè®°å½•ï¼Œå½“ä»–ä»¬æ— æ³•è¿æ¥åˆ°ç¬¬ä¸€ä¸ªåœ°å€æ—¶ã€‚</p><p>åˆ«åä¸»æœºå<br>æ‚¨å¯ä»¥ç»•è¿‡ä¸»æœºåè§£æå’ŒHTTPåè®®å®šä¹‰hostNameAliasesåˆ«åã€‚è§HTTPåè®®æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>æœ¬åœ°åœ°å€<br>å®ƒç°åœ¨å¯ä»¥å°†å¤šä¸ªæœ¬åœ°åœ°å€ä¼ é€’ç»™åœ¨localAddresses HTTPåè®®ã€‚è§HTTPåè®®æ–‡æ¡£äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p><p>æŠ¥å‘Š<br>JUnitçš„æ ¼å¼æŠ¥å‘Šæ–‡ä»¶<br>åŠ ç‰¹æ—ç°åœ¨æ ¹æ®ä½ çš„æ¨¡æ‹Ÿæ–­è¨€äº§æˆä¸€ä¸ªJUnitæ ¼å¼çš„æŠ¥å‘Šæ–‡ä»¶ã€‚æ­¤æ–‡ä»¶å°†ç”Ÿæˆå¦‚/js/assertions.xmlã€‚</p><p>groupæŒç»­æ—¶é—´<br>æ‚¨å¯ä»¥åˆ‡æ¢ç»„ç´¯è®¡å“åº”æ—¶é—´å½“æ—¶é—´ç”ŸæˆæŠ¥å‘Šæ—¶ã€‚è§gatling.conf gatling.charting.useGroupDurationMetricé€‰é¡¹</p><p>Mavenæ’ä»¶<br>gatling Mavenæ’ä»¶ç°åœ¨æä¾›æµ‹è¯•å’Œé›†æˆæµ‹è¯•ç»‘å®šåˆ°åŒåçš„é˜¶æ®µã€‚</p><p>å®ƒè¿˜ç°åœ¨æä¾›ä¸€ä¸ªå…¬å¼€çš„JUnitæˆ‘ä»¬çš„æ–‡ä»¶ï¼Œjenkinsä¸€useOldJenkinsJUnitSupportã€‚åœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬å°†æä¾›åŸç”Ÿæ”¯æŒã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç¬¬äºŒç¯‡&lt;br&gt;&lt;a href=&quot;http://gatling.io/docs/2.2.1/whats_new/2.2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://gatling.io/docs/2.2.1/whats_new/2.
      
    
    </summary>
    
    
      <category term="gatling" scheme="http://yoursite.com/tags/gatling/"/>
    
  </entry>
  
  <entry>
    <title>gatlingå®˜æ–¹æ–‡æ¡£ç¿»è¯‘</title>
    <link href="http://yoursite.com/2016/05/31/gatling/"/>
    <id>http://yoursite.com/2016/05/31/gatling/</id>
    <published>2016-05-31T06:56:38.000Z</published>
    <updated>2017-09-25T09:15:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç¬¬ä¸€ç¯‡</p><h2 id="http-gatling-io-docs-2-2-1-index-html"><a href="#http-gatling-io-docs-2-2-1-index-html" class="headerlink" title="http://gatling.io/docs/2.2.1/index.html"></a><a href="http://gatling.io/docs/2.2.1/index.html" target="_blank" rel="external">http://gatling.io/docs/2.2.1/index.html</a></h2><p>Gatling is a highly capable load testing tool. It is designed for ease of use, maintainability and high performance.</p><p>Out of the box, Gatling comes with excellent support of the HTTP protocol that makes it a tool of choice for load testing any HTTP server. As the core engine is actually protocol agnostic, it is perfectly possible to implement support for other protocols. For example, Gatling currently also ships JMS support.</p><p>The Quickstart has an overview of the most important concepts, walking you through the setup of a simple scenario for load testing an HTTP server.</p><p>Having scenarios that are defined in code and are resource efficient are the two requirements that motivated us to create Gatling. Based on an expressive DSL, the scenarios are self explanatory. They are easy to maintain and can be kept in a version control system.</p><p>Gatlingâ€™s architecture is asynchronous as long as the underlying protocol, such as HTTP, can be implemented in a non blocking way. This kind of architecture lets us implement virtual users as messages instead of dedicated threads, making them very resource cheap. Thus, running thousands of concurrent virtual users is not an issue.</p><p>Migrating from a Previous Version of Gatling<br>If youâ€™re migrating from Gatling 2.1 to Gatling 2.2, please check the dedicated migration guide.<br>Otherwise, please follow the previous migration guides.<br>Userâ€™s guide<br>Whatâ€™s New<br>Migration Guides<br>Quickstart<br>Advanced Tutorial<br>General<br>Session<br>HTTP<br>JMS<br>Realtime monitoring<br>Extensions<br>Cookbook<br>Information for Gatling Developers<br>Project Information</p><p>gatlingæ˜¯ä¸€ä¸ªçš„é«˜æ€§èƒ½å‹åŠ›æµ‹è¯•å·¥å…·ã€‚å®ƒè®¾è®¡çš„åˆè¡·æ˜¯æ˜“ç”¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œé«˜æ€§èƒ½ã€‚gatlingå¼€ç®±å³ç”¨çš„,å¹¶ä¸”å¾ˆå¥½çš„æ”¯æŒHTTPåè®®,ä½¿å…¶æˆä¸ºä½ æµ‹è¯•ä»»ä½•HTTPæœåŠ¡å™¨è´Ÿè½½çš„å·¥å…·é€‰æ‹©ä¹‹ä¸€ã€‚ä½œä¸ºæ ¸å¿ƒå¼•æ“å®é™…ä¸Šæ˜¯åè®®æ— å…³,è¿™æ˜¯å®Œå…¨æœ‰å¯èƒ½å®ç°å¹¶æ”¯æŒå…¶ä»–åè®®ã€‚ä¾‹å¦‚,gatlingç›®å‰è¿˜å¯¹JMSæ”¯æŒã€‚</p><p>å¿«é€Ÿå…¥é—¨æ˜¯å¯¹äºæœ€é‡è¦çš„æ¦‚å¿µæœ‰ä¸€ä¸ªå›é¡¾,é€šè¿‡è®¾ç½®ä¸€ä¸ªç®€å•çš„åœºæ™¯çš„æ¥å¯¹ä¸€ä¸ªHTTPæœåŠ¡å™¨å®Œæˆè´Ÿè½½æµ‹è¯•ã€‚<br>åœ¨ä»£ç ä¸­å®šä¹‰æµ‹è¯•åœºæ™¯å’Œèµ„æºåˆ©ç”¨ç‡ä¸¤æ–¹é¢çš„éœ€æ±‚,æ¿€åŠ±æˆ‘ä»¬åˆ›é€ gatlingã€‚åŸºäºå¯è¡¨è¿°çš„DSLè¯­è¨€,æ‰€ä»¥åœºæ™¯æ˜“äºå™è¿°å’Œç†è§£çš„ã€‚ä»–ä»¬å¾ˆå®¹æ˜“ç»´æŠ¤,å¹¶ä¸”å¯ä»¥ä¿å­˜åœ¨ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</p><p>gatlingçš„æ¶æ„å’Œåº•å±‚åè®®å‡é‡‡ç”¨å¼‚æ­¥æ–¹å¼è®¾è®¡ã€‚æ¯”å¦‚HTTPã€å¯ä»¥åˆ©ç”¨ä¸€ä¸ªéé˜»å¡çš„æ–¹å¼æ¥å®ç°ã€‚è¿™ç§æ¶æ„å¯ä»¥è®©æˆ‘ä»¬å®ç°è™šæ‹Ÿç”¨æˆ·çš„æ¶ˆæ¯è€Œä¸æ˜¯ä¸“ç”¨çš„çº¿ç¨‹,è®©ä»–ä»¬æˆä¸ºéå¸¸å»‰ä»·èµ„æºã€‚å› æ­¤,è¿è¡Œæ•°åƒå¹¶å‘è™šæ‹Ÿç”¨æˆ·ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚</p><p>ä»ä¹‹å‰çš„ç‰ˆæœ¬ä¸­åˆå¹¶gatling</p><p>å¦‚æœä½ ä»gatling2.1è¿ç§»åˆ°2.2gatling,è¯·æ£€æŸ¥ä¸“ç”¨çš„åˆå¹¶æŒ‡å—ã€‚å¦åˆ™,è¯·å®‰è£…çš„åˆå¹¶æŒ‡å—ã€‚</p><h3 id="ç”¨æˆ·æ‰‹å†Œ"><a href="#ç”¨æˆ·æ‰‹å†Œ" class="headerlink" title="ç”¨æˆ·æ‰‹å†Œ"></a>ç”¨æˆ·æ‰‹å†Œ</h3><ul><li>æ–°äº‹ç‰©</li><li>åˆå¹¶æ‰‹å†Œ</li><li>å¿«é€Ÿå…¥é—¨</li><li>é«˜çº§æ•™ç¨‹</li><li>é€šç”¨</li><li>æ¶ˆæ¯</li><li>Http</li><li>JMS</li><li>å®æ—¶ç›‘æµ‹</li><li>æ‰©å±•</li><li>cookbook</li><li>gatling å¼€å‘è€…ä¿¡æ¯</li><li>é¡¹ç›®ä¿¡æ¯        </li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç¬¬ä¸€ç¯‡&lt;/p&gt;
&lt;h2 id=&quot;http-gatling-io-docs-2-2-1-index-html&quot;&gt;&lt;a href=&quot;#http-gatling-io-docs-2-2-1-index-html&quot; class=&quot;headerlink&quot; title=&quot;http://
      
    
    </summary>
    
    
      <category term="gatling" scheme="http://yoursite.com/tags/gatling/"/>
    
  </entry>
  
</feed>
